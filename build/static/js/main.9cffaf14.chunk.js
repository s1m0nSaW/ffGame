(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{465:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),i=n(48),s=n.n(i),j=n(43),o=n.n(j),b=n(20),u=n(9),l=n(16),d=n.n(l),O=n(12),x=n(22),h=n(3),f="/register",p="/training",m="/settings",v="/pause",g="/main",y="/property",w="/bank",z="/profile",C="panel_intro",k="panel_register",P="panel_training",_="panel_settings",S="panel_pause",I="panel_main",K="panel_property",E="panel_bank",T="panel_profile",A="view_main",R=(c={},Object(h.a)(c,"/",new x.Page(C,A)),Object(h.a)(c,f,new x.Page(k,A)),Object(h.a)(c,p,new x.Page(P,A)),Object(h.a)(c,m,new x.Page(_,A)),Object(h.a)(c,v,new x.Page(S,A)),Object(h.a)(c,g,new x.Page(I,A)),Object(h.a)(c,y,new x.Page(K,A)),Object(h.a)(c,w,new x.Page(E,A)),Object(h.a)(c,z,new x.Page(T,A)),c),M=new x.Router(R);M.start();var U,F=n(19),B=n(15),D=n(511),W=n(106),N=n(537),H=n(541),V=n(559),G=n(533),q=n(547),L=n(552),J=n(538),Q=n(519),X=n(553),Y=n(549),Z=n(528),$=n(560),ee=n(542),te=n(41),ne=n(527).a.create({baseURL:"http://localhost:4444"}),ce=Object(te.b)("users/getUsers",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.rejectWithValue,c=n.dispatch,e.next=3,ne.get("/auth/users");case 3:r=e.sent,c(je(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),re=Object(te.b)("users/getProfs",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.rejectWithValue,c=n.dispatch,e.next=3,ne.get("/profs");case 3:r=e.sent,c(be(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(te.c)({name:"user",initialState:{user:{},users:[],friends:[],profs:[],status:""},reducers:{setUser:function(e,t){e.user=t.payload},setUsers:function(e,t){e.users=t.payload},setFriends:function(e,t){e.friends=t.payload},setStatus:function(e,t){e.status=t.payload},setProfs:function(e,t){e.profs=t.payload}},extraReducers:(U={},Object(h.a)(U,ce.fulfilled,(function(){console.log("users \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b")})),Object(h.a)(U,ce.pending,(function(){console.log("\u0437\u0430\u043f\u0440\u043e\u0441 users")})),Object(h.a)(U,ce.rejected,(function(){console.log("\u043e\u0448\u0438\u0431\u043a\u0430 users")})),Object(h.a)(U,re.fulfilled,(function(){console.log("profs \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b")})),Object(h.a)(U,re.pending,(function(){console.log("\u0437\u0430\u043f\u0440\u043e\u0441 profs")})),Object(h.a)(U,re.rejected,(function(){console.log("\u043e\u0448\u0438\u0431\u043a\u0430 profs")})),U)}),ie=ae.actions,se=ie.setUser,je=ie.setUsers,oe=ie.setFriends,be=(ie.setStatus,ie.setProfs),ue=ae.reducer,le=n(548),de=n(539),Oe=n(540),xe=n(532),he=n(79),fe=n(219),pe=n(517),me=n(80),ve=n(518),ge=n(221),ye=n.n(ge),we=n(164),ze=n.n(we),Ce=n(167),ke=n.n(Ce),Pe=n(102),_e=n.n(Pe),Se=n(222),Ie=n.n(Se),Ke=n(168),Ee=n.n(Ke),Te=n(161),Ae=n.n(Te),Re=n(0),Me=function(e){var t=e.fetchedUser,n=Object(O.b)(),c=a.a.useState(!1),r=Object(u.a)(c,2),i=r[0],s=r[1],j=a.a.useState(he.a[500]),o=Object(u.a)(j,2),l=o[0],x=o[1],h=a.a.useState(0),f=Object(u.a)(h,2),p=f[0],m=f[1],v=a.a.useState(0),g=Object(u.a)(v,2),y=g[0],w=g[1],z=Object(O.c)((function(e){return e.user.user})),C=Object(O.c)((function(e){return e.bizs.bizs})).filter((function(e){var t=e._id;return z.bizs.includes(t)})).map((function(e){return e.requiredTime})).reduce((function(e,t){return e+t}),0);a.a.useEffect((function(){z.energizer>0&&z.energy<z.maxEnergy?x(he.a[400]):x(fe.a[200]);var e=setInterval((function(){!z.freeEnergizer&&m((function(e){return e>=100?100:e+1}));var e=+new Date;if(e>z.freeEnergizer){var t=Object(B.a)(Object(B.a)({},z),{},{freeEnergizerOn:!0});n(se(t)),k(t)}w(z.freeEnergizer-e),100==p&&m(0)}),100);return function(){clearInterval(e)}}),[z,m]);var k=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(z._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(Re.jsxs)(D.a,{direction:"column",children:[Object(Re.jsx)(W.a,{}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(D.a,{direction:"row",spacing:1,children:[Object(Re.jsx)(ze.a,{}),Object(Re.jsxs)(W.a,{children:["\u042d\u043d\u0435\u0440\u0433\u0438\u044f - \u0440\u0430\u0441\u0445\u043e\u0434\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043a\u043e\u0433\u0434\u0430 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c \u043e\u0442 \u0431\u0438\u0437\u043d\u0435\u0441\u0430. \u041a\u0443\u043f\u0438\u0432 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c, \u043d\u0435 \u0441\u0434\u0430\u0432\u0430\u044f \u0435\u0451 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443, \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044d\u043d\u0435\u0440\u0433\u0438\u0438.",Object(Re.jsx)("br",{}),Object(Re.jsx)("br",{}),"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u044d\u043d\u0435\u0440\u0433\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u044d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u0430."]})]}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(D.a,{direction:"row",spacing:1,children:[Object(Re.jsx)(_e.a,{}),Object(Re.jsx)(W.a,{children:"\u042d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a \u043f\u043e\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u044d\u043d\u0435\u0440\u0433\u0438\u044e \u043d\u0430 5 \u043f\u0443\u043d\u043a\u0442\u043e\u0432. \u041a\u0430\u0436\u0434\u044b\u0439 24 \u0447\u0430\u0441\u0430 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f 10 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0445 \u044d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u043e\u0432, \u0438\u0445 \u043a\u043e\u043b\u0438\u0441\u0435\u0441\u0442\u0432\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0434\u043e 50, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445."})]}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(D.a,{direction:"row",spacing:1,children:[Object(Re.jsx)(ke.a,{}),Object(Re.jsx)(W.a,{children:" \u0412\u0440\u0435\u043c\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u0431\u0438\u0437\u043d\u0435\u0441\u0430. \u041e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 10 \u0447. \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043a\u0443\u043f\u0438\u0432 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442."})]}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(D.a,{direction:"row",spacing:1,children:[Object(Re.jsx)(Ee.a,{}),Object(Re.jsx)(W.a,{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442 \u0438\u0433\u0440\u043e\u043a\u0430 \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442, \u043f\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 60 \u043b\u0435\u0442 \u0438\u0433\u0440\u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f."})]})]}),_=Object(Re.jsx)(a.a.Fragment,{children:Object(Re.jsx)(q.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return s(!1)},children:Object(Re.jsx)(ye.a,{fontSize:"small"})})});return Object(Re.jsxs)(le.a,{component:"nav",color:"inherit",sx:{padding:"10px",borderRadius:"10px",top:10,marginBottom:"10px"},position:"sticky",children:[t?Object(Re.jsx)(Y.a,{disableGutters:!0,children:Object(Re.jsxs)(D.a,{direction:"column",sx:{width:"100%"},children:[Object(Re.jsxs)(D.a,{direction:"row",spacing:1,children:[Object(Re.jsx)(D.a,{children:Object(Re.jsx)(J.a,{src:t.photo_200})}),Object(Re.jsxs)(D.a,{direction:"column",children:[Object(Re.jsxs)(W.a,{variant:"caption",children:[t.first_name," ",t.last_name]}),Object(Re.jsxs)(W.a,{children:["\u0411\u0430\u043b\u0430\u043d\u0441: ",z.balance," K"]})]})]}),Object(Re.jsxs)(D.a,{sx:{marginTop:"15px"},direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:1,children:[Object(Re.jsx)(de.a,{label:"".concat(z.energy,"/").concat(z.maxEnergy),sx:{bgcolor:l},deleteIcon:Object(Re.jsx)(Ie.a,{}),onDelete:function(){if(z.energizer>0&&z.energy<z.maxEnergy){var e=z.energizer-1,t=z.energy+5,c=Object(B.a)(Object(B.a)({},z),{},{energizer:e,energy:t});n(se(c)),k(c)}},icon:Object(Re.jsx)(ze.a,{}),size:"small"}),Object(Re.jsx)(de.a,{label:z.energizer,icon:Object(Re.jsx)(_e.a,{}),size:"small",sx:{bgcolor:pe.a[200]}}),Object(Re.jsx)(de.a,{label:"".concat(z.time-(C+z.workTime),"/").concat(z.time),sx:{bgcolor:me.a[200]},icon:Object(Re.jsx)(ke.a,{}),size:"small"}),Object(Re.jsx)(de.a,{label:"".concat(Math.trunc(z.age/12),"/60"),sx:{bgcolor:ve.a[300]},icon:Object(Re.jsx)(Ee.a,{}),size:"small"})]}),Object(Re.jsxs)(D.a,{direction:"row",sx:{marginTop:"15px"},children:[z.freeEnergizerOn?Object(Re.jsx)(de.a,{label:"+10 \u044d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u043e\u0432",onClick:function(){return function(){var e=+new Date,t=z.energizer+10,c=Object(B.a)(Object(B.a)({},z),{},{energizer:t,freeEnergizer:e+864e5,freeEnergizerOn:!1});n(se(c)),k(c)}()},color:"primary",icon:Object(Re.jsx)(_e.a,{}),size:"small"}):Object(Re.jsx)(de.a,{label:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 ".concat(function(e){var t=e/36e5,n=Math.floor(t),c=n>9?n:"0"+n,r=60*(t-n),a=Math.floor(r),i=a>9?a:"0"+a,s=60*(r-a),j=Math.floor(s);return c+":"+i+":"+(j>9?j:"0"+j)}(y)),icon:Object(Re.jsx)(_e.a,{}),size:"small"}),Object(Re.jsx)(Ae.a,{onClick:function(){return s(!0)},color:"primary",sx:{marginLeft:"auto"}})]})]})}):Object(Re.jsxs)(Y.a,{children:[Object(Re.jsx)(Oe.a,{variant:"circular",width:40,height:40,animation:"wave"}),Object(Re.jsx)(H.a,{children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(Oe.a,{}),secondary:Object(Re.jsx)(Oe.a,{})})})]}),Object(Re.jsx)("div",{children:Object(Re.jsx)(xe.a,{open:i,onClose:function(){return s(!1)},message:P,action:_})})]})},Ue=n(550),Fe=n(551),Be=n(224),De=n.n(Be),We=n(225),Ne=n.n(We),He=n(226),Ve=n.n(He),Ge=n(223),qe=n.n(Ge);var Le=function(e){var t=e.value,n=Object(x.useRouter)();return Object(Re.jsx)(N.a,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:Object(Re.jsxs)(Ue.a,{value:t,onChange:function(e,t){n.pushPage(t)},children:[Object(Re.jsx)(Fe.a,{label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",value:g,icon:Object(Re.jsx)(qe.a,{})}),Object(Re.jsx)(Fe.a,{label:"\u0421\u0434\u0435\u043b\u043a\u0438",value:y,icon:Object(Re.jsx)(De.a,{})}),Object(Re.jsx)(Fe.a,{label:"\u0411\u0430\u043d\u043a",value:w,icon:Object(Re.jsx)(Ne.a,{})}),Object(Re.jsx)(Fe.a,{label:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",value:z,icon:Object(Re.jsx)(Ve.a,{})})]})})},Je=n(522),Qe=n(554),Xe=n(525),Ye=n(556),Ze=n(557),$e=n(558),et=n(81),tt=n(521),nt=n(123),ct=n.n(nt),rt=n(120),at=n.n(rt),it=n(121),st=n.n(it),jt=n(122),ot=n.n(jt);var bt=function(e){var t=e.biz,n=a.a.useState("inherit"),c=Object(u.a)(n,2),r=c[0],i=c[1],s=function(){return Object(Re.jsx)(at.a,{color:"warning",onClick:function(){return g(!0)}})},j=function(){return Object(Re.jsx)(st.a,{color:"success",onClick:function(){return g(!0)}})},o=function(){return Object(Re.jsx)(ot.a,{color:"secondary",onClick:function(){return g(!0)}})},l=a.a.useState(et.a[300]),x=Object(u.a)(l,2),h=x[0],f=x[1],p=a.a.useState(!1),m=Object(u.a)(p,2),v=m[0],g=m[1],y=a.a.useState((t.maxProfit-t.minProfit)/2+t.minProfit),w=Object(u.a)(y,2),z=w[0],C=w[1],k=a.a.useState(0),P=Object(u.a)(k,2),_=P[0],S=P[1],I=10*_,K=a.a.useState(!0),E=Object(u.a)(K,2),T=E[0],A=E[1],R=Object(O.b)(),M=Object(O.c)((function(e){return e.user.user})),U=Object(O.c)((function(e){return e.bizs.bizs})).filter((function(e){var t=e._id;return M.bizs.includes(t)})),F=a.a.useState((function(){return Object(Re.jsx)(Oe.a,{animation:"wave",variant:"circular",width:40,height:40})})),N=Object(u.a)(F,2),H=N[0],V=N[1];a.a.useEffect((function(){"\u0423\u0441\u043b\u0443\u0433\u0438"==t.bizType?(i("secondary"),V(o)):"\u041e\u0431\u0449\u0435\u043f\u0438\u0442"==t.bizType?(i("warning"),V(s)):"\u0422\u043e\u0440\u0433\u043e\u0432\u043b\u044f"==t.bizType&&(i("success"),V(j))}),[t.bizType]);var Y=function(){A(!1);var e,n,c=(e=-150,n=t.maxProfit,e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e);f(c>0?et.a[700]:tt.a[500]),C(c)},Z=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(M._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e=setInterval((function(){T&&S((function(e){return e>=10?10:e+1})),10==_&&(M.energy<=0?function(){var e=Object(B.a)(Object(B.a)({},M),{},{onGame:!1});R(se(e)),Z(e)}():Y())}),500);return function(){clearInterval(e)}}),[T,_]),Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{alignItems:"flex-end",children:[Object(Re.jsxs)(W.a,{variant:"h6",sx:{color:h},children:[Math.trunc(z)," K"]}),Object(Re.jsx)(q.a,{onClick:function(){return function(e,t){A(!0),10==_&&S(0);var n=M.balance+e,c=M.energy-t,r=Object(B.a)(Object(B.a)({},M),{},{balance:n,energy:c});R(se(r)),Z(r)}(Math.trunc(z),t.requiredEnergy)},color:"primary",disabled:T,variant:"contained",size:"small",children:Object(Re.jsx)(ct.a,{})})]}),children:[Object(Re.jsx)(L.a,{children:Object(Re.jsx)(J.a,{children:H})}),Object(Re.jsx)(Q.a,{primary:Object(Re.jsxs)(a.a.Fragment,{children:[t.bizName,Object(Re.jsx)("br",{}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u041c\u0430\u043a\u0441. \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",t.maxProfit," K"]})]}),secondary:Object(Re.jsx)(X.a,{sx:{width:.5},variant:"determinate",value:I,color:r})})]}),Object(Re.jsx)(Je.a,{variant:"inset",component:"li"}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(Qe.a,{open:v,onClose:function(){return g(!1)},fullWidth:!0,children:[Object(Re.jsx)(Xe.a,{children:t.bizName}),Object(Re.jsx)(Ye.a,{children:Object(Re.jsxs)(Ze.a,{children:["\u0412\u0438\u0434 \u0431\u0438\u0437\u043d\u0435\u0441\u0430: ",Object(Re.jsx)("b",{children:t.bizType}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434 \u044d\u043d\u0435\u0440\u0433\u0438\u0438: ",Object(Re.jsx)("b",{children:t.requiredEnergy}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438: ",Object(Re.jsxs)("b",{children:[t.requiredTime,"\u0447."]}),Object(Re.jsx)("br",{}),"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",Object(Re.jsxs)("b",{children:[t.maxProfit," K"]}),Object(Re.jsx)("br",{}),"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",Object(Re.jsxs)("b",{children:[t.minProfit," K"]}),Object(Re.jsx)("br",{}),"\u0420\u0438\u0441\u043a: ",Object(Re.jsx)("b",{children:t.risk}),Object(Re.jsx)("br",{}),"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",Object(Re.jsxs)("b",{children:[t.sellPrice," K"]}),Object(Re.jsx)("br",{})]})}),Object(Re.jsxs)($e.a,{children:[Object(Re.jsx)(ee.a,{onClick:function(){!function(e,t){var n=M.balance+t,c=U.filter((function(t){return t._id!==e})),r=Object(B.a)(Object(B.a)({},M),{},{balance:n,bizs:c.map((function(e){return e._id}))});R(se(r)),Z(r)}(t._id,t.sellPrice),g(!1)},children:"\u041f\u0440\u043e\u0434\u0430\u0442\u044c"}),Object(Re.jsx)(ee.a,{onClick:function(){return g(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})},ut=n(229),lt=n.n(ut);var dt=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.cars.cars})),n=Object(O.c)((function(e){return e.houses.houses})).filter((function(t){var n=t._id;return e.house.includes(n)})),c=t.filter((function(t){var n=t._id;return e.car.includes(n)})),r=n.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),i=c.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),s=a.a.useState(0),j=Object(u.a)(s,2),o=j[0],b=j[1],l=a.a.useState(!1),d=Object(u.a)(l,2),x=d[0],h=d[1],f=Object(O.b)();return a.a.useEffect((function(){var t=setInterval((function(){b((function(e){return e>=100?100:e+1})),100==o&&(!function(){var t=e.balance+e.salary,n=Object(B.a)(Object(B.a)({},e),{},{balance:t});f(se(n))}(),b(0))}),100);return function(){clearInterval(t)}}),[o]),Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"h6",children:[e.salary," K"]}),children:[Object(Re.jsx)(L.a,{onClick:function(){return h(!0)},children:Object(Re.jsx)(J.a,{children:Object(Re.jsx)(lt.a,{color:"action"})})}),Object(Re.jsx)(Q.a,{primary:Object(Re.jsxs)(a.a.Fragment,{children:["\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f: ",e.prof,Object(Re.jsx)("br",{})]}),secondary:Object(Re.jsx)(X.a,{sx:{width:.5},variant:"determinate",value:o,color:"inherit"})})]}),Object(Re.jsxs)(Qe.a,{open:x,onClose:function(){return h(!1)},fullWidth:!0,children:[Object(Re.jsx)(Xe.a,{children:"\u0420\u0430\u0431\u043e\u0442\u0430"}),Object(Re.jsx)(Ye.a,{children:Object(Re.jsxs)(Ze.a,{children:["\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f: ",Object(Re.jsx)("b",{children:e.prof}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438: ",Object(Re.jsx)("b",{children:"8\u0447."}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u0434\u043e\u043c: ",Object(Re.jsxs)("b",{children:[r," K"]}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442: ",Object(Re.jsxs)("b",{children:[i," K"]}),Object(Re.jsx)("br",{}),"\u041e\u0431\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",Object(Re.jsxs)("b",{children:[e.expenses," K"]}),Object(Re.jsx)("br",{})]})}),Object(Re.jsxs)($e.a,{children:[Object(Re.jsx)(ee.a,{onClick:function(){!function(){var t=Object(B.a)(Object(B.a)({},e),{},{workTime:0,salary:0});f(se(t))}(),h(!1)},children:"\u0423\u0432\u043e\u043b\u0438\u0442\u044c\u0441\u044f"}),Object(Re.jsx)(ee.a,{onClick:function(){return h(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})},Ot=n(126),xt=n.n(Ot);var ht=function(e){var t=e.house,n=a.a.useState(0),c=Object(u.a)(n,2),r=c[0],i=c[1],s=r,j=Object(O.b)(),o=Object(O.c)((function(e){return e.user.user}));return a.a.useEffect((function(){var e=setInterval((function(){i((function(e){return e>=100?100:e+1})),100==r&&function(){var e=o.balance+t.rentPrice,n=Object(B.a)(Object(B.a)({},o),{},{balance:e});j(se(n)),i(0)}()}),100);return function(){clearInterval(e)}}),[r]),Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"h6",children:[t.rentPrice," K"]}),children:[Object(Re.jsx)(L.a,{children:Object(Re.jsx)(J.a,{children:Object(Re.jsx)(xt.a,{color:"action"})})}),Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:t.name}),secondary:Object(Re.jsx)(X.a,{sx:{width:.5},variant:"determinate",value:s,color:"inherit"})})]}),Object(Re.jsx)(Je.a,{variant:"inset",component:"li"}),Object(Re.jsx)("br",{})]})},ft=n(169),pt=n.n(ft),mt=n(129),vt=n.n(mt),gt=n(47);var yt=function(e){var t=e.fetchedUser,n=Object(O.b)(),c=Object(x.useRouter)(),r=Object(O.c)((function(e){return e.user.user})),i=Object(O.c)((function(e){return e.bizs.bizs})),s=Object(O.c)((function(e){return e.houses.houses})),j=Object(O.c)((function(e){return e.cars.cars})),o=s.filter((function(e){var t=e._id;return r.house.includes(t)})),l=j.filter((function(e){var t=e._id;return r.car.includes(t)})),h=i.filter((function(e){var t=e._id;return r.bizs.includes(t)})),p=s.filter((function(e){var t=e._id;return r.rent.includes(t)})),m=p.map((function(e){return e.rentPrice})).reduce((function(e,t){return e+t}),0),y=o.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),w=l.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),z=p.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),C=r.credits.map((function(e){return e.debt})).reduce((function(e,t){return e+t}),0),k=r.credits.map((function(e){return e.payment})).reduce((function(e,t){return e+t}),0),P=5*r.children+r.expenses+w+y+z,_=a.a.useState(0),S=Object(u.a)(_,2),I=S[0],K=S[1],E=a.a.useState(!0),T=Object(u.a)(E,2),A=T[0],R=T[1],M=a.a.useState(0),U=Object(u.a)(M,2),te=U[0],ce=U[1],re=a.a.useState(!1),ae=Object(u.a)(re,2),ie=ae[0],je=ae[1],oe=a.a.useState(!1),be=Object(u.a)(oe,2),ue=be[0],le=be[1],de=a.a.useState(!1),Oe=Object(u.a)(de,2),xe=Oe[0],he=Oe[1],fe=a.a.useState(!1),pe=Object(u.a)(fe,2),me=pe[0],ve=pe[1],ge=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(r._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a.a.useEffect((function(){0==r.onGame&&c.pushPage(v)}),[r]),a.a.useEffect((function(){var e=setInterval((function(){r.balance<r.debts+C&&r.credits.length>=5&&o.length<=1&&h.length<=0&&l.length<=0&&p.length<=0&&le(!0),r.age>=720&&he(!0),.13*r.deposit.amount/12+m>2*(P+k)&&ve(!0),r.onGame&&K((function(e){return e>=1198?1198:e+1})),1198==I&&(r.debts>=0&&je(!0),K(0)),100!=I&&200!=I&&300!=I&&400!=I&&500!=I&&600!=I&&700!=I&&800!=I&&900!=I&&1e3!=I&&1100!=I&&1197!=I||function(){var e=r.age+1,t=r.debts+P,c=Object(B.a)(Object(B.a)({},r),{},{credits:function(e){for(var t=[],n=0;n<e.length;n++){var c=e[n];c.debt>=c.amount?t.push({id:c.id,amount:c.amount,debt:c.debt,payment:c.payment}):t.push({id:c.id,amount:c.amount,debt:c.debt+c.payment,payment:c.payment})}return t.sort((function(e,t){return e.id-t.id}))}(r.credits),debts:t,age:e});n(se(c)),ge(c)}();var e=+new Date;r.deposit.date<=e&&(R(!1),ce(100)),A&&ce(Math.round(100-(r.deposit.date-e)/10/120)),r.deposit.date>e&&R(!0)}),100);return function(){clearInterval(e)}}),[I]);var ye={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:250,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:4},we=function(){return Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(vt.a,{sx:{fontSize:40,marginTop:"15px"}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u0431\u0438\u0437\u043d\u0435\u0441\u0430"}),Object(Re.jsx)(W.a,{variant:"caption",children:'\u041a\u0443\u043f\u0438\u0442\u044c \u0431\u0438\u0437\u043d\u0435\u0441 \u043c\u043e\u0436\u043d\u043e \u0432\u043e \u0432\u043a\u043b\u0430\u0434\u043a\u0435 "\u0421\u0434\u0435\u043b\u043a\u0438"'})]})},ze=function(){return Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(pt.a,{sx:{fontSize:40,marginTop:"15px"}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u0432\u043a\u043b\u0430\u0434\u0430"}),Object(Re.jsx)(W.a,{variant:"caption",children:'\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432\u043a\u043b\u0430\u0434 \u043c\u043e\u0436\u043d\u043e \u0432\u043e \u0432\u043a\u043b\u0430\u0434\u043a\u0435 "\u0411\u0430\u043d\u043a"'})]})},Ce=function(){return Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(xt.a,{sx:{fontSize:40,marginTop:"15px"}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u0438 \u0432 \u0430\u0440\u0435\u043d\u0434\u0435"}),Object(Re.jsx)(W.a,{variant:"caption",children:'\u0421\u0434\u0430\u0442\u044c \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0432\u043e \u0432\u043a\u043b\u0430\u0434\u043a\u0435 "\u041f\u0440\u043e\u0444\u0438\u043b\u044c"'})]})};return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(H.a,{children:[Object(Re.jsx)(Me,{fetchedUser:t}),r.onGame?Object(Re.jsxs)(Re.Fragment,{children:[0!=r.salary&&Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{sx:{marginTop:"10px"},variant:"subtitle1",children:"\u0420\u0430\u0431\u043e\u0442\u0430"})}),Object(Re.jsx)(dt,{})]}),Object(Re.jsxs)(V.a,{dense:!0,children:[h.length>=1?Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0411\u0438\u0437\u043d\u0435\u0441\u044b"}):Object(Re.jsx)(we,{}),h.map((function(e,t){return Object(Re.jsx)(bt,{biz:e},t)}))]}),Object(Re.jsx)(V.a,{dense:!0,children:0!=r.deposit.amount?Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0412\u043a\u043b\u0430\u0434"}),Object(Re.jsxs)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{alignItems:"flex-end",children:[Object(Re.jsxs)(W.a,{variant:"h6",children:[Math.round(.13*r.deposit.amount)," K"]}),Object(Re.jsx)(q.a,{onClick:function(){return function(){var e=r.balance+Math.round(.13*r.deposit.amount),t=Object(B.a)(Object(B.a)({},r.deposit),{},{date:+new Date+12e4}),c=Object(B.a)(Object(B.a)({},r),{},{balance:e,deposit:t});n(se(c)),ge(c)}()},color:"primary",disabled:A,variant:"contained",size:"small",children:Object(Re.jsx)(ct.a,{})})]}),children:[Object(Re.jsx)(L.a,{children:Object(Re.jsx)(J.a,{children:Object(Re.jsx)(pt.a,{})})}),Object(Re.jsx)(Q.a,{primary:Object(Re.jsxs)(a.a.Fragment,{children:["\u0412\u043a\u043b\u0430\u0434: ",r.deposit.amount,"\u041a",Object(Re.jsx)("br",{})]}),secondary:Object(Re.jsx)(X.a,{sx:{width:.5},variant:"determinate",value:te,color:"inherit"})})]})]}):Object(Re.jsx)(ze,{})}),Object(Re.jsxs)(V.a,{dense:!0,children:[p.length>=1?Object(Re.jsx)(Re.Fragment,{children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0410\u0440\u0435\u043d\u0434\u0430"})}):Object(Re.jsx)(Ce,{}),p.map((function(e){return Object(Re.jsx)(ht,{house:e},e._id)}))]}),Object(Re.jsx)(Y.a,{})]}):Object(Re.jsx)(D.a,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041d\u0435 \u0432 \u0438\u0433\u0440\u0435"})}),Object(Re.jsx)(Z.a,{open:ie,onClose:function(){return je(!1)},children:Object(Re.jsxs)($.a,{sx:ye,children:[Object(Re.jsxs)(W.a,{children:["\u0417\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c ",r.debts," K"]}),Object(Re.jsx)("br",{}),Object(Re.jsx)(W.a,{variant:"caption",children:'\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0433\u0430\u0441\u0438\u0442\u044c \u0432\u043e \u0432\u043a\u043b\u0430\u0434\u043a\u0435 "\u0411\u0430\u043d\u043a"'})]})}),Object(Re.jsx)(Z.a,{open:me,onClose:function(){return ve(!1)},children:Object(Re.jsxs)($.a,{sx:ye,children:[Object(Re.jsx)(W.a,{children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c!  \ud83e\udd73"}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0412\u044b \u0434\u043e\u0441\u0442\u0438\u0433\u043b\u0438 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u0439 \u0441\u0432\u043e\u0431\u043e\u0434\u044b \u0432 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0435 ",Object(Re.jsx)("b",{children:Math.trunc(r.age/12)}),", \u0441 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u0435\u0439 ",Object(Re.jsx)("b",{children:r.prof}),", \u0441 \u0441\u0443\u043c\u043c\u043e\u0439 \u043f\u0430\u0441\u0441\u0438\u0432\u043d\u043e\u0433\u043e \u0434\u043e\u0445\u043e\u0434\u0430 ",Object(Re.jsx)("b",{children:Math.round(.13*r.deposit.amount/12+m)})]}),Object(Re.jsx)("br",{}),Object(Re.jsx)("br",{}),Object(Re.jsx)(ee.a,{onClick:function(){return function(){var e={id:+new Date,prof:r.prof,age:Math.trunc(r.age/12),cashflow:Math.round(.13*r.deposit.amount/12+m)},t=Object(B.a)(Object(B.a)({},r),{},{records:[].concat(Object(F.a)(r.records),[e])});n(se(t)),ge(t),c.pushPage(f)}()},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"})]})}),Object(Re.jsx)(Z.a,{open:ue,children:Object(Re.jsxs)($.a,{sx:ye,children:[Object(Re.jsx)(W.a,{children:"\u0418\u0433\u0440\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0412\u044b \u0431\u0430\u043d\u043a\u0440\u043e\u0442 \ud83d\ude25"}),Object(Re.jsx)("br",{}),Object(Re.jsx)("br",{}),Object(Re.jsx)(ee.a,{onClick:function(){return c.pushPage(f)},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"})]})}),Object(Re.jsx)(Z.a,{open:xe,children:Object(Re.jsxs)($.a,{sx:ye,children:[Object(Re.jsx)(W.a,{children:"\u0418\u0433\u0440\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0412\u044b \u0434\u043e\u0441\u0442\u0438\u0433\u043b\u0438 \u043f\u0440\u0435\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430 \ud83d\ude25"}),Object(Re.jsx)("br",{}),Object(Re.jsx)("br",{}),Object(Re.jsx)(ee.a,{onClick:function(){return c.pushPage(f)},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"})]})}),Object(Re.jsx)(Le,{value:g})]})})},wt=n(530),zt=n(565);var Ct=function(e){var t=e.biz,n=Object(O.b)(),c=Object(O.c)((function(e){return e.user.user})),r=Object(O.c)((function(e){return e.bizs.bizs})).filter((function(e){var t=e._id;return c.bizs.includes(t)})).map((function(e){return e.requiredTime})).reduce((function(e,t){return e+t}),0),i=a.a.useState(!1),s=Object(u.a)(i,2),j=s[0],o=s[1],l=a.a.useState(!0),x=Object(u.a)(l,2),h=x[0],f=x[1],p=function(){return Object(Re.jsx)(at.a,{color:"warning"})},m=function(){return Object(Re.jsx)(st.a,{color:"success"})},v=function(){return Object(Re.jsx)(ot.a,{color:"secondary"})},g=a.a.useState((function(){return Object(Re.jsx)(Oe.a,{animation:"wave",variant:"circular",width:40,height:40})})),y=Object(u.a)(g,2),w=y[0],z=y[1];a.a.useEffect((function(){"\u0423\u0441\u043b\u0443\u0433\u0438"==t.bizType?z(v):"\u041e\u0431\u0449\u0435\u043f\u0438\u0442"==t.bizType?z(p):"\u0422\u043e\u0440\u0433\u043e\u0432\u043b\u044f"==t.bizType&&z(m),t.bizPrice<=c.balance&&t.requiredTime<=c.time-(r+c.workTime)&&f(!1),(t.bizPrice>c.balance||t.requiredTime>c.time-(r+c.workTime))&&f(!0)}),[t,c.balance]);var C=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(c._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){var r=c.balance-t,a=[].concat(Object(F.a)(c.bizs),[e]),i=Object(B.a)(Object(B.a)({},c),{},{balance:r,bizs:a});n(se(i)),C(i)};return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{justifyContent:"flex-end",direction:"column",children:[Object(Re.jsxs)(W.a,{variant:"body2",children:["\u0426\u0435\u043d\u0430: ",t.bizPrice,"K"]}),Object(Re.jsx)(ee.a,{disabled:h,onClick:function(){k(t._id,t.bizPrice)},children:"\u041a\u0443\u043f\u0438\u0442\u044c"})]}),children:[Object(Re.jsx)(L.a,{onClick:function(){return o(!0)},children:w}),Object(Re.jsx)(Q.a,{primary:t.bizName,secondary:Object(Re.jsxs)(a.a.Fragment,{children:[Object(Re.jsxs)(W.a,{variant:"caption",children:["\u041c\u0430\u043a\u0441. \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",Object(Re.jsxs)("b",{children:[t.maxProfit," K"]})]}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f: ",Object(Re.jsxs)("b",{children:[t.requiredTime,"\u0447."]})]})]})})]}),Object(Re.jsx)(Je.a,{variant:"inset",component:"li"}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(Qe.a,{open:j,onClose:function(){return o(!1)},fullWidth:!0,children:[Object(Re.jsx)(Xe.a,{children:t.bizName}),Object(Re.jsx)(Ye.a,{children:Object(Re.jsxs)(Ze.a,{children:["\u0412\u0438\u0434 \u0431\u0438\u0437\u043d\u0435\u0441\u0430: ",Object(Re.jsx)("b",{children:t.bizType}),Object(Re.jsx)("br",{}),"\u0420\u0430\u0441\u0445\u043e\u0434 \u044d\u043d\u0435\u0440\u0433\u0438\u0438: ",Object(Re.jsx)("b",{children:t.requiredEnergy}),Object(Re.jsx)("br",{}),"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f: ",Object(Re.jsxs)("b",{children:[t.requiredTime,"\u0447."]}),Object(Re.jsx)("br",{}),"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",Object(Re.jsxs)("b",{children:[t.maxProfit," K"]}),Object(Re.jsx)("br",{}),"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u044c: ",Object(Re.jsxs)("b",{children:[t.minProfit," K"]}),Object(Re.jsx)("br",{}),"\u0420\u0438\u0441\u043a: ",Object(Re.jsx)("b",{children:t.risk}),Object(Re.jsx)("br",{}),"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",Object(Re.jsxs)("b",{children:[t.sellPrice," K"]}),Object(Re.jsx)("br",{})]})}),Object(Re.jsxs)($e.a,{children:[Object(Re.jsx)(ee.a,{disabled:h,onClick:function(){k(t._id,t.bizPrice),o(!1)},children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),Object(Re.jsx)(ee.a,{onClick:function(){return o(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})};var kt=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.bizs.bizs})),n=new Set(e.bizs),c=t.filter((function(e){var t=e._id;return!n.has(t)}));return Object(Re.jsx)(Re.Fragment,{children:c.length>=1?Object(Re.jsx)(V.a,{children:c.map((function(e,t){return Object(Re.jsx)(Ct,{biz:e},t)}))}):Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(vt.a,{sx:{fontSize:40}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430"}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0412\u044b \u0441\u043a\u0443\u043f\u0438\u043b\u0438 \u0432\u0441\u0451"})]})})},Pt=n(543),_t=n(561),St=n(562),It=n(563),Kt=n(564);var Et=function(e){var t=e.car,n=e.isMy,c=Object(O.b)(),r=Object(O.c)((function(e){return e.user.user})),i=Object(O.c)((function(e){return e.cars.cars})).filter((function(e){var t=e._id;return r.car.includes(t)})),s=a.a.useState(!0),j=Object(u.a)(s,2),o=j[0],l=j[1];a.a.useEffect((function(){r.balance>t.price&&l(!1)}),[r.balance]);var x=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(r._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Re.jsx)(Pt.a,{item:!0,children:Object(Re.jsxs)(_t.a,{children:[Object(Re.jsx)(St.a,{component:"img",height:"140",image:"http://localhost:4444".concat(t.imageUrl)}),Object(Re.jsxs)(It.a,{children:[n?Object(Re.jsx)(W.a,{gutterBottom:!0,variant:"subtitle2",children:t.name}):Object(Re.jsxs)(W.a,{gutterBottom:!0,variant:"h6",children:["\u0426\u0435\u043d\u0430: ",t.price," K"]}),n?Object(Re.jsxs)(W.a,{gutterBottom:!0,variant:"body2",children:[" \u0426\u0435\u043d\u0430: ",t.price," K"]}):Object(Re.jsx)(W.a,{gutterBottom:!0,variant:"subtitle2",children:t.name}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0412\u0440\u0435\u043c\u044f: ",Object(Re.jsxs)("b",{children:["+",t.time,"\u0447"]}),Object(Re.jsx)("br",{}),"\u042d\u043d\u0435\u0440\u0433\u0438\u044f: ",Object(Re.jsxs)("b",{children:["+",t.energy]}),Object(Re.jsx)("br",{}),"\u0417\u0430\u0442\u0440\u0430\u0442\u044b \u0432 \u043c\u0435\u0441\u044f\u0446: ",Object(Re.jsxs)("b",{children:[t.expenses," \u041a"]}),Object(Re.jsx)("br",{}),"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",Object(Re.jsxs)("b",{children:[t.sellPrice," \u041a"]}),Object(Re.jsx)("br",{})]})]}),Object(Re.jsx)(Kt.a,{children:n?Object(Re.jsx)(ee.a,{size:"small",onClick:function(){return function(){var e=r.balance+t.sellPrice,a=i.filter((function(e){return e._id!==n})),s=r.maxEnergy-t.energy,j=r.time-t.time,o=Object(B.a)(Object(B.a)({},r),{},{balance:e,car:a.map((function(e){return e._id})),maxEnergy:s,time:j});c(se(o)),x(o)}()},children:"\u041f\u0440\u043e\u0434\u0430\u0442\u044c"}):Object(Re.jsx)(ee.a,{disabled:o,size:"small",onClick:function(){return function(){var e=r.balance-t.price,n=[].concat(Object(F.a)(r.car),[t._id]),a=r.maxEnergy+t.energy,i=r.time+t.time,s=Object(B.a)(Object(B.a)({},r),{},{balance:e,car:n,maxEnergy:a,time:i});c(se(s)),x(s)}()},children:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})})},Tt=n(230),At=n.n(Tt);var Rt=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.cars.cars})),n=new Set(e.car),c=t.filter((function(e){var t=e._id;return!n.has(t)}));return Object(Re.jsx)(Re.Fragment,{children:c.length>=1?Object(Re.jsx)(Pt.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",children:c.map((function(e,t){return Object(Re.jsx)(Et,{car:e},t)}))}):Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(At.a,{sx:{fontSize:40}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0433\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0412\u044b \u0441\u043a\u0443\u043f\u0438\u043b\u0438 \u0432\u0441\u0451"})]})})};var Mt=function(e){var t=e.house,n=e.isMy,c=e.isRent,r=Object(O.b)(),i=Object(O.c)((function(e){return e.user.user})),s=Object(O.c)((function(e){return e.houses.houses})),j=s.filter((function(e){var t=e._id;return i.house.includes(t)})),o=s.filter((function(e){var t=e._id;return i.rent.includes(t)})),l=a.a.useState(!0),x=Object(u.a)(l,2),h=x[0],f=x[1];a.a.useEffect((function(){n?c?f(!1):(j.length>1&&f(!1),j.length<=1&&f(!0)):i.balance>t.price&&f(!1)}),[j]);var p=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(i._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Re.jsx)(Pt.a,{item:!0,children:Object(Re.jsxs)(_t.a,{children:[Object(Re.jsx)(St.a,{component:"img",height:"140",image:"http://localhost:4444".concat(t.imageUrl)}),Object(Re.jsxs)(It.a,{children:[n?Object(Re.jsxs)(D.a,{direction:"row",children:[Object(Re.jsx)(W.a,{gutterBottom:!0,variant:"subtitle2",children:t.name}),c&&Object(Re.jsx)(W.a,{variant:"subtitle2",sx:{marginLeft:"auto"},children:"\u0432 \u0430\u0440\u0435\u043d\u0434\u0435"})]}):Object(Re.jsxs)(W.a,{gutterBottom:!0,variant:"h6",children:["\u0426\u0435\u043d\u0430: ",t.price," K"]}),n?Object(Re.jsxs)(W.a,{gutterBottom:!0,variant:"body2",children:["\u0426\u0435\u043d\u0430: ",t.price," K"]}):Object(Re.jsx)(W.a,{gutterBottom:!0,variant:"subtitle2",children:t.name}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u042d\u043d\u0435\u0440\u0433\u0438\u044f: ",Object(Re.jsxs)("b",{children:["+",t.energy]}),Object(Re.jsx)("br",{}),"\u0417\u0430\u0442\u0440\u0430\u0442\u044b \u0432 \u043c\u0435\u0441\u044f\u0446: ",Object(Re.jsxs)("b",{children:[t.expenses," \u041a"]}),Object(Re.jsx)("br",{}),"\u0421\u0434\u0430\u0447\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443: ",Object(Re.jsxs)("b",{children:[t.rentPrice," \u041a/\u043c\u0435\u0441"]})]})]}),Object(Re.jsx)(Kt.a,{children:n?Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(ee.a,{disabled:h,size:"small",onClick:function(){return function(){var e=i.balance+t.price,c=j.filter((function(e){return e._id!==n})),a=i.maxEnergy-t.energy,s=Object(B.a)(Object(B.a)({},i),{},{balance:e,house:c.map((function(e){return e._id})),maxEnergy:a});r(se(s)),p(s)}()},children:"\u041f\u0440\u043e\u0434\u0430\u0442\u044c"}),c?Object(Re.jsx)(ee.a,{disabled:h,size:"small",onClick:function(){return function(){var e=[].concat(Object(F.a)(i.house),[t._id]),n=i.maxEnergy+t.energy,c=o.filter((function(e){return e._id!==t._id})),a=Object(B.a)(Object(B.a)({},i),{},{house:e,maxEnergy:n,rent:c.map((function(e){return e._id}))});r(se(a)),p(a)}()},children:"\u0423\u0431\u0440\u0430\u0442\u044c \u0441 \u0430\u0440\u0435\u043d\u0434\u044b"}):Object(Re.jsx)(ee.a,{disabled:h,size:"small",onClick:function(){return function(){var e=j.filter((function(e){return e._id!==n})),c=i.maxEnergy-t.energy,a=[].concat(Object(F.a)(i.rent),[t._id]),s=Object(B.a)(Object(B.a)({},i),{},{house:e.map((function(e){return e._id})),maxEnergy:c,rent:a});r(se(s)),p(s)}()},children:"\u0421\u0434\u0430\u0442\u044c \u0432 \u0430\u0440\u0435\u043d\u0434\u0443"})]}):Object(Re.jsx)(ee.a,{disabled:h,size:"small",onClick:function(){return function(){var e=i.balance-t.price,n=[].concat(Object(F.a)(i.house),[t._id]),c=i.maxEnergy+t.energy,a=Object(B.a)(Object(B.a)({},i),{},{balance:e,house:n,maxEnergy:c});r(se(a)),p(a)}()},children:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})})},Ut=n(231),Ft=n.n(Ut);var Bt=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.houses.houses})),n=new Set(e.house),c=t.filter((function(e){var t=e._id;return!n.has(t)})),r=new Set(e.rent),a=c.filter((function(e){var t=e._id;return!r.has(t)}));return Object(Re.jsx)(Re.Fragment,{children:a.length>=1?Object(Re.jsx)(Pt.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",children:a.map((function(e,t){return Object(Re.jsx)(Mt,{house:e},t)}))}):Object(Re.jsxs)(D.a,{direction:"column",justifyContent:"space-evenly",alignItems:"center",children:[Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(Ft.a,{sx:{fontSize:40}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u0438"}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0412\u044b \u0441\u043a\u0443\u043f\u0438\u043b\u0438 \u0432\u0441\u0451"})]})})};var Dt=function(e){var t=e.fetchedUser,n=a.a.useState("one"),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(H.a,{children:[Object(Re.jsx)(Me,{fetchedUser:t}),Object(Re.jsxs)(wt.a,{value:r,onChange:function(e,t){i(t)},textColor:"secondary",indicatorColor:"secondary",children:[Object(Re.jsx)(zt.a,{value:"one",label:"\u0411\u0438\u0437\u043d\u0435\u0441"}),Object(Re.jsx)(zt.a,{value:"two",label:"\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"}),Object(Re.jsx)(zt.a,{value:"three",label:"\u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c"})]}),"one"===r&&Object(Re.jsx)(kt,{}),"two"===r&&Object(Re.jsx)(Rt,{}),"three"===r&&Object(Re.jsx)(Bt,{}),Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(Le,{value:y})]})})};var Wt=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.cars.cars})),n=Object(O.c)((function(e){return e.houses.houses})),c=Object(O.c)((function(e){return e.bizs.bizs})),r=n.filter((function(t){var n=t._id;return e.house.includes(n)})),i=r.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0),s=r.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),j=n.filter((function(t){var n=t._id;return e.rent.includes(n)})),o=j.map((function(e){return e.rentPrice})).reduce((function(e,t){return e+t}),0),l=j.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),x=t.filter((function(t){var n=t._id;return e.car.includes(n)})),h=x.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0),f=x.map((function(e){return e.expenses})).reduce((function(e,t){return e+t}),0),p=c.filter((function(t){var n=t._id;return e.bizs.includes(n)})).map((function(e){return e.maxProfit})).reduce((function(e,t){return e+t}),0),m=e.credits.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),v=e.credits.map((function(e){return e.payment})).reduce((function(e,t){return e+t}),0),g=a.a.useState(!0),y=Object(u.a)(g,2),w=(y[0],y[1]),z=a.a.useState(!1),C=Object(u.a)(z,2),k=C[0],P=C[1],_=Object(O.b)();a.a.useEffect((function(){e.debts>0&&w(!1)}),[e]);var S=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.patch("/auth/".concat(e._id),n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Re.jsxs)(H.a,{disableGutters:!0,children:[Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0414\u043e\u043b\u0433\u0438"})}),Object(Re.jsxs)(V.a,{children:[e.credits.map((function(t,n){return Object(Re.jsx)(G.a,{sx:{marginTop:"10px"},disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{alignItems:"flex-end",children:[Object(Re.jsxs)(W.a,{variant:"body1",children:["\u0414\u043e\u043b\u0433: ",t.debt," K"]}),Object(Re.jsx)(ee.a,{disabled:!t.debt>0,onClick:function(){return function(t,n,c,r){if(c>e.balance)P(!0);else{var a=e.balance-c,i=e.credits.filter((function(e){return e.id!=t})),s={id:t,amount:n-c,debt:0,payment:r};if(s.amount>0){var j=Object(B.a)(Object(B.a)({},e),{},{balance:a,credits:[].concat(Object(F.a)(i),[s]).sort((function(e,t){return e.id-t.id}))});_(se(j)),S(j)}else{var o=Object(B.a)(Object(B.a)({},e),{},{balance:a,credits:i.sort((function(e,t){return e.id-t.id}))});_(se(o)),S(o)}}}(t.id,t.amount,t.debt,t.payment)},size:"small",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"})]}),children:Object(Re.jsx)(Q.a,{primary:"\u041a\u0440\u0435\u0434\u0438\u0442 \u043e\u0442 ".concat(new Date(t.id).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"})),secondary:Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 ",t.payment," K"]})})},n)})),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{alignItems:"flex-end",children:[Object(Re.jsxs)(W.a,{variant:"body1",children:[e.debts," K"]}),Object(Re.jsx)(ee.a,{disabled:!e.debts>0,onClick:function(){return function(){if(e.balance<e.debts)P(!0);else{var t=e.balance-e.debts,n=Object(B.a)(Object(B.a)({},e),{},{balance:t,debts:0});_(se(n)),S(n)}}()},size:"small",children:"\u041f\u043e\u0433\u0430\u0441\u0438\u0442\u044c"})]}),children:Object(Re.jsx)(Q.a,{primary:"\u0417\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",secondary:"\u041f\u043e\u0433\u0430\u0448\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0435\u0436\u0435\u0433\u043e\u0434\u043d\u043e"})})]}),Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0414\u043e\u0445\u043e\u0434\u044b"})}),Object(Re.jsxs)(V.a,{children:[Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"green"},children:[Math.round(.13*e.deposit.amount/12)," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"green"},children:[o," \u041a/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0414\u043e\u0445\u043e\u0434 \u043e\u0442 \u0430\u0440\u0435\u043d\u0434\u044b"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"green"},children:[e.salary," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"green"},children:["~ ",p," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0414\u043e\u0445\u043e\u0434 \u043e\u0442 \u0431\u0438\u0437\u043d\u0435\u0441\u0430"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"subtitle1",sx:{color:"green"},children:["~ ",Math.round(.13*e.deposit.amount/12)+o+e.salary+p," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{sx:{color:"green"},variant:"subtitle1",children:"\u0418\u0442\u043e\u0433\u043e"})})})]}),Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"})}),Object(Re.jsxs)(V.a,{children:[Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"red"},children:[v," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u041f\u043b\u0430\u0442\u0435\u0436\u0438 \u043f\u043e \u043a\u0440\u0435\u0434\u0438\u0442\u0430\u043c"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"red"},children:[s+l," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"red"},children:[f," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"red"},children:[e.expenses," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u041e\u0431\u0449\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body2",sx:{color:"red"},children:[5*e.children," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u0434\u0435\u0442\u0435\u0439"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"subtitle1",sx:{color:"red"},children:[5*e.children+e.expenses+f+s+l+v," K/\u043c\u0435\u0441"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{sx:{color:"red"},variant:"subtitle1",children:"\u0418\u0442\u043e\u0433\u043e"})})})]}),Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0410\u043a\u0442\u0438\u0432\u044b"})}),Object(Re.jsxs)(V.a,{children:[Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[e.deposit.amount," K"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0412\u043a\u043b\u0430\u0434\u044b"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[i," K"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u0438"})})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[h," K"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"})})})]}),Object(Re.jsx)(D.a,{direction:"row",children:Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041f\u0430\u0441\u0441\u0438\u0432\u044b"})}),Object(Re.jsx)(V.a,{children:Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[m," K"]}),children:Object(Re.jsx)(Q.a,{primary:Object(Re.jsx)(W.a,{variant:"body2",children:"\u041a\u0440\u0435\u0434\u0438\u0442\u044b \u043d\u0430 \u0441\u0443\u043c\u043c\u0443"})})})}),Object(Re.jsx)(Z.a,{open:k,onClose:function(){return P(!1)},children:Object(Re.jsx)($.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:250,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:4},children:Object(Re.jsx)(W.a,{children:"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \ud83d\ude25"})})}),Object(Re.jsx)(Y.a,{})]})},Nt=n(566),Ht=n(534),Vt=n(529),Gt=n(545);var qt=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.user.user})),n=a.a.useState(""),c=Object(u.a)(n,2),r=c[0],i=c[1],s=a.a.useState(""),j=Object(u.a)(s,2),o=j[0],l=j[1],x=a.a.useState(0),h=Object(u.a)(x,2),f=h[0],p=h[1],m=a.a.useState(""),v=Object(u.a)(m,2),g=v[0],y=v[1],w=a.a.useState(!1),z=Object(u.a)(w,2),C=z[0],k=z[1],P=a.a.useState(!1),_=Object(u.a)(P,2),S=_[0],I=_[1],K=a.a.useState(!1),E=Object(u.a)(K,2),T=E[0],A=E[1],R=a.a.useState(!1),M=Object(u.a)(R,2),U=M[0],N=M[1],H=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(t._id),n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a.a.useEffect((function(){""!=r&&""!=o&&k(!0)}),[o,r]);var q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:250,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:4};return Object(Re.jsxs)($.a,{sx:{width:"100%"},children:[Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u043a\u0440\u0435\u0434\u0438\u0442"}),Object(Re.jsxs)(Pt.a,{container:!0,spacing:1,children:[Object(Re.jsx)(Pt.a,{item:!0,xs:6,children:Object(Re.jsxs)(Nt.a,{fullWidth:!0,sx:{marginTop:"10px"},error:!0,children:[Object(Re.jsx)(Ht.a,{id:"credit-amount-label",children:"\u0421\u0443\u043c\u043c\u0430"}),Object(Re.jsxs)(Vt.a,{labelId:"credit-amount-label",id:"credit-amount-select",value:r,label:"Amount",onChange:function(e){i(e.target.value)},children:[Object(Re.jsx)(Gt.a,{value:100,children:"100 \u041a"}),Object(Re.jsx)(Gt.a,{value:200,children:"200 \u041a"}),Object(Re.jsx)(Gt.a,{value:500,children:"500 \u041a"}),Object(Re.jsx)(Gt.a,{value:1e3,children:"1000 \u041a"}),Object(Re.jsx)(Gt.a,{value:5e3,children:"5000 \u041a"})]})]})}),Object(Re.jsx)(Pt.a,{item:!0,xs:6,children:Object(Re.jsxs)(Nt.a,{fullWidth:!0,sx:{marginTop:"10px"},children:[Object(Re.jsx)(Ht.a,{id:"credit-term-label",children:"\u0421\u0440\u043e\u043a"}),Object(Re.jsxs)(Vt.a,{labelId:"credit-term-label",id:"credit-term-select",value:o,label:"Term",onChange:function(e){l(e.target.value)},children:[Object(Re.jsx)(Gt.a,{value:12,children:"12 \u043c\u0435\u0441"}),Object(Re.jsx)(Gt.a,{value:24,children:"24 \u043c\u0435\u0441"}),Object(Re.jsx)(Gt.a,{value:60,children:"60 \u043c\u0435\u0441"}),Object(Re.jsx)(Gt.a,{value:120,children:"120 \u043c\u0435\u0441"}),Object(Re.jsx)(Gt.a,{value:240,children:"240 \u043c\u0435\u0441"})]})]})})]}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0420\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u043a\u0440\u0435\u0434\u0438\u0442 \u043f\u043e\u0434 ~18% \u0433\u043e\u0434\u043e\u0432\u044b\u0445"}),Object(Re.jsx)(D.a,{direction:"column",children:Object(Re.jsx)(ee.a,{sx:{marginTop:"15px"},disabled:!C,size:"small",variant:"contained",onClick:function(){return p(Math.round((.18*r*(o/12)+r)/o)),y(Math.round((.18*r*(o/12)+r)/o)*o),void I(!0)},children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c"})}),S&&Object(Re.jsxs)(V.a,{children:[Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[f," K"]}),children:Object(Re.jsx)(Q.a,{primary:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436"})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[g," K"]}),children:Object(Re.jsx)(Q.a,{primary:"\u041e\u0431\u0449\u0430\u044f \u0432\u044b\u043f\u043b\u0430\u0442\u0430"})}),Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[r," K"]}),children:Object(Re.jsx)(Q.a,{primary:"\u0421\u0443\u043c\u043c\u0430 \u043a\u0440\u0435\u0434\u0438\u0442\u0430"})}),Object(Re.jsx)(D.a,{direction:"column",children:Object(Re.jsx)(ee.a,{onClick:function(){return function(){if(t.credits.length>=5)N(!0);else{var n={id:+new Date,amount:g,debt:0,payment:f},c=[].concat(Object(F.a)(t.credits),[n]),a=t.balance+r,i=Object(B.a)(Object(B.a)({},t),{},{balance:a,credits:c.sort((function(e,t){return e.id-t.id}))});e(se(i)),H(i)}}()},sx:{marginTop:"10px"},disabled:!C,size:"small",variant:"contained",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c"})})]}),Object(Re.jsxs)(V.a,{children:[t.credits.length>=1&&Object(Re.jsx)(W.a,{variant:"overline",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044b\u0435"}),t.credits.map((function(n,c){return Object(Re.jsx)(G.a,{sx:{marginTop:"10px"},disablePadding:!0,secondaryAction:Object(Re.jsxs)(D.a,{alignItems:"flex-end",children:[Object(Re.jsxs)(W.a,{variant:"body1",children:["\u0421\u0443\u043c\u043c\u0430 ",n.amount," K"]}),Object(Re.jsx)(ee.a,{onClick:function(){return function(n,c){if(c>t.balance)A(!0);else{var r=t.balance-c,a=t.credits.filter((function(e){return e.id!=n})),i=Object(B.a)(Object(B.a)({},t),{},{balance:r,credits:a.sort((function(e,t){return e.id-t.id}))});e(se(i)),H(i)}}(n.id,n.amount)},size:"small",children:"\u041f\u043e\u0433\u0430\u0441\u0438\u0442\u044c"})]}),children:Object(Re.jsx)(Q.a,{primary:"\u041a\u0440\u0435\u0434\u0438\u0442 \u043e\u0442 ".concat(new Date(n.id).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"})),secondary:Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 ",n.payment," K"]})})},c)}))]}),Object(Re.jsx)(Z.a,{open:T,onClose:function(){return A(!1)},children:Object(Re.jsx)($.a,{sx:q,children:Object(Re.jsx)(W.a,{children:"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \ud83d\ude25"})})}),Object(Re.jsx)(Z.a,{open:U,onClose:function(){return N(!1)},children:Object(Re.jsx)($.a,{sx:q,children:Object(Re.jsx)(W.a,{children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432 \ud83d\ude25"})})})]})},Lt=n(535);var Jt=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.user.user})),n=a.a.useState(0),c=Object(u.a)(n,2),r=c[0],i=c[1],s=a.a.useState(0),j=Object(u.a)(s,2),o=j[0],l=j[1],x=a.a.useState(!0),h=Object(u.a)(x,2),f=h[0],p=h[1],m=a.a.useState(!0),v=Object(u.a)(m,2),g=v[0],y=v[1];a.a.useEffect((function(){r>t.balance&&p(!0),r<=t.balance&&p(!1),r<=0&&p(!0)}),[r,t]),a.a.useEffect((function(){o>t.deposit.amount&&y(!0),o<=t.deposit.amount&&y(!1),o<=0&&y(!0)}),[o,t]);var w=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(t._id),n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Re.jsx)($.a,{sx:{width:"100%"},children:Object(Re.jsxs)(D.a,{direction:"column",spacing:1,children:[Object(Re.jsx)(V.a,{children:Object(Re.jsx)(G.a,{disablePadding:!0,secondaryAction:Object(Re.jsxs)(W.a,{variant:"body1",children:[t.deposit.amount," K"]}),children:Object(Re.jsx)(Q.a,{primary:"\u0412\u043a\u043b\u0430\u0434"})})}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0412\u043b\u043e\u0436\u0438\u0442\u044c"}),Object(Re.jsx)(Lt.a,{id:"outlined-number",label:"\u0421\u0443\u043c\u043c\u0430",type:"number",onChange:function(e){i(e.target.value)},InputLabelProps:{shrink:!0}}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u043d\u0430\u044f \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c ~13% \u0432 \u0433\u043e\u0434"}),Object(Re.jsx)(ee.a,{sx:{marginTop:"15px"},disabled:f,size:"small",variant:"contained",onClick:function(){return function(){var n={amount:t.deposit.amount+Number(r),date:+new Date+12e4},c=t.balance-Number(r),a=Object(B.a)(Object(B.a)({},t),{},{balance:c,deposit:n});e(se(a)),w(a)}()},children:"\u0412\u043b\u043e\u0436\u0438\u0442\u044c"}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0421\u043d\u044f\u0442\u044c"}),Object(Re.jsx)(Lt.a,{id:"outlined-number",label:"\u0421\u0443\u043c\u043c\u0430",type:"number",onChange:function(e){l(e.target.value)},InputLabelProps:{shrink:!0}}),Object(Re.jsx)(ee.a,{sx:{marginTop:"15px"},disabled:g,size:"small",variant:"contained",onClick:function(){return function(){var n={amount:t.deposit.amount-Number(o),date:+new Date+12e4},c=t.balance+Number(o),r=Object(B.a)(Object(B.a)({},t),{},{balance:c,deposit:n});e(se(r)),w(r)}()},children:"\u0421\u043d\u044f\u0442\u044c"})]})})};var Qt=function(e){var t=e.fetchedUser,n=a.a.useState("one"),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(H.a,{children:[Object(Re.jsx)(Me,{fetchedUser:t}),Object(Re.jsxs)(wt.a,{value:r,onChange:function(e,t){i(t)},textColor:"secondary",indicatorColor:"secondary",children:[Object(Re.jsx)(zt.a,{value:"one",label:"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u044f"}),Object(Re.jsx)(zt.a,{value:"two",label:"\u041a\u0440\u0435\u0434\u0438\u0442\u044b"}),Object(Re.jsx)(zt.a,{value:"three",label:"\u0412\u043a\u043b\u0430\u0434\u044b"})]}),"one"===r&&Object(Re.jsx)(Wt,{}),"two"===r&&Object(Re.jsx)(qt,{}),"three"===r&&Object(Re.jsx)(Jt,{}),Object(Re.jsx)(Le,{value:w})]})})};var Xt=function(e){var t=e.fetchedUser,n=Object(O.b)(),c=Object(x.useRouter)(),r=a.a.useState(!0),i=Object(u.a)(r,2),s=i[0],j=i[1],o=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.get("/auth/me/".concat(t.id)).then((function(e){var t=e.data;n(se(t)),j(!1)})).catch((function(){console.log("user not found")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t&&o(),Object(Re.jsx)(gt.b,{centered:!0,children:Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(D.a,{sx:{width:"100vw",height:"100vh"},direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(Re.jsx)(ee.a,{disabled:s,onClick:function(){return c.pushPage(g)},children:"\u0418\u0433\u0440\u0430\u0442\u044c"}),Object(Re.jsx)(ee.a,{disabled:s,onClick:function(){return c.pushPage(f)},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"}),Object(Re.jsx)(ee.a,{onClick:function(){return c.pushPage(p)},children:"\u041e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"}),Object(Re.jsx)(ee.a,{onClick:function(){return c.pushPage(m)},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})})})},Yt=n(569);var Zt=function(e){var t=e.fetchedUser,n=Object(x.useRouter)(),c=Object(O.b)(),r=Object(O.c)((function(e){return e.user.profs})),i=Object(O.c)((function(e){return e.user.user})),s=a.a.useState(!1),j=Object(u.a)(s,2),o=j[0],l=j[1],h=a.a.useState(),f=Object(u.a)(h,2),p=f[0],m=f[1],v=a.a.useState(0),y=Object(u.a)(v,2),w=y[0],z=y[1],C=a.a.useState(!0),k=Object(u.a)(C,2),P=k[0],_=k[1];a.a.useEffect((function(){var e=setInterval((function(){P&&z((function(e){return e>=10?10:e+1})),10==w&&P&&S()}),200);return function(){clearInterval(e)}}),[w,P,i]);var S=function(){var e,t,n=(e=0,t=r.length-1,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);m(r[n])},I=function(){var e=Object(b.a)(d.a.mark((function e(){var n,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!1),0!=Object.keys(i).length){e.next=10;break}return n={amount:0,date:+new Date},r={firstName:t.first_name,prof:p.profName,workTime:8,salary:p.salary,userId:t.id,balance:100,debts:0,age:p.age,children:p.childCount,house:p.house,car:p.car,rent:[],bizs:[],deposit:n,credits:[],records:[],expenses:p.expenses,onGame:!0,time:10,energy:100,maxEnergy:100,energizer:0,freeEnergizerOn:!0},console.log(r),e.next=7,ne.post("/auth/register",r).then((function(e){c(se(e.data.user))}));case 7:l(!0),e.next=16;break;case 10:return a={amount:0,date:+new Date},s={_id:i._id,firstName:i.firstName,prof:p.profName,workTime:8,salary:p.salary,userId:i.userId,balance:100,debts:0,age:p.age,children:p.childCount,house:p.house,car:p.car,rent:[],bizs:[],deposit:a,credits:[],records:i.records,expenses:p.expenses,datePoint:i.datePoint,freeEnergizer:i.freeEnergizer,onGame:!0,time:10,energy:100,maxEnergy:100,energizer:0,freeEnergizerOn:!0,lifesCount:i.lifesCount+1},c(se(s)),e.next=15,ne.patch("/auth/".concat(i._id),s);case 15:l(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(D.a,{sx:{width:"100vw",height:"100vh"},direction:"column",alignItems:"center",justifyContent:"center",spacing:1,children:[p?Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f:"}),Object(Re.jsx)(W.a,{variant:"h6",children:p.profName}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0438\u0433\u0440\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044e"}),Object(Re.jsx)(ee.a,{disabled:!P,onClick:function(){return I()},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]}):Object(Re.jsx)(Yt.a,{}),o&&Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044e ",Object(Re.jsx)("b",{children:i.prof})]}),Object(Re.jsxs)(W.a,{variant:"caption",children:["\u0412\u0430\u0448\u0430 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430 ",Object(Re.jsx)("b",{children:i.salary})," \u041a, \u0412\u0430\u043c ",Object(Re.jsx)("b",{children:i.age/12}),", \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0442\u0435\u0439: ",Object(Re.jsx)("b",{children:i.children}),"."]}),Object(Re.jsx)(W.a,{variant:"caption",children:Object(Re.jsx)("b",{children:"\u0423\u0434\u0430\u0447\u043d\u043e\u0439 \u0438\u0433\u0440\u044b!"})}),Object(Re.jsx)(ee.a,{onClick:function(){return n.pushPage(g)},children:"\u041d\u0430\u0447\u0430\u0442\u044c"})]})]})})};var $t=function(){var e=Object(x.useRouter)();return Object(Re.jsx)(Paper,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(D.a,{sx:{width:"100vw",height:"100vh"},direction:"column",alignItems:"center",justifyContent:"center",spacing:1,children:[Object(Re.jsx)(W.a,{children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f"}),Object(Re.jsx)(ee.a,{onClick:function(){return e.pushPage(g)},children:"\u0418\u0433\u0440\u0430\u0442\u044c"}),Object(Re.jsx)(Y.a,{})]})})};var en=function(){return Object(Re.jsxs)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:[Object(Re.jsx)(W.a,{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(Re.jsx)(Y.a,{})]})},tn=n(232),nn=n.n(tn);var cn=function(){var e=Object(O.b)(),t=Object(x.useRouter)(),n=Object(O.c)((function(e){return e.user.user})),c=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.patch("/auth/".concat(n._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(D.a,{sx:{width:"100vw",height:"100vh"},direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(Re.jsx)(nn.a,{sx:{fontSize:40}}),Object(Re.jsx)(W.a,{variant:"h6",children:"\u041f\u0410\u0423\u0417\u0410"}),Object(Re.jsx)(W.a,{variant:"caption",children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0434\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u044d\u043d\u0435\u0440\u0433\u0438\u0438"}),Object(Re.jsx)(ee.a,{onClick:function(){return function(){var r=Object(B.a)(Object(B.a)({},n),{},{onGame:!0,energy:n.maxEnergy});e(se(r)),c(r),t.pushPage(g)}()},children:"\u0418\u0433\u0440\u0430\u0442\u044c"})]})})};var rn=function(){var e=Object(O.c)((function(e){return e.user.user})),t=Object(O.c)((function(e){return e.cars.cars})),n=Object(O.c)((function(e){return e.houses.houses})),c=n.filter((function(t){var n=t._id;return e.house.includes(n)})),r=n.filter((function(t){var n=t._id;return e.rent.includes(n)})),a=t.filter((function(t){var n=t._id;return e.car.includes(n)}));return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(W.a,{variant:"overline",children:"\u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(Re.jsx)(Pt.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",sx:{marginBottom:"10px"},children:c.map((function(e,t){return Object(Re.jsx)(Mt,{house:e,isMy:e._id},t)}))}),r.length>0&&Object(Re.jsx)(W.a,{variant:"overline",children:"\u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0430\u0440\u0435\u043d\u0434\u0435"}),Object(Re.jsx)(Pt.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",sx:{marginBottom:"10px"},children:r.map((function(e,t){return Object(Re.jsx)(Mt,{house:e,isMy:e._id,isRent:!0},e._id)}))}),a.length>0&&Object(Re.jsx)(W.a,{variant:"overline",children:"\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"}),Object(Re.jsx)(Pt.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",sx:{marginBottom:"10px"},children:a.map((function(e,t){return Object(Re.jsx)(Et,{car:e,isMy:e._id},e._id)}))}),Object(Re.jsx)(Y.a,{})]})},an=n(170),sn=n.n(an);var jn=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.user.friends})),n=Object(O.c)((function(e){return e.user.users})).map((function(e){return e.userId})).map((function(e){return parseInt(e)})),c=t.filter((function(e){var t=e.id;return n.includes(t)}));function r(){return(r=Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.send("VKWebAppGetAuthToken",{app_id:51483243,scope:"friends"});case 2:return n=t.sent,t.next=5,o.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"photo_100",v:"5.131",access_token:n.access_token}});case 5:c=t.sent,e(oe(c.response.items));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(Re.jsxs)(H.a,{children:[0==t.length?Object(Re.jsxs)(D.a,{direction:"column",alignItems:"center",spacing:1,children:[Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(sn.a,{sx:{fontSize:40}}),Object(Re.jsx)(ee.a,{onClick:function(){return function(){return r.apply(this,arguments)}()},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"})]}):Object(Re.jsx)(Re.Fragment,{children:0==c.length?Object(Re.jsxs)(D.a,{direction:"column",alignItems:"center",justifyContent:"center",spacing:1,children:[Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(sn.a,{sx:{fontSize:40}}),Object(Re.jsx)(W.a,{variant:"subtitle1",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0451 \u043d\u0435\u0442 \u0434\u0440\u0443\u0437\u0435\u0439 \u0432 \u0438\u0433\u0440\u0435"}),Object(Re.jsx)(W.a,{sx:{padding:"20px"},variant:"caption",children:"\u041d\u0430 \u044d\u0442\u043e\u0439 \u0432\u043a\u043b\u0430\u0434\u043a\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0412\u0430\u0448\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0433\u0440\u0430\u044e\u0442 \u0432 \u044d\u0442\u0443 \u0438\u0433\u0440\u0443. \u0412\u044b \u0438\u0445 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c, \u0437\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u0442\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442, \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 5 \u044d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u043e\u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e."})]}):Object(Re.jsx)($.a,{sx:{display:"flex"},children:Object(Re.jsx)(W.a,{children:"\u0414\u0440\u0443\u0437\u044c\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b"})})}),Object(Re.jsx)(Y.a,{})]})};var on=function(){return Object(Re.jsxs)($.a,{sx:{width:"100%"},children:[Object(Re.jsx)(W.a,{children:"Raiting"}),Object(Re.jsx)(Y.a,{})]})};var bn,un,ln,dn=function(e){var t=e.fetchedUser,n=a.a.useState("one"),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(Re.jsx)(N.a,{sx:{width:"100vw",height:"100%",minHeight:"100vh",borderRadius:0},children:Object(Re.jsxs)(H.a,{children:[Object(Re.jsx)(Me,{fetchedUser:t}),Object(Re.jsxs)(wt.a,{value:r,onChange:function(e,t){i(t)},textColor:"secondary",indicatorColor:"secondary",children:[Object(Re.jsx)(zt.a,{value:"one",label:"\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c"}),Object(Re.jsx)(zt.a,{value:"two",label:"\u0414\u0440\u0443\u0437\u044c\u044f"}),Object(Re.jsx)(zt.a,{value:"three",label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"})]}),"one"===r&&Object(Re.jsx)(rn,{}),"two"===r&&Object(Re.jsx)(jn,{}),"three"===r&&Object(Re.jsx)(on,{}),Object(Re.jsx)(Y.a,{}),Object(Re.jsx)(Le,{value:z})]})})},On=Object(te.b)("houses/getHouses",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.rejectWithValue,c=n.dispatch,e.next=3,ne.get("/houses");case 3:r=e.sent,c(hn(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),xn=Object(te.c)({name:"houses",initialState:{houses:[]},reducers:{setHouses:function(e,t){e.houses=t.payload}},extraReducers:(bn={},Object(h.a)(bn,On.fulfilled,(function(){return console.log("houses \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b")})),Object(h.a)(bn,On.pending,(function(){return console.log("\u0437\u0430\u043f\u0440\u043e\u0441 houses")})),Object(h.a)(bn,On.rejected,(function(){return console.log("\u043e\u0448\u0438\u0431\u043a\u0430 houses")})),bn)}),hn=xn.actions.setHouses,fn=xn.reducer,pn=Object(te.b)("cars/getCars",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.rejectWithValue,c=n.dispatch,e.next=3,ne.get("/cars");case 3:r=e.sent,c(vn(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),mn=Object(te.c)({name:"cars",initialState:{cars:[]},reducers:{setCars:function(e,t){e.cars=t.payload}},extraReducers:(un={},Object(h.a)(un,pn.fulfilled,(function(){return console.log("cars \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b")})),Object(h.a)(un,pn.pending,(function(){return console.log("\u0437\u0430\u043f\u0440\u043e\u0441 cars")})),Object(h.a)(un,pn.rejected,(function(){return console.log("\u043e\u0448\u0438\u0431\u043a\u0430 cars")})),un)}),vn=mn.actions.setCars,gn=mn.reducer,yn=Object(te.b)("bizs/getBizs",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.rejectWithValue,c=n.dispatch,e.next=3,ne.get("/bizs");case 3:r=e.sent,c(zn(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),wn=Object(te.c)({name:"bizs",initialState:{bizs:[]},reducers:{setBizs:function(e,t){e.bizs=t.payload}},extraReducers:(ln={},Object(h.a)(ln,yn.fulfilled,(function(){return console.log("bizs \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b")})),Object(h.a)(ln,yn.pending,(function(){return console.log("\u0437\u0430\u043f\u0440\u043e\u0441 bizs")})),Object(h.a)(ln,yn.rejected,(function(){return console.log("\u043e\u0448\u0438\u0431\u043a\u0430 bizs")})),ln)}),zn=wn.actions.setBizs,Cn=wn.reducer,kn=(n(464),n(233)),Pn=n(546),_n=Object(x.withRouter)((function(){var e=Object(r.useState)("bright_light"),t=Object(u.a)(e,2),n=(t[0],t[1]),c=Object(r.useState)(null),a=Object(u.a)(c,2),i=a[0],s=a[1],j=Object(O.b)(),l=Object(x.useLocation)();Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}j(On()),j(pn()),j(yn()),j(ce()),j(re()),o.a.subscribe((function(e){var t=e.detail,c=t.type,r=t.data;"VKWebAppUpdateConfig"===c&&(n(r.scheme),console.log(r.scheme))})),function(){e.apply(this,arguments)}()}),[]);var h=Object(kn.a)({palette:{mode:"dark"}});return Object(Re.jsx)(gt.a,{children:Object(Re.jsx)(Pn.a,{theme:h,children:Object(Re.jsxs)(gt.c,{id:A,history:l.hasOverlay()?[]:l.getViewHistory(A),activePanel:l.getViewActivePanel(A),children:[Object(Re.jsx)(Xt,{id:C,fetchedUser:i}),Object(Re.jsx)(Zt,{id:k,fetchedUser:i}),Object(Re.jsx)($t,{id:P}),Object(Re.jsx)(en,{id:_}),Object(Re.jsx)(cn,{id:S}),Object(Re.jsx)(yt,{id:I,fetchedUser:i}),Object(Re.jsx)(Dt,{id:K,fetchedUser:i}),Object(Re.jsx)(Qt,{id:E,fetchedUser:i}),Object(Re.jsx)(dn,{id:T,fetchedUser:i})]})})})})),Sn=Object(te.a)({reducer:{user:ue,houses:fn,cars:gn,bizs:Cn}});o.a.send("VKWebAppInit"),s.a.render(Object(Re.jsx)(x.RouterContext.Provider,{value:M,children:Object(Re.jsx)(O.a,{store:Sn,children:Object(Re.jsx)(_n,{})})}),document.getElementById("root"))}},[[465,1,2]]]);
//# sourceMappingURL=main.9cffaf14.chunk.js.map