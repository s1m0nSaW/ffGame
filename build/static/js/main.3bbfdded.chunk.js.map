{"version":3,"sources":["axios.js","routers.js","redux/slices/userSlice.js","components/Header.jsx","components/BottomNav.jsx","components/Biz.jsx","components/Work.jsx","components/Rent.jsx","components/Head.jsx","panels/Main.jsx","components/BizLot.jsx","panels/shop/BizList.jsx","components/CarLot.jsx","panels/shop/CarList.jsx","components/HouseLot.jsx","panels/shop/HouseList.jsx","panels/Property.jsx","panels/bank/Report.jsx","panels/bank/Credit.jsx","panels/bank/Deposit.jsx","panels/Bank.jsx","panels/Intro.jsx","panels/Register.jsx","img/bank.png","img/choose.png","img/deals.png","panels/Training.jsx","img/header.png","img/main.png","img/profile.png","panels/Settings.jsx","panels/Pause.jsx","panels/profile/Home.jsx","components/Friend.jsx","panels/profile/Friends.jsx","panels/profile/Raiting.jsx","panels/profile/Global.jsx","panels/Profile.jsx","redux/slices/housesSlice.js","redux/slices/carsSlice.js","redux/slices/bizsSlice.js","App.js","redux/store.js","index.js"],"names":["instance","axios","create","baseURL","PAGE_REGISTER","PAGE_TRAINING","PAGE_SETTINGS","PAGE_PAUSE","PAGE_MAIN","PAGE_PROPERTY","PAGE_BANK","PAGE_PROFILE","PANEL_INTRO","PANEL_REGISTER","PANEL_TRAINING","PANEL_SETTINGS","PANEL_PAUSE","PANEL_MAIN","PANEL_PROPERTY","PANEL_BANK","PANEL_PROFILE","VIEW_MAIN","routes","Page","router","Router","on","nextRote","oldRoute","getPageId","getParams","getPanelId","getViewId","getLocation","isModal","isPopup","hasOverlay","start","getUsers","createAsyncThunk","_","a","rejectWithValue","dispatch","get","res","setUsers","data","getProfs","setProfs","userSlice","createSlice","name","initialState","user","users","friends","profs","debts","greetings","theme","expenditure","reducers","setUser","state","action","payload","setFriends","setDebts","setGreetings","setTheme","setExpenditure","actions","Header","fetchedUser","info","useRouter","useDispatch","React","useState","openEnergizer","setOpenEnergizer","openTime","setOpenTime","openAge","setOpenAge","openInfo","setOpenInfo","openMaxEnergy","setOpenMaxEnergy","energyColor","setEnergyColor","timeLeft","setTimeLeft","enerTime","setEnerTime","maxEnerTimeLeft","setMaxEnerTimeLeft","maxEnerTime","setMaxEnerTime","activity","setActivity","freeTime","setFreeTime","disabled","setDisabled","useSelector","bizTime","bizs","filter","_id","includes","map","item","requiredTime","reduce","prev","curr","useEffect","energizer","energy","maxEnergy","prof","time","workTime","interval","setInterval","freeEnergizer","date","Date","fields","freeEnergizerOn","carsharing","status","clearInterval","Fragment","IconButton","size","color","onClick","fontSize","action2","Button","bridge","send","ad_format","then","result","console","log","catch","error","parseMillisecondsIntoReadableTime","milliseconds","hours","absoluteHours","Math","floor","h","minutes","absoluteMinutes","m","seconds","absoluteSeconds","AppBar","component","sx","padding","borderRadius","marginTop","marginBottom","position","Toolbar","disableGutters","Stack","direction","width","spacing","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","Avatar","pushPage","src","photo_200","Typography","variant","first_name","last_name","balance","justifyContent","alignItems","Chip","label","deleteIcon","onDelete","newEnergizer","newEnergy","icon","trunc","age","freeEnergizerCount","handleFreeEnergy","marginLeft","Skeleton","height","animation","Container","ListItemText","primary","secondary","Snackbar","open","onClose","message","arr","BottomNav","value","setOpen","save","patch","Paper","bottom","left","right","elevation","Backdrop","zIndex","drawer","CircularProgress","BottomNavigation","onChange","event","newValue","push","length","setTimeout","BottomNavigationAction","invisible","Biz","biz","setColor","Restaurant","Market","Service","Production","green","profitColor","setProfitColor","maxProfit","minProfit","profit","setProfit","isCounting","setIsCounting","myBizs","bizIcon","setBizIcon","bizType","min","max","p","ceil","random","pink","onGame","datePoint","pause","ListItem","disablePadding","secondaryAction","price","requiredEnergy","newBalance","newRecord","record","carSum","handleStart","ListItemAvatar","bizName","LinearProgress","Divider","Dialog","fullWidth","DialogTitle","DialogContent","DialogContentText","sellPrice","DialogActions","id","myNewBizs","sellBiz","Work","cars","myHouses","houses","house","myCars","car","sumHouseExp","expenses","sumCarExp","ageTime","setAgeTime","ageInterval","salary","agePlus","quit","Rent","sumRent","rent","rentPrice","Head","edge","mr","popPage","flexGrow","Main","myRents","sumHouses","sumCars","sumRentExp","sumRents","sumCreditsDebt","credits","debt","sumCreditsPayments","payment","totalExp","children","remind","setRemind","bankrot","setBankrot","ageLimit","setAgeLimit","recordModal","setRecordModal","Number","isInteger","lifesCount","saveRecord","cashflow","round","deposit","amount","bizCount","rentCount","houseSumm","ageLimitListener","newAge","newDebts","content","i","credit","sort","x","y","getNewCreditData","accruePayments","style","top","transform","bgcolor","boxShadow","BizPlaceHolder","InvestPlaceHolder","RentPlaceHolder","Info","minHeight","List","dense","index","newDeposit","takeDividends","Modal","Box","attachments","post_id","BizLot","bizPrice","buyBiz","BizList","c","Set","avBizs","has","CarLot","isMy","carsTime","Grid","Card","CardMedia","image","imageUrl","CardContent","gutterBottom","CardActions","myCars1","myEnergy","myTime","sellCar","buyCar","CarList","field","avCars","container","b","HouseLot","isRent","rentHouses","myHouse","sellHouse","rentHouse","derentHouse","buyHouse","HouseList","avHouses","c2","avHouses2","Property","setValue","Tabs","textColor","indicatorColor","Tab","Report","sumBizProfit","sumCredits","summ","myCredits","newCredit","payCreditDebt","toLocaleDateString","year","month","day","payOff","Credit","setAmount","term","setTerm","setPayment","creditAmount","setCreditAmount","canCal","setCanCal","calculated","setCalculated","creditLimit","setCreditLimit","xs","FormControl","InputLabel","Select","labelId","target","MenuItem","terms","takeCredit","Deposit","withdrawAmount","setWithdrawAmount","disabledWithdraw","setDisabledWithdraw","TextField","type","InputLabelProps","shrink","invest","withdraw","Bank","steps","description","Intro","firstTime","setFirstTime","playerChecked","setPlayerChecked","firstParams","setFirstParams","getPlayer","url","URLSearchParams","vk_app_id","useTheme","activeStep","setActiveStep","maxSteps","centered","MobileStepper","nextButton","prevActiveStep","backButton","Register","profession","setProfession","sendToServer","firstName","photo100","photo_100","userId","profId","post","newGameServer","getProf","Object","keys","profName","childCount","images","imgPath","choose","deals","bank","Training","axis","onChangeIndex","step","enableMouseEvents","abs","marginRight","display","overflow","alt","Settings","checkPost","setCheckPost","checkGroup","setCheckGroup","checkMessages","setCheckMessages","checkNotifications","setCheckNotifications","group_id","promoter","ToggleButtonGroup","exclusive","newTheme","ToggleButton","Checkbox","checked","joinGroup","messagesFromGroup","notifications","recommend","Pause","pauseTime","setPauseTime","play","t","Home","Friend","friend","saveForFriend","greetingIn","friendFields","greetingOut","sendHi","Collapse","in","timeout","unmountOnExit","Friends","ids","u","string","String","myFriends","hiInFriends","hiOutFriends","disableds","noHiFriends","app_id","scope","response","method","params","order","v","access_token","items","fetchFriends","Record","Global","sorted","reverse","Profile","scrollButtons","getHouses","setHouses","houseSlice","getCars","setCars","carSlice","getBizs","setBizs","bizSlice","withRouter","scheme","setScheme","location","useLocation","subscribe","detail","fetchData","themeMode","createTheme","palette","mode","typography","fontFamily","join","background","default","paper","ThemeProvider","history","getViewHistory","activePanel","getViewActivePanel","store","configureStore","reducer","carsSlice","bizsSlice","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.3bbfdded.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst URL1 = 'https://financial-freedom-game.ru'\r\n\r\nconst instance = axios.create({\r\n    baseURL: URL1,\r\n});\r\n\r\nexport default instance;","import { Page, Router } from '@happysanta/router';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from './axios.js';\r\nimport bridge from '@vkontakte/vk-bridge'\r\n\r\nexport const PAGE_INTRO = '/';\r\nexport const PAGE_REGISTER = '/register';\r\nexport const PAGE_TRAINING = '/training';\r\nexport const PAGE_SETTINGS = '/settings';\r\nexport const PAGE_PAUSE = '/pause';\r\nexport const PAGE_MAIN = '/main';\r\nexport const PAGE_PROPERTY = '/property';\r\nexport const PAGE_BANK = '/bank';\r\nexport const PAGE_PROFILE = '/profile';\r\n\r\nexport const PANEL_INTRO = 'panel_intro';\r\nexport const PANEL_REGISTER = 'panel_register';\r\nexport const PANEL_TRAINING = 'panel_training';\r\nexport const PANEL_SETTINGS = 'panel_settings';\r\nexport const PANEL_PAUSE = 'panel_pause';\r\nexport const PANEL_MAIN = 'panel_main';\r\nexport const PANEL_PROPERTY = 'panel_property';\r\nexport const PANEL_BANK = 'panel_bank';\r\nexport const PANEL_PROFILE = 'panel_profile';\r\n\r\nexport const VIEW_MAIN = 'view_main';\r\n\r\nconst routes = {\r\n\t[PAGE_INTRO]: new Page(PANEL_INTRO, VIEW_MAIN),\r\n\t[PAGE_REGISTER]: new Page(PANEL_REGISTER, VIEW_MAIN),\r\n\t[PAGE_TRAINING]: new Page(PANEL_TRAINING, VIEW_MAIN),\r\n\t[PAGE_SETTINGS]: new Page(PANEL_SETTINGS, VIEW_MAIN),\r\n    [PAGE_PAUSE]: new Page(PANEL_PAUSE, VIEW_MAIN),\r\n    [PAGE_MAIN]: new Page(PANEL_MAIN, VIEW_MAIN),\r\n    [PAGE_PROPERTY]: new Page(PANEL_PROPERTY, VIEW_MAIN),\r\n    [PAGE_BANK]: new Page(PANEL_BANK, VIEW_MAIN),\r\n    [PAGE_PROFILE]: new Page(PANEL_PROFILE, VIEW_MAIN),\r\n};\r\n\r\nexport const router = new Router(routes);\r\n\r\nlet arr = [];\r\n\r\nrouter.on('update', (nextRote, oldRoute) => {\r\n\tnextRote.getPageId() // /product/:id([0-9]+)\r\n\tnextRote.getParams() // { id: \"12\" }\r\n\tnextRote.getPanelId() // panel_product\r\n\tnextRote.getViewId() // view_main\r\n\tnextRote.getLocation() // /product/12\r\n\tnextRote.isModal() // false\r\n\tnextRote.isPopup() // false\r\n\tnextRote.hasOverlay() // false\r\n\r\n    \r\n\r\n    /*if (oldRoute) {\r\n        arr.push(nextRote.getLocation())\r\n        if (arr.length == 4) {\r\n            bridge.send('VKWebAppCheckNativeAds', { ad_format: 'interstitial' });\r\n        }\r\n        if (arr.length == 5) {\r\n            bridge.send('VKWebAppShowNativeAds', { ad_format: 'interstitial' })\r\n                .then((data) => {\r\n                    if (data.result)\r\n                        {console.log('Реклама показана');\r\n                        arr.length=0}\r\n                    else\r\n                        console.log('Ошибка при показе');\r\n                })\r\n                .catch((error) => { console.log(error); });\r\n        }\r\n\r\n    } */\r\n});\r\n\r\nrouter.start();","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../axios.js\";\r\n\r\nconst initialState = {\r\n    user: {},\r\n    users: [],\r\n    friends: [],\r\n    profs: [],\r\n    debts: false,\r\n    greetings: false,\r\n    theme: 'auto',\r\n    expenditure: 3,\r\n};\r\n\r\nexport const getUsers = createAsyncThunk('users/getUsers', async ( _, { rejectWithValue, dispatch }) => {\r\n    const res = await axios.get('/auth/users')\r\n    dispatch(setUsers((res).data))\r\n})\r\n\r\nexport const getProfs = createAsyncThunk('users/getProfs', async ( _, { rejectWithValue, dispatch }) => {\r\n    const res = await axios.get('/profs')\r\n    dispatch(setProfs((res).data))\r\n})\r\n\r\n\r\nexport const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducers: {\r\n        setUser: ( state, action ) => {\r\n            state.user = action.payload\r\n        },\r\n        setUsers: ( state, action ) => {\r\n            state.users = action.payload\r\n        },\r\n        setFriends: ( state, action ) => {\r\n            state.friends = action.payload\r\n        },\r\n        setProfs: ( state, action ) => {\r\n            state.profs = action.payload\r\n        },\r\n        setDebts: ( state, action ) => {\r\n            state.debts = action.payload\r\n        },\r\n        setGreetings: ( state, action ) => {\r\n            state.greetings = action.payload\r\n        },\r\n        setTheme: ( state, action ) => {\r\n            state.theme = action.payload\r\n        },\r\n        setExpenditure: ( state, action ) => {\r\n            state.expenditure = action.payload\r\n        },\r\n    },\r\n});\r\n\r\nexport const { setUser, setUsers, setFriends, setDebts, setGreetings, setProfs, setTheme, setExpenditure } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;","\r\nimport { AppBar, Avatar, Container, ListItemText, Skeleton, Toolbar, Typography, Stack, Chip, Snackbar, Button, IconButton, Badge } from '@mui/material'\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport bridge from \"@vkontakte/vk-bridge\"\r\n\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js';\r\nimport { PAGE_INTRO } from '../routers';\r\nimport { useRouter } from '@happysanta/router';\r\n\r\nimport BoltIcon from '@mui/icons-material/Bolt';\r\nimport QueryBuilderOutlinedIcon from '@mui/icons-material/QueryBuilderOutlined';\r\nimport BatteryChargingFullOutlinedIcon from '@mui/icons-material/BatteryChargingFullOutlined';\r\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\r\nimport HourglassEmptyIcon from '@mui/icons-material/HourglassEmpty';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport AccessibilityNewIcon from '@mui/icons-material/AccessibilityNew';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nexport const Header = ({fetchedUser, info}) => {\r\n  const router = useRouter()\r\n  const dispatch = useDispatch()\r\n  const [openEnergizer, setOpenEnergizer] = React.useState(false);\r\n  const [openTime, setOpenTime] = React.useState(false);\r\n  const [openAge, setOpenAge] = React.useState(false);\r\n  const [openInfo, setOpenInfo] = React.useState(false);\r\n  const [openMaxEnergy, setOpenMaxEnergy] = React.useState(false);\r\n  const [energyColor, setEnergyColor] = React.useState(\"default\")\r\n  const [timeLeft, setTimeLeft] = React.useState(0)\r\n  const [enerTime, setEnerTime] = React.useState(0)\r\n  const [maxEnerTimeLeft, setMaxEnerTimeLeft] = React.useState(0)\r\n  const [maxEnerTime, setMaxEnerTime] = React.useState(0)\r\n  const [activity, setActivity] = React.useState(<b>E</b>)\r\n  const [freeTime, setFreeTime] = React.useState(0)\r\n  const [disabled, setDisabled] = React.useState(true)\r\n  const user = useSelector((state) => state.user.user)\r\n  const bizs = useSelector((state) => state.bizs.bizs)\r\n  const myBizs = bizs.filter(({_id}) => user.bizs.includes(_id))\r\n  const bizTime = myBizs.map(item => item.requiredTime).reduce((prev, curr) => prev + curr, 0)\r\n\r\n  React.useEffect( () => {\r\n    if(user.energizer > 0){\r\n      if(user.energy < user.maxEnergy){\r\n        setEnergyColor(\"primary\")\r\n      } else setEnergyColor(\"default\")\r\n    } else setEnergyColor(\"default\")\r\n\r\n    if(user.prof == 'Малый бизнес'||user.prof == 'Средний бизнес'){\r\n      setActivity(<b>S</b>)\r\n      setFreeTime(user.time - (bizTime + user.workTime))\r\n    }\r\n    if(user.prof == 'Крупный бизнес'){\r\n      setActivity(<b>B</b>)\r\n      setFreeTime(user.time)\r\n    }\r\n    if(user.prof == 'Инвестор'){\r\n      setActivity(<b>I</b>)\r\n      setFreeTime(user.time)\r\n    }\r\n\r\n    const interval = setInterval(() => {\r\n      !user.freeEnergizer && setTimeLeft((timeLeft) => (timeLeft >= 100 ? 100 : timeLeft +1 ))\r\n      const date = +new Date\r\n      if(date > user.freeEnergizer){\r\n        const fields = {\r\n          ...user,\r\n          freeEnergizerOn: true,\r\n        }\r\n        dispatch(setUser(fields))\r\n      }\r\n      setEnerTime(user.freeEnergizer - date)\r\n      \r\n      if (timeLeft == 100) {\r\n        setTimeLeft(0)\r\n      }\r\n\r\n      if (user.carsharing.status == true) {\r\n        setMaxEnerTimeLeft((maxEnerTimeLeft) => (maxEnerTimeLeft >= 100 ? 100 : maxEnerTimeLeft + 1))\r\n\r\n        if (date > user.carsharing.date) {\r\n          const carsharing = {\r\n            status: false,\r\n            date: 0,\r\n          }\r\n          const fields = {\r\n            ...user,\r\n            carsharing: carsharing,\r\n            maxEnergy: user.maxEnergy - 50,\r\n          }\r\n          dispatch(setUser(fields))\r\n        }\r\n\r\n        setMaxEnerTime(user.carsharing.date - date)\r\n\r\n        if (maxEnerTimeLeft == 100) {\r\n          setMaxEnerTimeLeft(0)\r\n        }\r\n      }\r\n\r\n    },100)\r\n    return () => {\r\n        clearInterval(interval)\r\n    }\r\n  },[user, setTimeLeft, setMaxEnerTimeLeft])\r\n  \r\n  const handlePlusEnergy = () => {\r\n    if(user.energizer > 0){\r\n      if(user.energy < user.maxEnergy){\r\n        const newEnergizer = user.energizer - 1\r\n        const newEnergy = user.maxEnergy\r\n        const fields = {\r\n          ...user,\r\n          energizer: newEnergizer,\r\n          energy: newEnergy,\r\n        }\r\n        dispatch(setUser(fields))\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleFreeEnergy = () => {\r\n    const date = +new Date\r\n    const newEnergizer = user.energizer + user.freeEnergizerCount\r\n\t\tconst fields = {\r\n\t\t\t...user,\r\n\t\t\tenergizer: newEnergizer,\r\n      freeEnergizer: date + 86400000,\r\n      freeEnergizerOn: false,\r\n      disabled:[], \r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n  }\r\n\r\n  const handleMaxEnergy = () => {\r\n    setOpenMaxEnergy(true)\r\n    bridge.send('VKWebAppCheckNativeAds', { ad_format: 'reward' })\r\n      .then((data) => {\r\n        if (data.result) {\r\n          setDisabled(false)\r\n        } else {\r\n          console.log('Рекламные материалы не найдены.');\r\n        }\r\n      })\r\n      .catch((error) => { console.log(error); /* Ошибка */ });\r\n  }\r\n\r\n  const showAd = () => {\r\n    bridge.send('VKWebAppShowNativeAds', { ad_format: 'reward' })\r\n      .then((data) => {\r\n        if (data.result) // Успех\r\n        {\r\n          setOpenMaxEnergy(false)\r\n          const date = +new Date\r\n          const carsharing = {\r\n            status: true,\r\n            date: date + 3600000,\r\n          }\r\n          const fields = {\r\n            ...user,\r\n            carsharing: carsharing,\r\n            maxEnergy: user.maxEnergy + 50\r\n          }\r\n          dispatch(setUser(fields))\r\n        }\r\n        else // Ошибка \r\n          console.log('Ошибка при показе');\r\n      })\r\n      .catch((error) => { console.log(error); })\r\n  }\r\n\r\n  //проверка даты каршеринга макс энергии\r\n  const action = (\r\n    <React.Fragment>\r\n      <IconButton\r\n        size=\"small\"\r\n        aria-label=\"close\"\r\n        color=\"inherit\"\r\n        onClick={()=>{\r\n          setOpenAge(false)\r\n          setOpenEnergizer(false)\r\n          setOpenTime(false)\r\n          setOpenInfo(false)\r\n        }}\r\n      >\r\n        <CloseIcon fontSize=\"small\" />\r\n      </IconButton>\r\n    </React.Fragment>\r\n  );\r\n\r\n  const action2 = (\r\n    <React.Fragment>\r\n      <Button disabled={disabled} color=\"secondary\" size=\"small\" onClick={()=>showAd()}>\r\n        СМОТРЕТЬ\r\n      </Button>\r\n      <IconButton\r\n        size=\"small\"\r\n        aria-label=\"close\"\r\n        color=\"inherit\"\r\n        onClick={()=>setOpenMaxEnergy(false)}\r\n      >\r\n        <CloseIcon fontSize=\"small\" />\r\n      </IconButton>\r\n    </React.Fragment>\r\n  );\r\n\r\n  function parseMillisecondsIntoReadableTime(milliseconds){\r\n    //Get hours from milliseconds\r\n    var hours = milliseconds / (1000*60*60);\r\n    var absoluteHours = Math.floor(hours);\r\n    var h = absoluteHours > 9 ? absoluteHours : '0' + absoluteHours;\r\n  \r\n    //Get remainder from hours and convert to minutes\r\n    var minutes = (hours - absoluteHours) * 60;\r\n    var absoluteMinutes = Math.floor(minutes);\r\n    var m = absoluteMinutes > 9 ? absoluteMinutes : '0' +  absoluteMinutes;\r\n  \r\n    //Get remainder from minutes and convert to seconds\r\n    var seconds = (minutes - absoluteMinutes) * 60;\r\n    var absoluteSeconds = Math.floor(seconds);\r\n    var s = absoluteSeconds > 9 ? absoluteSeconds : '0' + absoluteSeconds;\r\n  \r\n  \r\n    return h + ':' + m + ':' + s;\r\n  }\r\n\r\n  return (\r\n      <AppBar component=\"nav\" color=\"inherit\" sx={{padding:'10px', borderRadius:'10px', marginTop:'10px', marginBottom: '10px'}} position='sticky'>\r\n        {fetchedUser ?\r\n        <Toolbar disableGutters>\r\n          <Stack direction=\"column\" sx={{ width: '100%' }} >\r\n          <Stack direction=\"row\" spacing={1}>\r\n          <Stack>\r\n            <Badge\r\n              overlap='rectangular'\r\n              anchorOrigin={{ vertical: 'top', horizontal: 'left' }}\r\n              badgeContent={activity}\r\n            >\r\n              <Avatar onClick={()=>{router.pushPage(PAGE_INTRO)}} src={fetchedUser.photo_200}/>\r\n            </Badge>\r\n          </Stack>\r\n          <Stack direction=\"column\">\r\n            <Typography variant='caption' >{fetchedUser.first_name} {fetchedUser.last_name}</Typography>\r\n            <Typography>Баланс: {user.balance} K</Typography>\r\n          </Stack>\r\n          </Stack>\r\n          <Stack \r\n            sx={{ marginTop: '15px'}}\r\n            direction=\"row\"\r\n            justifyContent=\"flex-start\"\r\n            alignItems=\"center\"\r\n            spacing={1}>\r\n              <Chip \r\n                label={<Typography variant='caption'><b>{user.energy}/{user.maxEnergy}</b></Typography>} \r\n                deleteIcon={<AddCircleIcon sx={{ color: 'black' }}/>} \r\n                onDelete={handlePlusEnergy} \r\n                icon={<BoltIcon/>} \r\n                size=\"small\"\r\n                color={energyColor}\r\n              />\r\n              <Chip \r\n                label={<Typography variant='caption'><b>{user.energizer}</b></Typography>} \r\n                icon={<BatteryChargingFullOutlinedIcon sx={{ color: 'black' }}/>} \r\n                onClick={()=>setOpenEnergizer(true)}\r\n                size=\"small\"\r\n                color=\"secondary\" \r\n              />\r\n              <Chip \r\n                label={<Typography variant='caption'><b>{freeTime}/{user.time}</b></Typography>} \r\n                icon={<QueryBuilderOutlinedIcon sx={{ color: 'black' }}/>} \r\n                onClick={()=>setOpenTime(true)}\r\n                size=\"small\" \r\n                color=\"success\" \r\n              />\r\n              <Chip \r\n                label={<Typography variant='caption'><b>{Math.trunc(user.age/12)}/60</b></Typography>} \r\n                icon={<AccessibilityNewIcon/>} \r\n                onClick={()=>setOpenAge(true)}\r\n                size=\"small\" \r\n                color=\"warning\" \r\n              />\r\n            </Stack>\r\n            <Stack\r\n              direction=\"row\"\r\n              sx={{ marginTop: '15px' }}>\r\n              <Stack\r\n                direction=\"row\"\r\n                spacing={1}>\r\n                {user.freeEnergizerOn ?\r\n                  <Chip label={<b>Энергетики +{user.freeEnergizerCount}</b>} onClick={() => handleFreeEnergy()} color=\"primary\" icon={<BatteryChargingFullOutlinedIcon />} size=\"small\" /> :\r\n                  <Chip label={`Бесплатные через ${parseMillisecondsIntoReadableTime(enerTime)}`} icon={<BatteryChargingFullOutlinedIcon />} size=\"small\" />\r\n                }\r\n                {!user.carsharing.status ? <Chip \r\n                disabled={user.carsharing.status}\r\n                label={<Stack \r\n                  direction=\"row\"\r\n                  justifyContent=\"flex-start\"\r\n                  alignItems=\"center\"><b>MAX</b><BoltIcon  fontSize=\"small\" sx={{ color: 'black' }}/></Stack>} \r\n                onClick={() => handleMaxEnergy()} \r\n                color=\"primary\" \r\n                icon={<AddIcon  fontSize=\"small\" sx={{ color: 'black' }} />} \r\n                size=\"small\" />:\r\n                <Chip label={parseMillisecondsIntoReadableTime(maxEnerTime)} icon={<BoltIcon />} size=\"small\" />}\r\n              </Stack>\r\n              <InfoOutlinedIcon onClick={() => setOpenInfo(true)} color=\"primary\" sx={{ marginLeft: 'auto' }} />\r\n            </Stack>\r\n          </Stack>\r\n        </Toolbar> : \r\n        <Toolbar> \r\n          <Skeleton variant=\"circular\" width={40} height={40} animation=\"wave\" /> \r\n          <Container>\r\n          <ListItemText \r\n              primary={<Skeleton/>} \r\n              secondary={<Skeleton/>}/>\r\n          </Container>\r\n        </Toolbar>}\r\n        <div>\r\n          <Snackbar\r\n            open={openEnergizer}\r\n            onClose={()=>setOpenEnergizer(false)}\r\n            message={<><BatteryChargingFullOutlinedIcon/><Typography><b>Энергетик</b> восстанавливает энергию.<br/><br/> Каждые 24 часа предлагается <b>2 бесплатных энергетика</b>, \r\n              их количество можно увеличить до 10, выполнив некоторые условия в <b>настройках</b>.<br/><br/>\r\n              Энергия - <b>расходуется</b> каждый раз когда фиксируется прибыль от бизнеса.\r\n            </Typography></>}\r\n            action={action}\r\n          />\r\n          <Snackbar\r\n            open={openTime}\r\n            onClose={()=>setOpenTime(false)}\r\n            message={<><QueryBuilderOutlinedIcon/><Typography>Время <b>необходимо</b> для покупки бизнеса.<br/><br/> Максимальное количество времени 14 ч.<br/><br/> Увеличить до максимума можно купив транспорт.\r\n              </Typography></>}\r\n            action={action}\r\n          />\r\n          <Snackbar\r\n            open={openAge}\r\n            onClose={()=>setOpenAge(false)}\r\n            message={<><AccessibilityNewIcon/><Typography>Возраст игрока на данный момент, по достижении 60 лет игра заканчивается.\r\n              </Typography></>}\r\n            action={action}\r\n          />\r\n          <Snackbar\r\n            open={openInfo}\r\n            onClose={()=>setOpenInfo(false)}\r\n            message={info}\r\n            action={action}\r\n          />\r\n          <Snackbar\r\n            open={openMaxEnergy}\r\n            onClose={()=>setOpenMaxEnergy(false)}\r\n            message={<><BoltIcon/><Typography>Можете увеличить максимальное количество энергии на 50 в течении одного часа, посмотрев рекламный ролик\r\n            </Typography></>}\r\n            action={action2}\r\n          />\r\n        </div>\r\n      </AppBar>\r\n    \r\n  )\r\n}\r\n","import { Backdrop, Badge, BottomNavigation, BottomNavigationAction, CircularProgress, Paper } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { useRouter } from '@happysanta/router'\r\nimport { PAGE_MAIN, PAGE_PROPERTY, PAGE_BANK, PAGE_PROFILE } from '../routers';\r\nimport axios from '../axios.js'\r\nimport bridge from '@vkontakte/vk-bridge'\r\n\r\nimport HandshakeIcon from '@mui/icons-material/Handshake';\r\nimport AccountBalanceIcon from '@mui/icons-material/AccountBalance';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn';\r\n\r\nlet arr = [];\r\n\r\nfunction BottomNav({ value }) {\r\n    const router = useRouter()\r\n    const debts = useSelector((state) => state.user.debts)\r\n    const greetings = useSelector((state) => state.user.greetings)\r\n    const user = useSelector((state) => state.user.user)\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const save = async (data) => {\r\n        await axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    const handleChange = (event, newValue) => {\r\n        arr.push(newValue)\r\n        if (arr.length == 4) {\r\n            bridge.send('VKWebAppCheckNativeAds', { ad_format: 'interstitial' });\r\n        }\r\n        if (arr.length == 5) {\r\n            setOpen(true)\r\n            arr.length = 0\r\n            setTimeout(() => {\r\n                setOpen(false)\r\n                bridge.send('VKWebAppShowNativeAds', { ad_format: 'interstitial' })\r\n                    .then((data) => {\r\n                        if (data.result) {\r\n                            console.log('Реклама показана');\r\n                            save(user)\r\n                            router.pushPage(newValue)\r\n                        }\r\n                        else\r\n                            console.log('Ошибка при показе');\r\n                    })\r\n                    .catch((error) => { console.log(error); });\r\n            }, 1000)\r\n        } else {\r\n            save(user)\r\n            router.pushPage(newValue)\r\n        }\r\n        \r\n    };\r\n\r\n    return (\r\n        <Paper sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }} elevation={3}>\r\n            <Backdrop\r\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\r\n                open={open}\r\n            >\r\n                <CircularProgress color=\"inherit\" />\r\n            </Backdrop>\r\n            <BottomNavigation\r\n                value={value}\r\n                onChange={handleChange}\r\n            >\r\n                <BottomNavigationAction label=\"Главная\" value={PAGE_MAIN} icon={<MonetizationOnIcon />} />\r\n                <BottomNavigationAction label=\"Сделки\" value={PAGE_PROPERTY} icon={<HandshakeIcon />} />\r\n                <BottomNavigationAction label=\"Банк\" value={PAGE_BANK} icon={\r\n                    <Badge color=\"secondary\" variant=\"dot\" invisible={!debts}>\r\n                        <AccountBalanceIcon />\r\n                    </Badge>\r\n                } />\r\n                <BottomNavigationAction label='Профиль' value={PAGE_PROFILE} icon={\r\n                    <Badge color=\"secondary\" variant=\"dot\" invisible={!greetings}>\r\n                        <AccountCircleIcon />\r\n                    </Badge>\r\n                } />\r\n\r\n            </BottomNavigation>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default BottomNav","import { ListItem, Stack, Typography, ListItemAvatar, Avatar, ListItemText,\r\n    LinearProgress, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, IconButton, Button, Divider, Skeleton } from '@mui/material'\r\nimport { green, pink } from '@mui/material/colors';\r\n\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\n\r\nimport PaymentsIcon from '@mui/icons-material/Payments';\r\nimport RestaurantIcon from '@mui/icons-material/Restaurant';\r\nimport StorefrontIcon from '@mui/icons-material/Storefront';\r\nimport HomeRepairServiceIcon from '@mui/icons-material/HomeRepairService';\r\nimport EngineeringIcon from '@mui/icons-material/Engineering';\r\n\r\nfunction Biz({ biz }) {\r\n\r\n    const [ color, setColor ] = React.useState(\"inherit\")\r\n    const Restaurant = () => {\r\n        return(\r\n            <RestaurantIcon color={\"warning\"} onClick={()=>setOpen(true)}/>\r\n        )\r\n    }\r\n\r\n    const Market = () => {\r\n        return(\r\n            <StorefrontIcon color={\"success\"} onClick={()=>setOpen(true)}/>\r\n        )\r\n    }\r\n\r\n    const Service = () => {\r\n        return(\r\n            <HomeRepairServiceIcon color={\"secondary\"} onClick={()=>setOpen(true)}/>\r\n        )\r\n    }\r\n\r\n    const Production = () => {\r\n        return(\r\n            <EngineeringIcon onClick={()=>setOpen(true)} />\r\n        )\r\n    }\r\n\r\n    const SkeletonIcon = () => {\r\n        return(\r\n            <Skeleton animation=\"wave\" variant=\"circular\" width={40} height={40} />\r\n        )\r\n    }\r\n\r\n    const [ profitColor, setProfitColor ] = React.useState(green[300])\r\n    const [ open, setOpen ] = React.useState(false)\r\n    const [ profit, setProfit ] = React.useState(((biz.maxProfit - biz.minProfit)/2)+biz.minProfit)\r\n    const [timeLeft, setTimeLeft] = React.useState(0)\r\n    const value = timeLeft * 10\r\n    const [ isCounting, setIsCounting ] = React.useState(true)\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const expenditure = useSelector((state) => state.user.expenditure)\r\n\tconst bizs = useSelector((state) => state.bizs.bizs)\r\n    const myBizs = bizs.filter(({_id}) => user.bizs.includes(_id))\r\n    const bizTime = myBizs.map(item => item.requiredTime).reduce((prev, curr) => prev + curr, 0)\r\n    \r\n    const [ bizIcon, setBizIcon ] = React.useState(SkeletonIcon)\r\n\r\n    React.useEffect(()=>{\r\n        if(biz.bizType == \"Услуги\") {\r\n            setColor(\"secondary\")\r\n            setBizIcon(Service)\r\n        } else\r\n        if(biz.bizType == \"Общепит\") { \r\n            setColor(\"warning\")\r\n            setBizIcon(Restaurant)\r\n        } else\r\n        if(biz.bizType == \"Торговля\") {\r\n            setColor(\"success\")\r\n            setBizIcon(Market)\r\n        }else\r\n        if(biz.bizType == \"Производство\") {\r\n            setBizIcon(Production)\r\n        }\r\n    },[biz.bizType])\r\n\r\n    const getRandomIntInclusive = (min, max) => {\r\n\t\tmin = Math.ceil(min);\r\n\t\tmax = Math.floor(max);\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются\r\n\t  }\r\n\r\n    const result = () => {\r\n\t\tsetIsCounting(false)\r\n\t\tconst p = getRandomIntInclusive( biz.minProfit, biz.maxProfit)\r\n        if( p > 0 ) {setProfitColor(green[700])} else {setProfitColor(pink[500])}\r\n\t\tsetProfit(p)\r\n\t}\r\n\r\n    React.useEffect(()=>{\r\n\r\n    },[user])\r\n\r\n    const handleStart = (price,requiredEnergy) => {\r\n        setIsCounting(true)\r\n        if (timeLeft == 10)setTimeLeft(0)\r\n        const newBalance = user.balance + price\r\n        const newEnergy = user.energy - expenditure\r\n        const newRecord = {\r\n            ...user.record,\r\n            carSum: user.record.carSum + price,\r\n        }\r\n        const fields = {\r\n\t\t\t...user,\r\n\t\t\tbalance: newBalance,\r\n            energy: newEnergy,\r\n            record: newRecord,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n    }\r\n\r\n    const sellBiz = ( id, price) => {\r\n\t\tconst newBalance = user.balance + price\r\n\t\tconst myNewBizs = myBizs.filter((biz) => biz._id !== id)\r\n\t\tconst fields = {\r\n\t\t\t...user,\r\n\t\t\tbalance: newBalance,\r\n\t\t\tbizs: myNewBizs.map(item => item._id)\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n\t}\r\n\r\n    const pause = () => {\r\n        const date = +new Date\r\n        const fields = {\r\n            ...user,\r\n            onGame: false,\r\n            datePoint: date + 300000\r\n        }\r\n        dispatch(setUser(fields))\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            \r\n            if(!biz.requiredTime <= (user.time - (bizTime + user.workTime))||user.prof == 'Средний бизнес'||user.prof == 'Крупный бизнес'){\r\n                isCounting && setTimeLeft((timeLeft) => (timeLeft >= 10 ? 10 : timeLeft +1 ))\r\n            }\r\n\t\t\t\r\n            if (timeLeft == 10) {\r\n                if(user.energy <= 0){\r\n                    pause()\r\n                } else {\r\n                    result()\r\n                }\r\n\t\t\t}\r\n        },500)\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    },[isCounting, timeLeft, biz])\r\n\r\n    return (\r\n        <>\r\n        <ListItem disablePadding\r\n            secondaryAction={<Stack alignItems=\"flex-end\">\r\n                <Typography variant=\"h6\" sx={{ color: profitColor }}>{Math.trunc(profit)} K</Typography>\r\n                <IconButton \r\n                    onClick={()=>handleStart(Math.trunc(profit),biz.requiredEnergy)} \r\n                    color=\"primary\" \r\n                    disabled={isCounting} \r\n                    variant=\"contained\" \r\n                    size=\"small\"\r\n                ><PaymentsIcon/></IconButton></Stack>}\r\n        >\r\n            <ListItemAvatar>\r\n                <Avatar>\r\n                {bizIcon}\r\n                </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={<React.Fragment>{biz.bizName}<br/><Typography variant=\"caption\">Макс. прибыль: {biz.maxProfit} K</Typography></React.Fragment>}\r\n                secondary={<LinearProgress sx={{ width: 1/2 }} variant=\"determinate\" value={value} color={color}/>}\r\n            />\r\n        </ListItem>\r\n        \r\n        \r\n        <Divider variant=\"inset\" component=\"li\" /><br/>\r\n        <Dialog\r\n            open={open}\r\n            onClose={()=>setOpen(false)}\r\n            fullWidth\r\n        >\r\n            <DialogTitle>\r\n            {biz.bizName}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n            <DialogContentText>\r\n                Вид бизнеса: <b>{biz.bizType}</b><br/>\r\n                Расход времени: <b>{biz.requiredTime}ч.</b><br/>\r\n                Максимальная прибыль: <b>{biz.maxProfit} K</b><br/>\r\n                Минимальная прибыль: <b>{biz.minProfit} K</b><br/>\r\n                Сумма продажи: <b>{biz.sellPrice} K</b><br/>\r\n            </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            <Button onClick={()=>{\r\n                sellBiz(biz._id,biz.sellPrice); \r\n                setOpen(false)\r\n                }}>\r\n                Продать\r\n            </Button>\r\n            <Button onClick={()=>setOpen(false)}>\r\n                Отмена\r\n            </Button>\r\n            </DialogActions>\r\n        </Dialog></>\r\n    )\r\n    }\r\n\r\nexport default Biz","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\n\r\nimport { Avatar, Typography, Dialog, DialogContent, DialogContentText, DialogActions, Button, LinearProgress, ListItem, ListItemAvatar, DialogTitle, ListItemText } from '@mui/material'\r\n\r\nimport EngineeringIcon from '@mui/icons-material/Engineering';\r\n\r\nfunction Work() {\r\n    const user = useSelector((state) => state.user.user)\r\n    const cars = useSelector((state) => state.cars.cars)\r\n\tconst houses = useSelector((state) => state.houses.houses)\r\n\t\r\n\tconst myHouses = houses.filter(({_id}) => user.house.includes(_id))\r\n\tconst myCars = cars.filter(({_id}) => user.car.includes(_id))\r\n    const sumHouseExp = myHouses.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n\tconst sumCarExp = myCars.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n    \r\n    const [ ageTime, setAgeTime ] = React.useState(0)\r\n    const [ open, setOpen ] = React.useState(false)\r\n\r\n\tconst dispatch = useDispatch()\r\n    \r\n\tconst agePlus = () => {\r\n        const newBalance = user.balance + user.salary\r\n        const fields = {\r\n\t\t\t...user,\r\n\t\t\tbalance: newBalance,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n    }\r\n\r\n    const quit = () => {\r\n        const fields = {\r\n\t\t\t...user,\r\n            prof: 'Малый бизнес',\r\n            workTime: 0,\r\n            salary: 0,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const ageInterval = setInterval(() => {\r\n            setAgeTime((ageTime) => (ageTime >= 99 ? 99 : ageTime +1 ))\r\n            if (ageTime == 99 ) {\r\n                agePlus()\r\n\t\t\t\tsetAgeTime(0)\r\n            }\r\n        },100)\r\n        return () => {\r\n            clearInterval(ageInterval)\r\n        }\r\n    },[ageTime])\r\n\r\n    return (\r\n        <>\r\n        <ListItem disablePadding\r\n          secondaryAction={<Typography variant=\"h6\">{user.salary} K</Typography>}>\r\n            <ListItemAvatar onClick={()=>setOpen(true)}>\r\n            <Avatar>\r\n                <EngineeringIcon color=\"action\"/>\r\n            </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={<React.Fragment>Деятельность: {user.prof}<br/></React.Fragment>}\r\n                secondary={<LinearProgress sx={{ width: 1/2 }} variant=\"determinate\" value={ageTime} color=\"inherit\"/>}\r\n            />\r\n        </ListItem>\r\n        <Dialog\r\n            open={open}\r\n            onClose={()=>setOpen(false)}\r\n            fullWidth\r\n        >\r\n            <DialogTitle>\r\n            Работа\r\n            </DialogTitle>\r\n            <DialogContent>\r\n            <DialogContentText>\r\n                Деятельность: <b>{user.prof}</b><br/>\r\n                Расход времени: <b>8ч.</b><br/>\r\n                Расходы на дом: <b>{sumHouseExp} K</b><br/>\r\n                Расходы на транспорт: <b>{sumCarExp} K</b><br/>\r\n                Общие расходы: <b>{user.expenses} K</b><br/>\r\n            </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            <Button onClick={()=>{ \r\n                quit()\r\n                setOpen(false)\r\n                }}>\r\n                Уволиться\r\n            </Button>\r\n            <Button onClick={()=>setOpen(false)}>\r\n                Отмена\r\n            </Button>\r\n            </DialogActions>\r\n        </Dialog></>\r\n    )\r\n}\r\n\r\nexport default Work","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\n\r\nimport { Avatar, Typography, LinearProgress, ListItem, ListItemAvatar, ListItemText, Divider, Stack, IconButton } from '@mui/material'\r\n\r\nimport BusinessIcon from '@mui/icons-material/Business';\r\nimport PaymentsIcon from '@mui/icons-material/Payments';\r\n\r\nfunction Rent() {\r\n    const [timeLeft, setTimeLeft] = React.useState(0)\r\n    const [isCounting, setIsCounting] = React.useState(true)\r\n    const value = timeLeft\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const houses = useSelector((state) => state.houses.houses)\r\n    const myRents = houses.filter(({_id}) => user.rent.includes(_id))\r\n    const sumRent = myRents.map(item => item.rentPrice).reduce((prev, curr) => prev + curr, 0)\r\n\r\n    const result = () => {\r\n        setIsCounting(true)\r\n\t\tconst newBalance = user.balance + sumRent\r\n        const newRecord = {\r\n            ...user.record,\r\n            carSum: user.record.carSum + sumRent,\r\n        }\r\n\t\tconst fields = {\r\n\t\t\t...user,\r\n\t\t\tbalance: newBalance,\r\n            record: newRecord,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n        setTimeLeft(0)\r\n\t}\r\n\r\n    React.useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            \r\n            isCounting && setTimeLeft((timeLeft) => (timeLeft >= 100 ? 100 : timeLeft +1 ))\r\n\t\t\t\r\n            if (timeLeft == 100) {\r\n\t\t\t\tsetIsCounting(false)\r\n\t\t\t}\r\n        },100)\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    },[timeLeft])\r\n\r\n    return (\r\n        <>\r\n        <ListItem disablePadding\r\n          secondaryAction={<Stack alignItems=\"flex-end\">\r\n            <Typography variant=\"h6\">{sumRent} K</Typography>\r\n            <IconButton \r\n                        onClick={()=>result()} \r\n                        color=\"primary\" \r\n                        disabled={isCounting} \r\n                        variant=\"contained\" \r\n                        size=\"small\"\r\n                    ><PaymentsIcon/>\r\n                    </IconButton>\r\n            </Stack>}>\r\n            <ListItemAvatar>\r\n            <Avatar>\r\n                <BusinessIcon color=\"action\"/>\r\n            </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={<Typography variant=\"body2\">Недвижимость в аренде</Typography>}\r\n                secondary={<LinearProgress sx={{ width: 1/2 }} variant=\"determinate\" value={value} color=\"inherit\"/>}\r\n            />\r\n        </ListItem>\r\n        \r\n        <Divider variant=\"inset\" component=\"li\" /><br/></>\r\n    )\r\n    }\r\n\r\nexport default Rent","import React from 'react'\r\nimport { useRouter } from '@happysanta/router'\r\nimport { useSelector } from 'react-redux';\r\nimport { Typography, AppBar, Toolbar, IconButton } from '@mui/material';\r\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport { PAGE_INTRO } from '../routers';\r\nimport axios from '../axios';\r\n\r\nfunction Head({ name }) {\r\n  const router = useRouter()\r\n\r\n  const user = useSelector((state) => state.user.user)\r\n  const save = async (data) => {\r\n    await axios.patch(`/auth/${user._id}`, data)\r\n  }\r\n\r\n  const handleBack = () => {\r\n    router.popPage()\r\n    save(user)\r\n  }\r\n\r\n  const handleMain = () => {\r\n    router.pushPage(PAGE_INTRO)\r\n    save(user)\r\n  }\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <IconButton\r\n          size=\"large\"\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          sx={{ mr: 2 }}\r\n          onClick={handleBack}\r\n        >\r\n          <ArrowBackIosNewIcon />\r\n        </IconButton>\r\n        <IconButton\r\n          size=\"large\"\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          sx={{ mr: 2 }}\r\n          onClick={handleMain}\r\n        >\r\n          <HomeIcon />\r\n        </IconButton>\r\n        <Typography variant=\"subtitle1\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n          {name}\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\n\r\nexport default Head","import { IconButton, Toolbar, List, Container, Stack, Typography, ListItem, ListItemAvatar, Avatar, ListItemText, LinearProgress, Modal, Box, Button, Paper } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useRouter } from '@happysanta/router'\r\nimport { setUser, setExpenditure } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport { PAGE_PAUSE, PAGE_REGISTER, PAGE_MAIN } from '../routers';\r\n\r\nimport { Header } from '../components/Header.jsx';\r\nimport BottomNav from '../components/BottomNav';\r\nimport Biz from '../components/Biz.jsx';\r\nimport Work from '../components/Work.jsx';\r\nimport Rent from '../components/Rent.jsx';\r\nimport SavingsIcon from '@mui/icons-material/Savings';\r\nimport PaymentsIcon from '@mui/icons-material/Payments';\r\nimport BusinessCenterIcon from '@mui/icons-material/BusinessCenter';\r\nimport BusinessIcon from '@mui/icons-material/Business';\r\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn';\r\nimport Head from '../components/Head';\r\n\r\nfunction Main({fetchedUser}) {\r\n    const dispatch = useDispatch()\r\n    const router = useRouter()\r\n    \r\n    const user = useSelector((state) => state.user.user)\r\n    const bizs = useSelector((state) => state.bizs.bizs)\r\n    const houses = useSelector((state) => state.houses.houses)\r\n    const cars = useSelector((state) => state.cars.cars)\r\n\r\n    const myHouses = houses.filter(({_id}) => user.house.includes(_id))\r\n    const myCars = cars.filter(({_id}) => user.car.includes(_id))\r\n    const myBizs = bizs.filter(({_id}) => user.bizs.includes(_id))\r\n    const myRents = houses.filter(({_id}) => user.rent.includes(_id))\r\n    const sumRent = myRents.map(item => item.rentPrice).reduce((prev, curr) => prev + curr, 0)\r\n\r\n    const sumHouseExp = myHouses.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n    const sumHouses = myHouses.map(item => item.price).reduce((prev, curr) => prev + curr, 0)\r\n\tconst sumCarExp = myCars.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n    const sumCars = myCars.map(item => item.price).reduce((prev, curr) => prev + curr, 0)\r\n    const sumRentExp = myRents.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n    const sumRents = myRents.map(item => item.price).reduce((prev, curr) => prev + curr, 0)\r\n    const sumCreditsDebt = user.credits.map(item => item.debt).reduce((prev, curr) => prev + curr, 0)\r\n    const sumCreditsPayments = user.credits.map(item => item.payment).reduce((prev, curr) => prev + curr, 0)\r\n\r\n    const totalExp = (user.children * 5) + user.expenses + sumCarExp + sumHouseExp + sumRentExp\r\n\r\n    const [ageTime, setAgeTime] = React.useState(0)\r\n    const [isCounting, setIsCounting] = React.useState(true)\r\n    const [timeLeft, setTimeLeft] = React.useState(0)\r\n    const [remind, setRemind] = React.useState(false)\r\n    const [bankrot, setBankrot] = React.useState(false)\r\n    const [ageLimit, setAgeLimit] = React.useState(false)\r\n    const [recordModal, setRecordModal] = React.useState(false)\r\n\r\n    const bankrotListener = () => {\r\n        if(user.balance < (user.debts+sumCreditsDebt) && user.credits.length >= 5 && myHouses.length <= 1 \r\n        && myBizs.length <= 0 && myCars.length <= 0 && myRents.length <= 0){\r\n            setBankrot(true)\r\n        }\r\n    }\r\n\r\n    const ageLimitListener = () => {\r\n        if (user.age >= 720) {\r\n            //Math.trunc(user.age/12),user.prof,Math.round(((user.deposit.amount * 0.13)/12) + sumRent)\r\n            if (user.record.cashflow < Math.round(((user.deposit.amount * 0.13) / 12) + sumRent)) {\r\n                if(sumCreditsPayments==0){const newRecord = {\r\n                    prof: user.prof,\r\n                    age: Math.trunc(user.age / 12),\r\n                    cashflow: Math.round(((user.deposit.amount * 0.13) / 12) + sumRent),\r\n                    bizCount: myBizs.length,\r\n                    deposit: user.deposit.amount,\r\n                    rentCount: myRents.length,\r\n                    houseSumm: sumHouses + sumRents + sumCars,\r\n                    carSum: user.record.carSum,\r\n                }\r\n                const fields = {\r\n                    ...user,\r\n                    record: newRecord,\r\n                }\r\n                dispatch(setUser(fields))\r\n                }\r\n            }\r\n            setAgeLimit(true)\r\n        }\r\n    }\r\n\r\n    const accruePayments = () => {\r\n\r\n        const getNewCreditData = credits => {\r\n            let content = [];\r\n            for (let i = 0; i < credits.length; i++) {\r\n                const credit = credits[i];\r\n                if(credit.debt >= credit.amount){\r\n                    content.push({\r\n                        id: credit.id,\r\n                        amount: credit.amount,\r\n                        debt: credit.debt,\r\n                        payment: credit.payment,\r\n                    });\r\n                } else \r\n                {content.push({\r\n                    id: credit.id,\r\n                    amount: credit.amount,\r\n                    debt: credit.debt + credit.payment,\r\n                    payment: credit.payment,\r\n                });}\r\n            }\r\n            return content.sort((x, y) => x.id - y.id);\r\n        };\r\n        const newAge = user.age + 1\r\n        const newDebts = user.debts + totalExp\r\n        const fields = {\r\n            ...user,\r\n            credits: getNewCreditData(user.credits),\r\n            debts: newDebts,\r\n            age: newAge,\r\n        }\r\n        dispatch(setUser(fields))\r\n    }\r\n\r\n    const takeDividends = () => {\r\n        const newBalance = user.balance + Math.round(user.deposit.amount * 0.13)\r\n        const newRecord = {\r\n            ...user.record,\r\n            carSum: user.record.carSum + Math.round(user.deposit.amount * 0.13),\r\n        }\r\n        const newDeposit = {\r\n            ...user.deposit,\r\n            date: +new Date + 120000,\r\n        }\r\n        const fields = {\r\n            ...user,\r\n            balance: newBalance,\r\n            deposit: newDeposit,\r\n            record: newRecord,\r\n        }\r\n        \r\n        dispatch(setUser(fields))\r\n        \r\n    }\r\n\r\n    const saveRecord = () => {\r\n        const newRecord = {\r\n            ...user.record,\r\n            carSum: 0,\r\n        }\r\n        const fields = {\r\n            ...user,\r\n            record: newRecord,\r\n            lifesCount: user.record.carSum,\r\n        }\r\n        dispatch(setUser(fields))\r\n        setRecordModal(true)\r\n    }\r\n\r\n    const shareRecord = (record) => {\r\n        bridge.send('VKWebAppShowWallPostBox', {\r\n            message: `У меня новый рекорд! За год прибыль составила ${record} К!!!`,\r\n            attachments: 'https://vk.com/app51483243'\r\n            })\r\n            .then((data) => { \r\n              if (data.post_id) {\r\n                // Запись размещена\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              // Ошибка\r\n              console.log(error);\r\n            });\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (user.onGame == false) router.pushPage(PAGE_PAUSE)\r\n        if (Number.isInteger(user.age / 12)) {\r\n            if (user.lifesCount < user.record.carSum) {\r\n                saveRecord()\r\n            } else {\r\n                const newRecord = {\r\n                    ...user.record,\r\n                    carSum: 0,\r\n                }\r\n                const fields = {\r\n                    ...user,\r\n                    record: newRecord,\r\n                }\r\n                dispatch(setUser(fields))\r\n            }\r\n        }\r\n    }, [user.age, recordModal])\r\n\r\n    React.useEffect(() => {\r\n        const ageInterval = setInterval(() => {\r\n            bankrotListener()\r\n            ageLimitListener()\r\n\r\n            user.onGame && setAgeTime((ageTime) => (ageTime >= 1198 ? 1198 : ageTime +1 ))\r\n            if (ageTime == 1198 || ageTime == 598) {\r\n                if(user.debts > 0){\r\n                    setRemind(true)\r\n                    dispatch(setExpenditure(10))\r\n                }\r\n                setAgeTime(0)\r\n            }\r\n            if (ageTime == 101 || ageTime == 201 || ageTime == 301 || ageTime == 401 ||  \r\n                ageTime == 501 ||  ageTime == 601 ||  ageTime == 701 ||  ageTime == 801 ||  \r\n                ageTime == 901 ||  ageTime == 1001 ||  ageTime == 1101 ||  ageTime == 1197) {\r\n                    accruePayments()\r\n                }\r\n            const date = +new Date\r\n            \r\n            \r\n            if(user.deposit.date <= date){\r\n                \r\n                setIsCounting(false)\r\n                setTimeLeft(100)\r\n            }\r\n            isCounting && setTimeLeft(Math.round(100-(((user.deposit.date - date)/10)/120)))\r\n            if(user.deposit.date > date) {\r\n                setIsCounting(true)\r\n            }\r\n        },100)\r\n\r\n        return () => {\r\n            clearInterval(ageInterval)\r\n        }\r\n    },[ageTime])\r\n\r\n    const style = {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        width: 250,\r\n        bgcolor: 'white',\r\n        borderRadius: '10px',\r\n        boxShadow: 24,\r\n        p: 4,\r\n    };\r\n\r\n    const BizPlaceHolder = () => {\r\n        return (\r\n        <Stack direction=\"column\"\r\n            justifyContent=\"space-evenly\"\r\n            alignItems=\"center\">\r\n            <BusinessCenterIcon color=\"disabled\" sx={{ fontSize: 40, marginTop: '15px' }} />\r\n            <Typography variant=\"subtitle1\">У Вас еще нет бизнеса</Typography>\r\n            <Typography variant=\"caption\">Купить бизнес можно во вкладке \"Сделки\"</Typography>\r\n        </Stack>)\r\n    }\r\n\r\n    const InvestPlaceHolder = () => {\r\n        return (\r\n        <Stack direction=\"column\"\r\n            justifyContent=\"space-evenly\"\r\n            alignItems=\"center\">\r\n            <SavingsIcon color=\"disabled\" sx={{ fontSize: 40, marginTop: '15px' }} />\r\n            <Typography variant=\"subtitle1\">У Вас еще нет вклада</Typography>\r\n            <Typography variant=\"caption\">Открыть вклад можно во вкладке \"Банк\"</Typography>\r\n        </Stack>)\r\n    }\r\n\r\n    const RentPlaceHolder = () => {\r\n        return (\r\n        <Stack direction=\"column\"\r\n            justifyContent=\"space-evenly\"\r\n            alignItems=\"center\">\r\n            <BusinessIcon color=\"disabled\" sx={{ fontSize: 40, marginTop: '15px' }} />\r\n            <Typography variant=\"subtitle1\">У Вас еще нет недвижимости в аренде</Typography>\r\n            <Typography variant=\"caption\">Сдать недвижимость в аренду можно во вкладке \"Профиль\"</Typography>\r\n        </Stack>)\r\n    }\r\n\r\n    const Info = (\r\n        <><MonetizationOnIcon/>\r\n        <Typography>\r\n            На <b>ГЛАВНОЙ</b> вкладке показаны доходы<br/><br/>\r\n            Каждый месяц (<b>10 секунд</b>) начисляется зарплата, нажав на иконку можно уволиться.<br/><br/>\r\n            После того как индикатор <b>бизнеса</b> заполнится, нужно зафиксировать прибыль. Продать бизнес можно нажав на его иконку.<br/><br/>\r\n            Доходы от <b>вклада</b> и <b>аренды недвижимости</b> так же нужно забирать нажатием на соответствующую иконку.<br/><br/>\r\n            <b>Игровое время</b> идет только на этой вкладке<br/><br/>\r\n            Игра <b>сохраняется</b> автоматически<br/><br/>\r\n        </Typography></>\r\n    )\r\n\r\n    return (\r\n        <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius:0 }}>\r\n            <Head name={'Главная'}/>\r\n            <Container>\r\n                \r\n            <Header fetchedUser={fetchedUser} info={Info}/>\r\n            {user.onGame ? \r\n            <>\r\n            {user.salary != 0 && <>\r\n            <Stack direction=\"row\"><Typography sx={{ marginTop: '10px'}} variant=\"subtitle1\">Работа</Typography></Stack>\r\n            <Work/></>}\r\n            <List dense>\r\n            {myBizs.length >= 1 ? <Typography variant=\"subtitle1\">Бизнес</Typography>:<BizPlaceHolder/>}\r\n            {myBizs.map((biz, index) => (<Biz\r\n            key={index}\r\n            biz={biz}/>\r\n            ))}\r\n            \r\n            </List>\r\n            <List dense>\r\n            {user.deposit.amount != 0 ? \r\n                <><Typography variant=\"subtitle1\">Вклад</Typography>\r\n                <ListItem disablePadding\r\n                secondaryAction={<Stack alignItems=\"flex-end\">\r\n                    <Typography variant=\"h6\">{Math.round(user.deposit.amount * 0.13)} K</Typography>\r\n                    <IconButton \r\n                        onClick={()=>takeDividends()} \r\n                        color=\"primary\" \r\n                        disabled={isCounting} \r\n                        variant=\"contained\" \r\n                        size=\"small\"\r\n                    ><PaymentsIcon/>\r\n                    </IconButton></Stack>}>\r\n                    <ListItemAvatar>\r\n                    <Avatar>\r\n                        <SavingsIcon/>\r\n                    </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                        primary={<React.Fragment>Вклад: {user.deposit.amount}К<br/></React.Fragment>}\r\n                        secondary={<LinearProgress sx={{ width: 1/2 }} variant=\"determinate\" value={timeLeft} color=\"inherit\"/>}\r\n                    />\r\n                </ListItem></> : <InvestPlaceHolder/>}\r\n            </List>\r\n            <List dense> \r\n                {myRents.length >= 1 ? <><Typography variant=\"subtitle1\">Аренда</Typography></> : <RentPlaceHolder/>}\r\n                {myRents.length >= 1 && <Rent/>}\r\n            </List>\r\n            <Toolbar/></> : \r\n            <Stack\r\n                \r\n                direction=\"row\"\r\n                justifyContent=\"flex-start\"\r\n                alignItems=\"center\"\r\n                spacing={2}\r\n            >\r\n                <Typography variant=\"subtitle1\">Не в игре</Typography>\r\n            </Stack>}\r\n            <Modal\r\n            open={remind}\r\n            onClose={()=>setRemind(false)}\r\n            >\r\n                <Box sx={style}>\r\n                <Typography>\r\n                    Задолженность {user.debts} K\r\n                </Typography><br/>\r\n                <Typography variant='caption'>Необходимо погасить во вкладке \"Банк\"<br/>Иначе расход энергии увеличтся</Typography>\r\n                </Box>\r\n            </Modal>\r\n            <Modal\r\n            open={recordModal}\r\n            onClose={()=>setRecordModal(false)}\r\n            >\r\n                <Box sx={style}>\r\n                <Typography>\r\n                <b>Новый рекорд!</b>\r\n                </Typography><br/>\r\n                <Typography variant='caption'>Прибыль за этот год составила <b>{user.lifesCount}К</b><br/>Рекорд сохранен и будет отображен в <b>глобальном рейтинге</b></Typography>\r\n                <br/><br/>\r\n                <Button onClick={()=>shareRecord(user.lifesCount)}>Поделиться</Button>\r\n                <Button onClick={()=>setRecordModal(false)}>Закрыть</Button>\r\n                </Box>\r\n            </Modal>\r\n            <Modal\r\n            open={bankrot}\r\n            >\r\n                <Box sx={style}>\r\n                <Typography>\r\n                    Игра закончена\r\n                </Typography><br/>\r\n                <Typography variant='caption'>Вы банкрот 😥</Typography><br/><br/>\r\n                <Button onClick={()=>router.pushPage(PAGE_REGISTER)}>Начать заново</Button>\r\n                </Box>\r\n            </Modal>\r\n            <Modal\r\n            open={ageLimit}\r\n            >\r\n                <Box sx={style}>\r\n                <Typography>\r\n                    Игра закончена\r\n                </Typography><br/>\r\n                <Typography variant='caption'>\r\n                    Вы достигли предельного возраста.<br/>\r\n\r\n                    Вы достигли финансовой свободы в возрасте <b>{Math.trunc(user.age/12)}</b>, с начальной профессией <b>{user.prof}</b>, \r\n                    с суммой пассивного дохода <b>{Math.round(((user.deposit.amount * 0.13)/12) + sumRent)}</b>\r\n                </Typography>\r\n                {user.record.cashflow > Math.round(((user.deposit.amount * 0.13)/12) + sumRent) ? \r\n                <Typography variant='caption'>\r\n                    К сожалению на этот раз рекорд в {user.record.cashflow}К не побит.<br/> \r\n                </Typography>:\r\n                <Typography variant='caption'>\r\n                    Новый рекорд! Пассивный доход - <b>{Math.round(((user.deposit.amount * 0.13)/12) + sumRent)} К</b>\r\n                </Typography>}<br/><br/>\r\n                <Button onClick={()=>router.pushPage(PAGE_REGISTER)}>Начать заново</Button>\r\n                </Box>\r\n            </Modal>\r\n            <BottomNav value={PAGE_MAIN}/>\r\n            </Container>\r\n        </Paper>\r\n    \r\n    )\r\n}\r\n\r\nexport default Main","import { ListItem, Typography, ListItemAvatar, ListItemText, Dialog, DialogTitle, \r\n    DialogContent, DialogContentText, DialogActions, Button, Divider, Skeleton, Stack } from '@mui/material'\r\n\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\n\r\nimport RestaurantIcon from '@mui/icons-material/Restaurant';\r\nimport StorefrontIcon from '@mui/icons-material/Storefront';\r\nimport HomeRepairServiceIcon from '@mui/icons-material/HomeRepairService';\r\nimport EngineeringIcon from '@mui/icons-material/Engineering';\r\n\r\nfunction BizLot({biz}) {\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n\tconst bizs = useSelector((state) => state.bizs.bizs)\r\n    const myBiz = bizs.filter(({_id}) => user.bizs.includes(_id))\r\n    const bizTime = myBiz.map(item => item.requiredTime).reduce((prev, curr) => prev + curr, 0)\r\n    \r\n    const [ open, setOpen ] = React.useState(false)\r\n    const [ disabled, setDisabled ] = React.useState(true)\r\n    \r\n    const Restaurant = () => {\r\n        return(\r\n            <RestaurantIcon color={\"warning\"}/>\r\n        )\r\n    }\r\n\r\n    const Market = () => {\r\n        return(\r\n            <StorefrontIcon color={\"success\"}/>\r\n        )\r\n    }\r\n\r\n    const Service = () => {\r\n        return(\r\n            <HomeRepairServiceIcon color={\"secondary\"}/>\r\n        )\r\n    }\r\n\r\n    const Production = () => {\r\n        return(\r\n            <EngineeringIcon />\r\n        )\r\n    }\r\n\r\n    const SkeletonIcon = () => {\r\n        return(\r\n            <Skeleton animation=\"wave\" variant=\"circular\" width={40} height={40} />\r\n        )\r\n    }\r\n\r\n    const [ bizIcon, setBizIcon ] = React.useState(SkeletonIcon)\r\n    \r\n\r\n    React.useEffect(()=>{\r\n\r\n        if(biz.bizType == \"Услуги\") {\r\n            setBizIcon(Service)\r\n        } else\r\n        if(biz.bizType == \"Общепит\") {\r\n            setBizIcon(Restaurant)\r\n        } else\r\n        if(biz.bizType == \"Торговля\") {\r\n            setBizIcon(Market)\r\n        } else\r\n        if(biz.bizType == \"Производство\") {\r\n            setBizIcon(Production)\r\n        }\r\n\r\n        if (biz.bizPrice <= user.balance && user.prof == 'Средний бизнес'||biz.bizPrice <= user.balance && user.prof == 'Крупный бизнес'|| biz.bizPrice <= user.balance && user.prof == 'Инвестор') {\r\n            setDisabled(false)\r\n        } else {\r\n            if (biz.bizPrice <= user.balance && biz.requiredTime <= (user.time - (bizTime + user.workTime))) {\r\n                setDisabled(false)\r\n            }\r\n\r\n            if (biz.bizPrice > user.balance || biz.requiredTime > (user.time - (bizTime + user.workTime))) {\r\n                setDisabled(true)\r\n            }\r\n        }\r\n\r\n    },[biz, user])\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)}\r\n\r\n    const buyBiz = ( id, price ) => {\r\n        if (price >= 20000 && price < 50000) {\r\n            const newBalance = user.balance - price\r\n            const myBizs = [...user.bizs, id]\r\n            const fields = {\r\n                ...user,\r\n                prof: 'Средний бизнес',\r\n                balance: newBalance,\r\n                bizs: myBizs,\r\n            }\r\n\r\n            dispatch(setUser(fields))\r\n        } else if (price >= 50000) {\r\n            const newBalance = user.balance - price\r\n            const myBizs = [...user.bizs, id]\r\n            const fields = {\r\n                ...user,\r\n                prof: 'Крупный бизнес',\r\n                balance: newBalance,\r\n                bizs: myBizs,\r\n            }\r\n\r\n            dispatch(setUser(fields))\r\n        } else {\r\n            const newBalance = user.balance - price\r\n            const myBizs = [...user.bizs, id]\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                bizs: myBizs,\r\n            }\r\n\r\n            dispatch(setUser(fields))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <ListItem \r\n            disablePadding\r\n            secondaryAction={<Stack justifyContent=\"flex-end\" direction=\"column\">\r\n                <Typography variant=\"body2\">Цена: {biz.bizPrice}K</Typography>\r\n                <Button disabled={disabled} onClick={()=>{\r\n                buyBiz(biz._id,biz.bizPrice);\r\n                }}>\r\n                Купить\r\n            </Button>\r\n            </Stack>}\r\n        >\r\n            <ListItemAvatar onClick={()=>setOpen(true)}>\r\n                {bizIcon}\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={biz.bizName}\r\n                secondary={<React.Fragment>\r\n                    <Typography variant=\"caption\">Макс. прибыль: <b>{biz.maxProfit} K</b></Typography><br/>\r\n                    <Typography variant=\"caption\">Необходимое время: <b>{biz.requiredTime}ч.</b></Typography>\r\n                    </React.Fragment>}\r\n            />\r\n        </ListItem>\r\n        \r\n        \r\n        <Divider variant=\"inset\" component=\"li\" /><br/>\r\n        <Dialog open={open}\r\n            onClose={()=>setOpen(false)}\r\n            fullWidth\r\n        >\r\n            <DialogTitle>\r\n            {biz.bizName}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n            <DialogContentText>\r\n                Вид бизнеса: <b>{biz.bizType}</b><br/>\r\n                Необходимое время: <b>{biz.requiredTime}ч.</b><br/>\r\n                Максимальная прибыль: <b>{biz.maxProfit} K</b><br/>\r\n                Минимальная прибыль: <b>{biz.minProfit} K</b><br/>\r\n                Сумма продажи: <b>{biz.sellPrice} K</b><br/>\r\n            </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            <Button disabled={disabled} onClick={()=>{\r\n                buyBiz(biz._id,biz.bizPrice); \r\n                setOpen(false)\r\n                }}>\r\n                Купить\r\n            </Button>\r\n            <Button onClick={()=>setOpen(false)}>\r\n                Отмена\r\n            </Button>\r\n            </DialogActions>\r\n        </Dialog></>\r\n    )\r\n}\r\n\r\nexport default BizLot","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { List, Stack, Toolbar, Typography } from '@mui/material';\r\nimport { grey } from '@mui/material/colors';\r\nimport BizLot from '../../components/BizLot';\r\nimport BusinessCenterIcon from '@mui/icons-material/BusinessCenter';\r\n\r\nfunction BizList() {\r\n    const user = useSelector((state) => state.user.user)\r\n\tconst bizs = useSelector((state) => state.bizs.bizs)\r\n    const c = new Set(user.bizs)\r\n\tconst avBizs = bizs.filter(({_id}) => !c.has(_id))\r\n    return (\r\n        <>\r\n        {avBizs.length >= 1 ? <List>\r\n            {avBizs.map((biz, index) => (<BizLot\r\n            key={index}\r\n            biz={biz}/>\r\n            ))}\r\n        </List> : \r\n        <Stack direction=\"column\"\r\n        justifyContent=\"space-evenly\"\r\n        alignItems=\"center\">\r\n        <Toolbar/>\r\n        <BusinessCenterIcon color=\"disabled\" sx={{ fontSize: 40 }} />\r\n        <Typography variant=\"subtitle1\">Нет доступного бизнеса</Typography>\r\n        <Typography variant=\"caption\">Вы скупили всё</Typography>\r\n        </Stack>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BizList","import { Button, Card, CardMedia, CardContent, CardActions, Grid, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\n\r\nfunction CarLot({car,isMy}) {\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const cars = useSelector((state) => state.cars.cars)\r\n    const myCars = cars.filter(({_id}) => user.car.includes(_id))\r\n    const carsTime = myCars.map(item => item.time).reduce((prev, curr) => prev + curr, 0)\r\n    const [ disabled, setDisabled ] = React.useState(true)\r\n\r\n    React.useEffect(()=>{\r\n        if(user.balance >= car.price) setDisabled(false)\r\n        if(user.balance < car.price) setDisabled(true)\r\n    },[user])\r\n\r\n    const buyCar = () => {\r\n        const newBalance = user.balance - car.price\r\n\t\tconst myCars = [...user.car,car._id]\r\n        const myEnergy = user.maxEnergy + car.energy\r\n        const myTime = user.time + car.time\r\n        if(myTime > 14){\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                car: myCars,\r\n                maxEnergy: myEnergy,\r\n                time: 14,\r\n            }\r\n            dispatch(setUser(fields))\r\n        } else {\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                car: myCars,\r\n                maxEnergy: myEnergy,\r\n                time: myTime,\r\n            }\r\n            dispatch(setUser(fields))\r\n        }\r\n    }\r\n\r\n    const sellCar = () => {\r\n\t\tconst newBalance = user.balance + car.sellPrice\r\n\t\tconst myCars1 = myCars.filter((car) => car._id !== isMy)\r\n        const myEnergy = user.maxEnergy - car.energy\r\n        if (carsTime == car.time) {\r\n            const myTime = user.time - car.time\r\n            if (myTime < 10) {\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: 10,\r\n                }\r\n                dispatch(setUser(fields))\r\n            } else if(myTime > 14){\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: 14,\r\n                }\r\n                dispatch(setUser(fields))\r\n            } else {\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: myTime,\r\n                }\r\n                dispatch(setUser(fields))\r\n            }\r\n        } else {\r\n            const lastCarTime = carsTime - car.time\r\n            const myTime = 10 + lastCarTime\r\n            if (myTime < 10) {\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: 10,\r\n                }\r\n                dispatch(setUser(fields))\r\n            }else if(myTime > 14){\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: 14,\r\n                }\r\n                dispatch(setUser(fields))\r\n            } else {\r\n                const fields = {\r\n                    ...user,\r\n                    balance: newBalance,\r\n                    car: myCars1.map(item => item._id),\r\n                    maxEnergy: myEnergy,\r\n                    time: myTime,\r\n                }\r\n                dispatch(setUser(fields))\r\n            }\r\n        }\r\n        \r\n\t}\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    return (\r\n        <Grid item>\r\n        <Card variant=\"outlined\">\r\n        <CardMedia\r\n            component=\"img\"\r\n            height=\"140\"\r\n            image={`https://financial-freedom-game.ru${car.imageUrl}`}\r\n        />\r\n        <CardContent>\r\n            {isMy ? <Typography gutterBottom variant=\"subtitle2\">{car.name}</Typography> : <Typography gutterBottom variant=\"h6\">\r\n            Цена: {car.price} K\r\n            </Typography>}\r\n            {isMy ? <Typography gutterBottom variant=\"body2\"> Цена: {car.price} K</Typography> : <Typography gutterBottom variant=\"subtitle2\">{car.name}</Typography>}\r\n            <Typography variant=\"caption\">\r\n                Время: <b>+{car.time}ч</b><br/>\r\n                Энергия: <b>+{car.energy}</b><br/>\r\n                Затраты в месяц: <b>{car.expenses} К</b><br/>\r\n                Цена продажи: <b>{car.sellPrice} К</b><br/>\r\n            </Typography>\r\n        </CardContent>\r\n        <CardActions>\r\n            {isMy ? <Button size=\"small\" onClick={()=>sellCar()}>Продать</Button>:\r\n            <Button disabled={disabled} size=\"small\" onClick={()=>buyCar()}>Купить</Button>}\r\n        </CardActions>\r\n        </Card></Grid>\r\n  )\r\n}\r\n\r\nexport default CarLot","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Stack, Toolbar, Typography } from '@mui/material';\r\nimport { grey } from '@mui/material/colors';\r\nimport CarLot from '../../components/CarLot';\r\nimport CarCrashIcon from '@mui/icons-material/CarCrash';\r\n\r\nfunction CarList() {\r\n    const user = useSelector((state) => state.user.user)\r\n\tconst cars = useSelector((state) => state.cars.cars)\r\n    const c = new Set(user.car)\r\n\tconst avCars = cars.filter(({_id}) => !c.has(_id))\r\n\r\n    function byField(field) {\r\n        return (a, b) => a[field] > b[field] ? 1 : -1;\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {avCars.length >= 1 ? <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"column\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        >\r\n            {avCars.sort(byField('price')).map((car, index) => (\r\n            <CarLot key={index} car={car}/>\r\n            ))}\r\n        </Grid> : <Stack direction=\"column\"\r\n        justifyContent=\"space-evenly\"\r\n        alignItems=\"center\">\r\n        <Toolbar/>\r\n        <CarCrashIcon color=\"disabled\" sx={{ fontSize: 40 }} />\r\n        <Typography variant=\"subtitle1\">Нет доступного транспорта</Typography>\r\n        <Typography variant=\"caption\">Вы скупили всё</Typography>\r\n        </Stack> }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CarList","import { Button, Card, CardMedia, CardContent, CardActions, Grid, Typography, Stack } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\n\r\nfunction HouseLot({house, isMy, isRent}) {\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const houses = useSelector((state) => state.houses.houses)\r\n    const myHouses = houses.filter(({_id}) => user.house.includes(_id))\r\n    const rentHouses = houses.filter(({_id}) => user.rent.includes(_id))\r\n    const [ disabled, setDisabled ] = React.useState(true)\r\n\r\n    React.useEffect(()=>{\r\n        if(isMy){\r\n            if(isRent){\r\n                setDisabled(false)\r\n            } else {\r\n                if(myHouses.length > 1) setDisabled(false)\r\n                if(myHouses.length <= 1) setDisabled(true)\r\n            }\r\n        } else {\r\n            if(user.balance >= house.price) setDisabled(false)\r\n            if(user.balance < house.price) setDisabled(true)\r\n        }\r\n    },[isMy, isRent, myHouses, user])\r\n\r\n    const buyHouse = () => {\r\n        const newBalance = user.balance - house.price\r\n        const myHouse = [...user.house, house._id]\r\n        const myEnergy = user.maxEnergy + house.energy\r\n        const fields = {\r\n            ...user,\r\n            balance: newBalance,\r\n            house: myHouse,\r\n            maxEnergy: myEnergy,\r\n        }\r\n        dispatch(setUser(fields))\r\n    }\r\n\r\n    const sellHouse = () => {\r\n\t\tconst newBalance = user.balance + house.price\r\n        if(!isRent){\r\n            const myHouse = myHouses.filter((house) => house._id !== isMy)\r\n            const myEnergy = user.maxEnergy - house.energy\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                house: myHouse.map(item => item._id),\r\n                maxEnergy: myEnergy,\r\n            }\r\n            dispatch(setUser(fields))\r\n        } else {\r\n            const myHouse = rentHouses.filter((house) => house._id !== isMy)\r\n            const myEnergy = user.maxEnergy - house.energy\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                rent: myHouse.map(item => item._id),\r\n                maxEnergy: myEnergy,\r\n            }\r\n            dispatch(setUser(fields))\r\n        }\r\n\t}\r\n\r\n    const rentHouse = () => {\r\n\t\tconst myHouse = myHouses.filter((house) => house._id !== isMy)\r\n        const myEnergy = user.maxEnergy - house.energy\r\n        const rentHouse = [...user.rent,house._id]\r\n        const myRents = houses.filter(({_id}) => rentHouse.includes(_id))\r\n        const sumRent = myRents.map(item => item.rentPrice).reduce((prev, curr) => prev + curr, 0)\r\n        if(sumRent > 1000){\r\n            const fields = {\r\n                ...user,\r\n                prof: 'Инвестор',\r\n                house: myHouse.map(item => item._id),\r\n                maxEnergy: myEnergy,\r\n                rent: rentHouse,\r\n            }\r\n            dispatch(setUser(fields))\r\n        } else {\r\n            const fields = {\r\n                ...user,\r\n                house: myHouse.map(item => item._id),\r\n                maxEnergy: myEnergy,\r\n                rent: rentHouse,\r\n            }\r\n            dispatch(setUser(fields))\r\n        }\r\n\t}\r\n    \r\n    const derentHouse = () => {\r\n        const myHouses = [...user.house, house._id]\r\n        const myEnergy = user.maxEnergy + house.energy\r\n        const rentHouse = rentHouses.filter((h) => h._id !== house._id)\r\n\t\tconst fields = {\r\n\t\t\t...user,\r\n\t\t\thouse: myHouses,\r\n            maxEnergy: myEnergy,\r\n            rent: rentHouse.map(item => item._id),\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n\t}\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    return (\r\n        <Grid item>\r\n        <Card variant=\"outlined\">\r\n        <CardMedia\r\n            component=\"img\"\r\n            height=\"140\"\r\n            image={`https://financial-freedom-game.ru${house.imageUrl}`}\r\n        />\r\n        <CardContent>\r\n            {isMy ? <Stack direction=\"row\"><Typography gutterBottom variant=\"subtitle2\">{house.name}</Typography>\r\n            {isRent && <Typography variant=\"subtitle2\" sx={{marginLeft:'auto'}}>в аренде</Typography>}</Stack> : <Typography gutterBottom variant=\"h6\">\r\n            Цена: {house.price} K\r\n            </Typography>}\r\n            {isMy ? <Typography gutterBottom variant=\"body2\">Цена: {house.price} K</Typography> : <Typography gutterBottom variant=\"subtitle2\">{house.name}</Typography>}\r\n            <Typography variant=\"caption\">\r\n                Энергия: <b>+{house.energy}</b><br/>\r\n                Затраты в месяц: <b>{house.expenses} К</b><br/>\r\n                Сдача в аренду: <b>{house.rentPrice} К/мес</b>\r\n            </Typography>\r\n        </CardContent>\r\n        <CardActions>\r\n        {isMy ? <><Button disabled={disabled} size=\"small\" onClick={()=>sellHouse()}>Продать</Button>\r\n        {isRent ? <Button disabled={disabled} size=\"small\" onClick={()=>derentHouse()}>Убрать с аренды</Button> : \r\n        <Button disabled={disabled} size=\"small\" onClick={()=>rentHouse()}>Сдать в аренду</Button>}</>:\r\n            <Button disabled={disabled} size=\"small\" onClick={()=>buyHouse()}>Купить</Button>}\r\n        </CardActions>\r\n        </Card></Grid>\r\n  )\r\n}\r\n\r\nexport default HouseLot","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Stack, Toolbar, Typography } from '@mui/material';\r\nimport { grey } from '@mui/material/colors';\r\nimport HouseLot from '../../components/HouseLot';\r\nimport MapsHomeWorkIcon from '@mui/icons-material/MapsHomeWork';\r\n\r\nfunction HouseList() {\r\n    const user = useSelector((state) => state.user.user)\r\n\tconst houses = useSelector((state) => state.houses.houses)\r\n    const c = new Set(user.house)\r\n\tconst avHouses = houses.filter(({_id}) => !c.has(_id))\r\n    const c2 = new Set(user.rent)\r\n\tconst avHouses2 = avHouses.filter(({_id}) => !c2.has(_id))\r\n\r\n    function byField(field) {\r\n        return (a, b) => a[field] > b[field] ? 1 : -1;\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {avHouses2.length >= 1 ? <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"column\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        >\r\n            {avHouses2.sort(byField('price')).map((house, index) => (<HouseLot\r\n            key={index}\r\n            house={house}/>\r\n            ))}\r\n        </Grid> : <Stack direction=\"column\"\r\n        justifyContent=\"space-evenly\"\r\n        alignItems=\"center\">\r\n        <Toolbar/>\r\n        <MapsHomeWorkIcon color=\"disabled\" sx={{ fontSize: 40 }} />\r\n        <Typography variant=\"subtitle1\">Нет доступной недвижимости</Typography>\r\n        <Typography variant=\"caption\">Вы скупили всё</Typography>\r\n        </Stack>}</>\r\n    )\r\n}\r\n\r\nexport default HouseList","import { Toolbar, Paper, Tab, Tabs, Container, Typography } from '@mui/material'\r\nimport React from 'react'\r\n\r\nimport HandshakeIcon from '@mui/icons-material/Handshake';\r\n\r\nimport BizList from './shop/BizList';\r\nimport CarList from './shop/CarList';\r\nimport HouseList from './shop/HouseList';\r\nimport Head from '../components/Head';\r\nimport { Header } from '../components/Header';\r\nimport BottomNav from '../components/BottomNav';\r\nimport { PAGE_PROPERTY } from '../routers';\r\nimport { Panel } from '@vkontakte/vkui';\r\n\r\nfunction Property({fetchedUser}) {\r\n    const [ value, setValue ] = React.useState(\"one\")\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    }\r\n\r\n    const Info = (\r\n    <>\r\n        <HandshakeIcon />\r\n        <Typography>\r\n            На вкладке <b>СДЕЛКИ</b> можно купить бизнес, транспорт, недвижимость.<br/><br/>\r\n            В начале для покупки бизнеса, помимо денег, <b>необходимо</b> наличие свободного времени.<br/>\r\n            При <b>покупке</b> бизнеса ценой более 20 000 К и 50 000 К <b>деятельность</b> игрока меняется на <b>'Средний бизнес'</b> и <b>'Крупный бизнес'</b> соответственно.<br/><br/>\r\n            Если у игрока деятельность <b>'Средний бизнес', 'Крупный бизнес' и 'Инвестор'</b> для покупки бизнеса наличие свободного времени не требуется.<br/><br/>\r\n            Недвижимость <b>увеличивает</b> максимальное количество энергии.<br/><br/>\r\n            Транспорт <b>увеличивает</b> время и максимальную энергию.\r\n        </Typography>\r\n    </>\r\n    )\r\n\r\n    return (\r\n        <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius:0 }}>\r\n            <Head name={'Сделки'}/>\r\n            <Container>\r\n            <Header fetchedUser={fetchedUser} info={Info}/>\r\n            <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            textColor=\"secondary\"\r\n            indicatorColor=\"secondary\"\r\n            >\r\n                <Tab value=\"one\" label=\"Бизнес\" />\r\n                <Tab value=\"two\" label=\"Транспорт\" />\r\n                <Tab value=\"three\" label=\"Недвижимость\" />\r\n            </Tabs>\r\n            \r\n            {value === 'one'&&<BizList/>}\r\n            {value === 'two'&&<CarList/>}\r\n            {value === 'three'&&<HouseList/>}\r\n            <Toolbar/>\r\n            <BottomNav value={PAGE_PROPERTY}/>\r\n            </Container>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default Property","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser, setExpenditure } from '../../redux/slices/userSlice';\r\nimport axios from '../../axios.js'\r\n\r\nimport { IconButton, Toolbar, Typography, Stack, List, ListItem, ListItemText, ListItemButton, Container, Button, Modal, Box } from '@mui/material';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\n\r\nfunction Report() {\r\n  const user = useSelector((state) => state.user.user)\r\n  const cars = useSelector((state) => state.cars.cars)\r\n  const houses = useSelector((state) => state.houses.houses)\r\n  const bizs = useSelector((state) => state.bizs.bizs)\r\n  \r\n  const myHouses = houses.filter(({_id}) => user.house.includes(_id))\r\n  const sumHouses = myHouses.map(item => item.price).reduce((prev, curr) => prev + curr, 0)\r\n  const sumHouseExp = myHouses.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n  const myRents = houses.filter(({_id}) => user.rent.includes(_id))\r\n  const sumRent = myRents.map(item => item.rentPrice).reduce((prev, curr) => prev + curr, 0)\r\n  const sumRentExp = myRents.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n  \r\n  const myCars = cars.filter(({_id}) => user.car.includes(_id))\r\n  const sumCars = myCars.map(item => item.price).reduce((prev, curr) => prev + curr, 0)\r\n\tconst sumCarExp = myCars.map(item => item.expenses).reduce((prev, curr) => prev + curr, 0)\r\n  \r\n  const myBizs = bizs.filter(({_id}) => user.bizs.includes(_id))\r\n  const sumBizProfit = myBizs.map(item => item.maxProfit).reduce((prev, curr) => prev + curr, 0)\r\n\t\r\n  const sumCredits = user.credits.map(item => item.amount).reduce((prev, curr) => prev + curr, 0)\r\n  const sumCreditsPayments = user.credits.map(item => item.payment).reduce((prev, curr) => prev + curr, 0)\r\n\t\r\n\r\n  const [disabled, setDisabled] = React.useState(true);\r\n  const [open, setOpen] = React.useState(false);\r\n  const dispatch = useDispatch()\r\n\r\n\r\n  React.useEffect(() => {\r\n    if(user.debts > 0) setDisabled(false)\r\n  },[user])\r\n\r\n  const payOff = () => {\r\n\t\tif(user.balance < user.debts){\r\n      setOpen(true)\r\n    } else\r\n    {\r\n      const newBalance = user.balance - user.debts\r\n      const fields = {\r\n\t\t\t...user,\r\n\t\t\tbalance: newBalance,\r\n      debts: 0,\r\n\t\t}\r\n    dispatch(setUser(fields))\r\n    dispatch(setExpenditure(3))\r\n\t\t}\r\n  };\r\n\r\n  const payCreditDebt = (_id, amount, summ, payment) => {\r\n    if(summ > user.balance){\r\n        setOpen(true)\r\n    }else{\r\n        const newBalance = user.balance - summ\r\n        \r\n        const myCredits = user.credits.filter(({id}) => id != _id)\r\n        \r\n        const newCredit = {\r\n          id: _id,\r\n          amount: amount - summ,\r\n          debt: 0,\r\n          payment: payment,\r\n        }\r\n        \r\n        if(newCredit.amount > 0){\r\n          const fields = {\r\n            ...user,\r\n            balance: newBalance,\r\n            credits: [...myCredits, newCredit].sort((x, y) => x.id - y.id),\r\n          }\r\n          dispatch(setUser(fields))\r\n        } else {\r\n          const fields = {\r\n            ...user,\r\n            balance: newBalance,\r\n            credits: myCredits.sort((x, y) => x.id - y.id),\r\n          }\r\n          dispatch(setUser(fields))\r\n        }\r\n    }\r\n}\r\n\r\n  const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n  }\r\n\r\n  const style = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 250,\r\n    bgcolor: 'white',\r\n    borderRadius: '10px',\r\n    boxShadow: 24,\r\n    p: 4,\r\n  };\r\n\r\n  return (\r\n    <Container disableGutters>\r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Деятельность:</Typography>\r\n        <Typography sx={{marginLeft:'auto'}} variant=\"subtitle1\">{user.prof}&nbsp;&nbsp;&nbsp;&nbsp;</Typography>\r\n      </Stack>\r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Долги</Typography>\r\n      </Stack>\r\n      <List>\r\n        {user.credits.map((credit,index)=>(\r\n                    <ListItem \r\n                    sx={{ marginTop: '10px'}}\r\n                    key={index}\r\n                    disablePadding\r\n                    secondaryAction={<Stack alignItems=\"flex-end\">\r\n                        <Typography variant=\"body1\">Долг: {credit.debt} K</Typography>\r\n                        <Button disabled={!credit.debt > 0} onClick={()=>payCreditDebt(credit.id, credit.amount, credit.debt, credit.payment)} size=\"small\">Оплатить</Button>\r\n                        </Stack>}>\r\n                      <ListItemText primary={`Кредит от ${new Date(credit.id).toLocaleDateString('ru-RU', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        })}`} \r\n                        secondary={<Typography variant=\"caption\">Ежемесячный платеж {credit.payment} K</Typography>} />\r\n                    </ListItem>\r\n                ))}\r\n        <ListItem\r\n          disablePadding\r\n          secondaryAction={<Stack alignItems=\"flex-end\">\r\n              <Typography variant=\"body1\">{user.debts} K</Typography>\r\n              <Button disabled={!user.debts > 0} onClick={()=>payOff()} size=\"small\">Погасить</Button>\r\n              </Stack>}>\r\n          <ListItemText primary={'Задолженность на сегодня'} \r\n              secondary={'Погашать необходимо ежегодно'} />\r\n        </ListItem>\r\n      </List>\r\n      \r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Доходы</Typography>\r\n      </Stack>\r\n      <List>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'green' }}>~ {Math.round((user.deposit.amount * 0.13)/12)} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Дивиденды</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'green' }}>{sumRent} К/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Доход от аренды</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'green' }}>{user.salary} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Зарплата</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'green' }}>~ {sumBizProfit} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Доход от бизнеса</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"subtitle1\" sx={{ color: 'green' }}>~ {(Math.round((user.deposit.amount * 0.13)/12)) + sumRent + user.salary + sumBizProfit} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography sx={{ color: 'green' }} variant=\"subtitle1\">Итого</Typography>} />\r\n        </ListItem>\r\n      </List>\r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Расходы</Typography>\r\n      </Stack>\r\n      <List>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'red' }}>{sumCreditsPayments} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Платежи по кредитам</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'red' }}>{sumHouseExp + sumRentExp} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Расходы на недвижимость</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'red' }}>{sumCarExp} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Расходы на транспорт</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'red' }}>{user.expenses} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Общие расходы</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body2\" sx={{ color: 'red' }}>{user.children * 5} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Расходы на детей</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"subtitle1\" sx={{ color: 'red' }}>{(user.children * 5) + user.expenses + sumCarExp + sumHouseExp + sumRentExp + sumCreditsPayments} K/мес</Typography>}>\r\n          <ListItemText primary={<Typography sx={{ color: 'red' }} variant=\"subtitle1\">Итого</Typography>} />\r\n        </ListItem>\r\n      </List>\r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Активы</Typography>\r\n      </Stack>\r\n      <List>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body1\">{user.deposit.amount} K</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Вклады</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body1\">{sumHouses} K</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Стоимость недвижимости</Typography>} />\r\n        </ListItem>\r\n        <ListItem \r\n        disablePadding \r\n        secondaryAction={\r\n          <Typography variant=\"body1\">{sumCars} K</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Стоимость транспорта</Typography>} />\r\n        </ListItem>\r\n      </List>\r\n      <Stack direction=\"row\">\r\n        <Typography variant=\"subtitle1\">Пассивы</Typography>\r\n      </Stack>\r\n      <List>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n          <Typography variant=\"body1\">{sumCredits} K</Typography>}>\r\n          <ListItemText primary={<Typography variant=\"body2\">Кредиты на сумму</Typography>}/>\r\n        </ListItem>\r\n      </List>\r\n      <Modal\r\n      open={open}\r\n      onClose={()=>setOpen(false)}\r\n      >\r\n        <Box sx={style}>\r\n          <Typography>\r\n            Недостаточно средств 😥\r\n          </Typography>\r\n        </Box>\r\n      </Modal>\r\n      <Toolbar/>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Report","import { Box, Button, FormControl, Select, MenuItem, InputLabel, Grid, List, ListItem, ListItemText, Typography, Stack, Modal } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../../redux/slices/userSlice';\r\nimport axios from '../../axios.js'\r\n\r\nfunction Credit() {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector((state) => state.user.user)\r\n    const [amount, setAmount] = React.useState('');\r\n    const [term, setTerm] = React.useState('');\r\n    const [payment, setPayment] = React.useState(0);\r\n    const [creditAmount, setCreditAmount] = React.useState('');\r\n    const [canCal, setCanCal] = React.useState(false);\r\n    const [calculated, setCalculated] = React.useState(false);\r\n    const [open, setOpen] = React.useState(false);\r\n    const [creditLimit, setCreditLimit] = React.useState(false);\r\n    \r\n    const handleOpen = () => setOpen(true);\r\n    const handleClose = () => setOpen(false);\r\n\r\n    const handleChange = (event) => {\r\n        setAmount(event.target.value);\r\n    };\r\n    \r\n    const handleChangeTerm = (event) => {\r\n        setTerm(event.target.value);\r\n    };\r\n\r\n    const calculate = () => {\r\n        setPayment(Math.round((((amount*0.18)*(term/12))+amount)/term))\r\n        setCreditAmount((Math.round((((amount*0.18)*(term/12))+amount)/term))*term)\r\n        setCalculated(true)\r\n    }\r\n\r\n    const takeCredit = () => {\r\n        if(user.credits.length >= 5){\r\n            setCreditLimit(true)\r\n        } else\r\n        {const date = +new Date\r\n        const terms = {\r\n            id: date,\r\n            amount: creditAmount,\r\n            debt: 0,\r\n            payment: payment,\r\n        }\r\n        const myCredits = [...user.credits, terms]  //погашение кредита, убрать из массива по айди\r\n        const newBalance = user.balance + amount\r\n        const fields = {\r\n\t\t\t...user,\r\n            balance: newBalance,\r\n            credits: myCredits.sort((x, y) => x.id - y.id),\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n\t\t}\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    const payOff = (_id, summ) => {\r\n        if(summ > user.balance){\r\n            setOpen(true)\r\n        }else{\r\n            const newBalance = user.balance - summ\r\n\t        const myCredits = user.credits.filter(({id}) => id != _id)\r\n            const fields = {\r\n                ...user,\r\n                balance: newBalance,\r\n                credits: myCredits.sort((x, y) => x.id - y.id),\r\n            }\r\n            dispatch(setUser(fields))\r\n            \r\n        }\r\n    }\r\n\r\n    React.useEffect(()=>{\r\n        if(amount != '' && term != ''){\r\n            setCanCal(true)\r\n        }\r\n        \r\n    },[term,amount])\r\n\r\n    const style = {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        width: 250,\r\n        bgcolor: 'white',\r\n        borderRadius: '10px',\r\n        boxShadow: 24,\r\n        p: 4,\r\n      };\r\n\r\n    return (\r\n        <Box sx={{ width: '100%' }} >\r\n            <Typography variant=\"subtitle1\">Оформить кредит</Typography>\r\n            <Grid container spacing={1}>\r\n                <Grid item xs={6}>\r\n                    <FormControl fullWidth sx={{ marginTop: '10px'}} error>\r\n                        <InputLabel id=\"credit-amount-label\">Сумма</InputLabel>\r\n                        <Select\r\n                        labelId=\"credit-amount-label\"\r\n                        id=\"credit-amount-select\"\r\n                        value={amount}\r\n                        label=\"Amount\"\r\n                        onChange={handleChange}\r\n                        >\r\n                        <MenuItem value={100}>100 К</MenuItem>\r\n                        <MenuItem value={200}>200 К</MenuItem>\r\n                        <MenuItem value={500}>500 К</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <FormControl fullWidth sx={{ marginTop: '10px'}}>\r\n                        <InputLabel id=\"credit-term-label\">Срок</InputLabel>\r\n                        <Select\r\n                        labelId=\"credit-term-label\"\r\n                        id=\"credit-term-select\"\r\n                        value={term}\r\n                        label=\"Term\"\r\n                        onChange={handleChangeTerm}\r\n                        >\r\n                        <MenuItem value={12}>12 мес</MenuItem>\r\n                        <MenuItem value={24}>24 мес</MenuItem>\r\n                        <MenuItem value={60}>60 мес</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </Grid>\r\n            </Grid>\r\n            <Typography variant=\"caption\">Расчитать и оформить кредит под ~18% годовых</Typography>\r\n            <Stack direction={'column'}>\r\n            <Button sx={{ marginTop: '15px'}} disabled={!canCal} size=\"small\" variant=\"contained\" onClick={()=>calculate()}>Рассчитать</Button></Stack>\r\n            {calculated && <List>\r\n                <ListItem \r\n                disablePadding\r\n                secondaryAction={\r\n                <Typography variant=\"body1\">{payment} K</Typography>}>\r\n                <ListItemText primary=\"Ежемесячный платеж\" />\r\n                </ListItem>\r\n                <ListItem \r\n                disablePadding\r\n                secondaryAction={\r\n                <Typography variant=\"body1\">{creditAmount} K</Typography>}>\r\n                <ListItemText primary=\"Общая выплата\" />\r\n                </ListItem>\r\n                <ListItem \r\n                disablePadding\r\n                secondaryAction={\r\n                <Typography variant=\"body1\">{amount} K</Typography>}>\r\n                <ListItemText primary=\"Сумма кредита\" />\r\n                </ListItem>\r\n                <Stack direction={'column'}>\r\n                <Button onClick={()=>takeCredit()} sx={{ marginTop: '10px'}} disabled={!canCal} size=\"small\" variant=\"contained\">Оформить</Button></Stack>\r\n            </List>}\r\n            <List>\r\n                {user.credits.length >= 1 && <Typography variant=\"overline\">Оформленные</Typography>}\r\n                {user.credits.map((credit,index)=>(\r\n                    <ListItem \r\n                    sx={{ marginTop: '10px'}}\r\n                    key={index}\r\n                    disablePadding\r\n                    secondaryAction={<Stack alignItems=\"flex-end\">\r\n                        <Typography variant=\"body1\">Сумма {credit.amount} K</Typography>\r\n                        <Button onClick={()=>payOff(credit.id,credit.amount)} size=\"small\">Погасить</Button>\r\n                        </Stack>}>\r\n                    <ListItemText primary={`Кредит от ${new Date(credit.id).toLocaleDateString('ru-RU', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        })}`} \r\n                        secondary={<Typography variant=\"caption\">Ежемесячный платеж {credit.payment} K</Typography>} />\r\n                    </ListItem>\r\n                ))}\r\n            </List>\r\n            <Modal\r\n                open={open}\r\n                onClose={handleClose}\r\n            >\r\n                <Box sx={style}>\r\n                    <Typography>\r\n                        Недостаточно средств 😥\r\n                    </Typography>\r\n                </Box>\r\n            </Modal>\r\n            <Modal\r\n                open={creditLimit}\r\n                onClose={()=>setCreditLimit(false)}\r\n            >\r\n                <Box sx={style}>\r\n                    <Typography>\r\n                        Максимальное количество кредитов 😥\r\n                    </Typography>\r\n                </Box>\r\n            </Modal>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Credit","import { Box, TextField, Typography, Stack, Button, Input, ListItem, ListItemText, List } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../../redux/slices/userSlice';\r\nimport axios from '../../axios.js'\r\n\r\nfunction Deposit() {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector((state) => state.user.user)\r\n    const [amount, setAmount] = React.useState(0)\r\n    const [withdrawAmount, setWithdrawAmount] = React.useState(0)\r\n    const [disabled, setDisabled] = React.useState(true)\r\n    const [disabledWithdraw, setDisabledWithdraw] = React.useState(true)\r\n\r\n    React.useEffect(()=>{\r\n        if(amount>user.balance) setDisabled(true)\r\n        if(amount<=user.balance) setDisabled(false)\r\n        if(amount<=0) setDisabled(true)\r\n    },[ amount, user ])\r\n\r\n    React.useEffect(()=>{\r\n        if(withdrawAmount>user.deposit.amount) setDisabledWithdraw(true)\r\n        if(withdrawAmount<=user.deposit.amount) setDisabledWithdraw(false)\r\n        if(withdrawAmount<=0) setDisabledWithdraw(true)\r\n    },[ withdrawAmount, user ])\r\n\r\n    const handleInvestChange = (event) => {\r\n        setAmount(event.target.value)\r\n    }\r\n\r\n    const handleWithdrawChange = (event) => {\r\n        setWithdrawAmount(event.target.value)\r\n    }\r\n    \r\n    const invest = () => {\r\n        const newDeposit = {\r\n            amount: user.deposit.amount + Number(amount),\r\n            date: +new Date + 120000,\r\n        }\r\n\r\n        const newBalance = user.balance - Number(amount)\r\n\r\n        const fields = {\r\n\t\t\t...user,\r\n            balance: newBalance,\r\n            deposit: newDeposit,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n    }\r\n\r\n    const withdraw = () => {\r\n        const newDeposit = {\r\n            amount: user.deposit.amount - Number(withdrawAmount),\r\n            date: +new Date + 120000,\r\n        }\r\n\r\n        const newBalance = user.balance + Number(withdrawAmount)\r\n\r\n        const fields = {\r\n\t\t\t...user,\r\n            balance: newBalance,\r\n            deposit: newDeposit,\r\n\t\t}\r\n\t\tdispatch(setUser(fields))\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    return (\r\n        <Box sx={{ width: '100%' }} >\r\n            <Stack direction={'column'} spacing={1}>\r\n                <List>\r\n                <ListItem \r\n                    disablePadding\r\n                    secondaryAction={\r\n                    <Typography variant=\"body1\">{user.deposit.amount} K</Typography>}>\r\n                    <ListItemText primary=\"Вклад\" />\r\n                </ListItem></List>\r\n                <Typography variant=\"subtitle1\">Вложить</Typography>\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label=\"Сумма\"\r\n                    type=\"number\"\r\n                    onChange={handleInvestChange}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                />\r\n                <Typography variant=\"caption\">Дивидендная доходность ~13% в год</Typography>\r\n                <Button sx={{ marginTop: '15px'}} disabled={disabled} size=\"small\" variant=\"contained\" onClick={()=>invest()}>Вложить</Button>\r\n                \r\n                <Typography variant=\"subtitle1\">Снять</Typography>\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label=\"Сумма\"\r\n                    type=\"number\"\r\n                    onChange={handleWithdrawChange}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                />\r\n                <Button sx={{ marginTop: '15px'}} disabled={disabledWithdraw} size=\"small\" variant=\"contained\" onClick={()=>withdraw()}>Снять</Button>\r\n            </Stack>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Deposit","import { Paper, Tab, Tabs, Container, Typography } from '@mui/material'\r\nimport React from 'react'\r\n\r\nimport AccountBalanceIcon from '@mui/icons-material/AccountBalance';\r\n\r\nimport Report from './bank/Report.jsx';\r\nimport Credit from './bank/Credit.jsx';\r\nimport Deposit from './bank/Deposit.jsx';\r\nimport { Header } from '../components/Header.jsx';\r\nimport BottomNav from '../components/BottomNav.jsx';\r\nimport { Panel } from '@vkontakte/vkui';\r\nimport { PAGE_BANK } from '../routers.js';\r\nimport Head from '../components/Head.jsx';\r\n\r\nfunction Bank({fetchedUser}) {\r\n  const [ value, setValue ] = React.useState(\"one\")\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  }\r\n\r\n  const Info = (\r\n    <>\r\n      <AccountBalanceIcon />\r\n      <Typography>\r\n        На вкладке <b>БАНК</b> можно<br/>\r\n        - посмотреть информацию о личных финансах<br/>\r\n        - оформить кредит<br/>\r\n        - сделать вклад<br/>\r\n        - оплатить задолженности\r\n      </Typography>\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius:0 }}>\r\n      <Head name={'Банк'}/>\r\n      <Container>\r\n      <Header fetchedUser={fetchedUser} info={Info}/>\r\n      <Tabs\r\n      value={value}\r\n      onChange={handleChange}\r\n      textColor=\"secondary\"\r\n      indicatorColor=\"secondary\"\r\n      >\r\n        <Tab value=\"one\" label=\"Бухгалтерия\" />\r\n        <Tab value=\"two\" label=\"Кредиты\" />\r\n        <Tab value=\"three\" label=\"Вклады\" />\r\n      </Tabs>\r\n      \r\n      {value === 'one'&&<Report/>}\r\n      {value === 'two'&&<Credit/>}\r\n      {value === 'three'&&<Deposit/>}\r\n      \r\n      <BottomNav value={PAGE_BANK}/>\r\n      </Container>\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default Bank","import { Button, Paper, Stack, CircularProgress, Box, MobileStepper, Typography, } from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Panel } from '@vkontakte/vkui'\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport axios from '../axios.js'\r\nimport { setUser } from '../redux/slices/userSlice.js'\r\nimport { useRouter } from '@happysanta/router'\r\nimport { PAGE_MAIN, PAGE_REGISTER, PAGE_TRAINING, PAGE_SETTINGS } from '../routers.js'\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\r\nimport CurrencyExchangeIcon from '@mui/icons-material/CurrencyExchange';\r\nimport AutoGraphIcon from '@mui/icons-material/AutoGraph';\r\nimport AccessibilityNewIcon from '@mui/icons-material/AccessibilityNew';\r\n\r\nconst steps = [\r\n  {\r\n    label: <CurrencyExchangeIcon color=\"disabled\" sx={{ fontSize: 50, marginBottom: '40px' }}/>,\r\n    description: <Typography>Есть четыре типа тюдей:<br/><br/>  \r\n    E - Наёмные работники<br/> \r\n    S - те кто работает на себя<br/> \r\n    B - владельцы крупного бизнеса<br/> \r\n    I - инвесторы, деньги работают на них<br/> </Typography>,\r\n  },\r\n  {\r\n    label: <AccessibilityNewIcon color=\"disabled\" sx={{ fontSize: 50, marginBottom: '40px' }}/>,\r\n    description:\r\n      <Typography>В этой игре можно пройти весь путь - от наёмного работника до инвестора</Typography>,\r\n  },\r\n  {\r\n    label: <AutoGraphIcon color=\"disabled\" sx={{ fontSize: 50, marginBottom: '40px' }}/>,\r\n    description: <Typography>Это симулятор жизни, который учит людей зарабатывать на инвестициях и улучшать свое финансовое положение.</Typography>,\r\n  },\r\n];\r\n\r\n\r\nfunction Intro({ fetchedUser }) {\r\n  const dispatch = useDispatch()\r\n  const router = useRouter()\r\n  const [firstTime, setFirstTime] = React.useState()\r\n  const [playerChecked, setPlayerChecked] = React.useState(false)\r\n  const [disabled, setDisabled] = React.useState(true)\r\n  const [firstParams, setFirstParams] = React.useState()\r\n\r\n  const getParams = () => {\r\n    bridge.send('VKWebAppGetLaunchParams')\r\n      .then((data) => {\r\n        if (data.vk_app_id) {\r\n          // Параметры запуска получены\r\n          setFirstParams(data)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        // Ошибка\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const getPlayer = async () => {\r\n    var url = new URLSearchParams(firstParams);\r\n\r\n    await axios.get(`/auth/me/${url}`\r\n    ).then(({ data }) => {\r\n      dispatch(setUser(data))\r\n      setPlayerChecked(true)\r\n      setDisabled(false)\r\n      setFirstTime('not')\r\n    }).catch(() => {\r\n      console.log('user not found')\r\n      setFirstTime('yes')\r\n      setPlayerChecked(true)\r\n    })\r\n  }\r\n\r\n  if (fetchedUser) {\r\n    if(!playerChecked){\r\n      getParams()\r\n      if(firstParams){getPlayer()}\r\n    }\r\n  }\r\n\r\n  const theme = useTheme();\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const maxSteps = steps.length;\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  return (\r\n    <Panel centered>\r\n      <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius: 0 }}>\r\n        <Stack\r\n          sx={{ width: '100vw', height: '100vh' }}\r\n          direction=\"column\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n          spacing={1}\r\n        >\r\n          {!firstTime ? <CircularProgress /> : <>{firstTime == 'yes' && <><Box sx={{ width: '80%', p: 2 }}>\r\n            <Box sx={{ width: '100%'}}>\r\n              <Stack\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                {steps[activeStep].label}\r\n              </Stack>\r\n              {steps[activeStep].description}\r\n            </Box>\r\n            <MobileStepper\r\n              sx={{ marginTop: '25px'}}\r\n              variant=\"dots\"\r\n              steps={maxSteps}\r\n              position=\"static\"\r\n              activeStep={activeStep}\r\n              nextButton={\r\n                <Button\r\n                  size=\"small\"\r\n                  onClick={handleNext}\r\n                  disabled={activeStep === maxSteps - 1}\r\n                >\r\n                  \r\n                  {theme.direction === 'rtl' ? (\r\n                    <KeyboardArrowLeft />\r\n                  ) : (\r\n                    <KeyboardArrowRight />\r\n                  )}\r\n                </Button>\r\n              }\r\n              backButton={\r\n                <Button size=\"small\" onClick={handleBack} disabled={activeStep === 0}>\r\n                  {theme.direction === 'rtl' ? (\r\n                    <KeyboardArrowRight />\r\n                  ) : (\r\n                    <KeyboardArrowLeft />\r\n                  )}\r\n                  \r\n                </Button>\r\n              }\r\n            />\r\n            </Box>\r\n            <Button onClick={() => setFirstTime('not')}>Начать</Button></>\r\n          }\r\n            {firstTime == 'not' && <>\r\n              <Button disabled={disabled} onClick={() => router.pushPage(PAGE_MAIN)}>Играть</Button>\r\n              <Button onClick={() => router.pushPage(PAGE_REGISTER)}>Новая игра</Button>\r\n              <Button onClick={() => router.pushPage(PAGE_TRAINING)}>Обучение</Button>\r\n              <Button onClick={() => router.pushPage(PAGE_SETTINGS)}>Настройки</Button></>}</>}\r\n        </Stack>\r\n      </Paper>\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Intro","import { Button, Paper, Typography, Stack, CircularProgress } from '@mui/material'\r\nimport React from 'react'\r\nimport axios from '../axios.js'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useRouter } from '@happysanta/router'\r\nimport { setUser } from '../redux/slices/userSlice.js';\r\nimport { PAGE_MAIN } from '../routers.js';\r\nimport Head from '../components/Head.jsx';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\nfunction Register({ fetchedUser }) {\r\n  const router = useRouter()\r\n  const dispatch = useDispatch()\r\n  const profs = useSelector((state) => state.user.profs)\r\n  const user = useSelector((state) => state.user.user)\r\n  const [open, setOpen] = React.useState(false)\r\n  const [profession, setProfession] = React.useState()\r\n  const [timeLeft, setTimeLeft] = React.useState(0)\r\n  const [isCounting, setIsCounting] = React.useState(true)\r\n  const [params, setParams] = React.useState()\r\n\r\n\r\n  React.useEffect(() => {\r\n    const interval = setInterval(() => {\r\n\r\n      isCounting && setTimeLeft((timeLeft) => (timeLeft >= 10 ? 10 : timeLeft + 1))\r\n\r\n      if (timeLeft == 10 && isCounting) {\r\n        result()\r\n      }\r\n\r\n    }, 200)\r\n    return () => {\r\n      clearInterval(interval)\r\n    }\r\n  }, [timeLeft, isCounting, user])\r\n\r\n  const getRandomIntInclusive = (min, max) => {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются\r\n  }\r\n\r\n  const result = () => {\r\n    const p = getRandomIntInclusive(0, profs.length - 1)\r\n    setProfession(profs[p])\r\n  }\r\n\r\n  const sendToServer = async (data) => {\r\n    const fields = {\r\n      firstName: fetchedUser.first_name,\r\n      photo100: fetchedUser.photo_100,\r\n      userId: fetchedUser.id,\r\n      profId: profession._id,\r\n    }\r\n\r\n    var url = new URLSearchParams(data);\r\n\r\n    await axios.post(`/auth/register/${url}`, fields).then((data) => {\r\n      dispatch(setUser(data.data.user));\r\n    })\r\n\r\n    setOpen(true)\r\n  }\r\n\r\n  const newGameServer = async (data) => {\r\n    const fields = {\r\n        profId: profession._id,\r\n    }\r\n\r\n    var url = new URLSearchParams(data);\r\n\r\n    await axios.patch(`/auth/new/${url}`, fields).then((data) => {\r\n      dispatch(setUser(data.data));\r\n    });\r\n\r\n    setOpen(true)\r\n  }\r\n\r\n  const getProf = async () => {\r\n\r\n    setIsCounting(false)\r\n\r\n    if (Object.keys(user).length == 0) {\r\n      \r\n\r\n      bridge.send('VKWebAppGetLaunchParams')\r\n        .then((data) => {\r\n          if (data.vk_app_id) {\r\n            // Параметры запуска получены\r\n            sendToServer(data)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          // Ошибка\r\n          console.log(error);\r\n        });\r\n        \r\n    } else {\r\n      bridge.send('VKWebAppGetLaunchParams')\r\n        .then((data) => {\r\n          if (data.vk_app_id) {\r\n            // Параметры запуска получены\r\n            newGameServer(data)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          // Ошибка\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius: 0 }}>\r\n      <Head name={'Выбор профессии'} />\r\n      <Stack\r\n        sx={{ width: '100vw', height: '100vh' }}\r\n        direction={'column'}\r\n        alignItems='center'\r\n        justifyContent='top'\r\n        spacing={1}>\r\n        <Typography variant='subtitle2' sx={{ width: '80vw', marginBottom: '20px', marginTop: \"50px\" }}>\r\n          КВАДРАНТ ДЕНЕЖНОГО ПОТОКА – это простой и надежный инструмент, позволяющий распределять людей по группам в соответствии с источником происхождения их денег.<br /><br />\r\n          E (Employee) - Наёмный сотрудник.<br />\r\n          S (Self-Employed) - Работа на себя.<br />\r\n          B (Business Owner) - Владелец бизнеса.<br />\r\n          I (Investor) - Инвестор.<br /><br />\r\n          ЦЕЛЬ ИГРЫ: стать владельцем бизнеса или инвестором.\r\n        </Typography>\r\n        {profession ? <><Typography variant='subtitle1'>Профессия:</Typography>\r\n          <Typography variant='h6'>{profession.profName}</Typography>\r\n          <Typography variant='caption'>Для начала игры необходимо выбрать профессию</Typography>\r\n          <Button disabled={!isCounting} onClick={() => getProf()}>Выбрать</Button></> :\r\n          <CircularProgress />}\r\n        {open && <>\r\n          <Typography variant='caption'>Вы получили профессию <b>{profession.prof}</b></Typography>\r\n          <Typography variant='caption'>Ваша зарплата <b>{profession.salary}</b> К, Вам <b>{profession.age / 12}</b>, количество детей: <b>{profession.childCount}</b>.</Typography>\r\n          <Typography variant='caption'><b>Удачной игры!</b></Typography>\r\n          <Button onClick={() => router.pushPage(PAGE_MAIN)}>Начать</Button>\r\n        </>}\r\n      </Stack>\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default Register\r\n\r\n//Пассивным доходом в игре считаются дивидендные акции и бизнес под управлением менеджера.<br/><br/>","export default __webpack_public_path__ + \"static/media/bank.c624ff42.png\";","export default __webpack_public_path__ + \"static/media/choose.fe9b981e.png\";","export default __webpack_public_path__ + \"static/media/deals.db5c4edc.png\";","import { Box, Button, MobileStepper, Paper } from '@mui/material'\r\nimport { useTheme } from '@mui/material/styles';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\r\n\r\nimport React from 'react'\r\nimport Head from '../components/Head'\r\n\r\nimport bank from '../img/bank.png'\r\nimport choose from '../img/choose.png'\r\nimport deals from '../img/deals.png'\r\nimport header from '../img/header.png'\r\nimport main from '../img/main.png'\r\nimport profile from '../img/profile.png'\r\n\r\n\r\nconst images = [\r\n    {\r\n        label: 'Choose',\r\n        imgPath: choose,\r\n    },\r\n    {\r\n        label: 'Header',\r\n        imgPath: header,\r\n    },\r\n    {\r\n        label: 'Main',\r\n        imgPath: main,\r\n    },\r\n    {\r\n        label: 'Deals',\r\n        imgPath: deals,\r\n    },\r\n    {\r\n        label: 'Bank',\r\n        imgPath: bank,\r\n    },\r\n    {\r\n        label: 'Profile',\r\n        imgPath: profile,\r\n    },\r\n];\r\n\r\nfunction Training() {\r\n    const theme = useTheme();\r\n    const [activeStep, setActiveStep] = React.useState(0);\r\n    const maxSteps = images.length;\r\n\r\n    const handleNext = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleStepChange = (step) => {\r\n        setActiveStep(step);\r\n    };\r\n\r\n    return (\r\n        <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius: 0 }}>\r\n            <Head name={'Обучение'} />\r\n            <SwipeableViews\r\n                axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\r\n                index={activeStep}\r\n                onChangeIndex={handleStepChange}\r\n                enableMouseEvents\r\n            >\r\n                {images.map((step, index) => (\r\n                    <div key={step.label}>\r\n                        {Math.abs(activeStep - index) <= 2 ? (\r\n                            <Box\r\n                                component=\"img\"\r\n                                sx={{\r\n                                    marginLeft: 'auto',\r\n                                    marginRight: 'auto',\r\n                                    display: 'block',\r\n                                    overflow: 'hidden',\r\n                                    width: '75%',\r\n                                }}\r\n                                src={step.imgPath}\r\n                                alt={step.label}\r\n                            />\r\n                        ) : null}\r\n                    </div>\r\n                ))}\r\n            </SwipeableViews>\r\n            <MobileStepper\r\n                variant=\"text\"\r\n                steps={maxSteps}\r\n                position=\"static\"\r\n                activeStep={activeStep}\r\n                nextButton={\r\n                    <Button\r\n                        size=\"small\"\r\n                        onClick={handleNext}\r\n                        disabled={activeStep === maxSteps - 1}\r\n                    >\r\n                       \r\n                        {theme.direction === 'rtl' ? (\r\n                            <KeyboardArrowLeft />\r\n                        ) : (\r\n                            <KeyboardArrowRight />\r\n                        )}\r\n                    </Button>\r\n                }\r\n                backButton={\r\n                    <Button size=\"small\" onClick={handleBack} disabled={activeStep === 0}>\r\n                        {theme.direction === 'rtl' ? (\r\n                            <KeyboardArrowRight />\r\n                        ) : (\r\n                            <KeyboardArrowLeft />\r\n                        )}\r\n                       \r\n                    </Button>\r\n                }\r\n            />\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default Training","export default __webpack_public_path__ + \"static/media/header.9ec04f55.png\";","export default __webpack_public_path__ + \"static/media/main.a67b917a.png\";","export default __webpack_public_path__ + \"static/media/profile.ec4cc714.png\";","import { Paper, Typography, Stack, ToggleButton, ToggleButtonGroup, Button, Checkbox, Link } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setTheme, setUser } from '../redux/slices/userSlice'\r\nimport { useRouter } from '@happysanta/router'\r\nimport axios from '../axios.js'\r\nimport Head from '../components/Head'\r\n\r\nimport DarkModeIcon from '@mui/icons-material/DarkMode'\r\nimport BrightnessAutoIcon from '@mui/icons-material/BrightnessAuto'\r\nimport BrightnessHighIcon from '@mui/icons-material/BrightnessHigh'\r\n\r\nfunction Settings({fetchedUser}) {\r\n  const router = useRouter()\r\n  const dispatch = useDispatch()\r\n  const user = useSelector((state) => state.user.user)\r\n  const [value, setValue] = React.useState('auto')\r\n  const [checkPost, setCheckPost] = React.useState(false)\r\n  const [checkGroup, setCheckGroup] = React.useState(false)\r\n  const [checkMessages, setCheckMessages] = React.useState(false)\r\n  const [checkNotifications, setCheckNotifications] = React.useState(false)\r\n\r\n  const handleTheme = (event, newTheme) => {\r\n    if (newTheme !== null) {\r\n      setValue(newTheme);\r\n      dispatch(setTheme(newTheme))\r\n    }\r\n  };\r\n\r\n  async function joinGroup() {\r\n    bridge.send('VKWebAppJoinGroup', {\r\n      group_id: 218628265\r\n      })\r\n      .then((data) => { \r\n        if (data.result) {\r\n          // Пользователь подписался на сообщество\r\n          setCheckGroup(true)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        // Ошибка\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async function messagesFromGroup() {\r\n    bridge.send('VKWebAppAllowMessagesFromGroup', {\r\n      group_id: 218628265,\r\n      })\r\n      .then((data) => { \r\n        if (data.result) {\r\n          // Пользователь разрешил отправку сообщений от имени сообщества\r\n          setCheckMessages(true)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        // Ошибка\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async function recommend() {\r\n    bridge.send('VKWebAppAddToFavorites')\r\n      .then((data) => { \r\n        if (data.result) {\r\n          // Запись размещена\r\n          setCheckPost(true)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        // Ошибка\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async function notifications() {\r\n    bridge.send('VKWebAppAllowNotifications')\r\n      .then((data) => {\r\n        if (data.result) {\r\n          // Разрешение на отправку уведомлений мини-приложением или игрой получено\r\n          setCheckNotifications(true)\r\n        } else {\r\n          // Ошибка\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        // Ошибка\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (user.promoter == true) {\r\n      setCheckPost(true)\r\n      setCheckGroup(true)\r\n      setCheckMessages(true)\r\n    } else if (checkGroup == true && checkPost == true && checkMessages == true && checkNotifications == true) {\r\n      const fields = {\r\n        ...user,\r\n        freeEnergizerCount: 10,\r\n        promoter: true,\r\n      }\r\n      dispatch(setUser(fields))\r\n      save(fields)\r\n    }\r\n  }, [checkPost, checkGroup, checkMessages, user])\r\n\r\n  return (\r\n    <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius: 0 }}>\r\n      <Head name={'Настройки'}/>\r\n      <Stack\r\n        sx={{ width: '100vw', height: '100vh' }}\r\n        direction=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        spacing={1}\r\n      >\r\n        <ToggleButtonGroup sx={{ marginBottom: \"20px\"}}\r\n          value={value}\r\n          exclusive\r\n          onChange={handleTheme}\r\n          aria-label=\"theme\"\r\n        >\r\n          <ToggleButton value=\"auto\" aria-label=\"left aligned\">\r\n            <BrightnessAutoIcon />\r\n          </ToggleButton>\r\n          <ToggleButton value=\"light\" aria-label=\"centered\">\r\n            <BrightnessHighIcon />\r\n          </ToggleButton>\r\n          <ToggleButton value=\"dark\" aria-label=\"right aligned\">\r\n            <DarkModeIcon />\r\n          </ToggleButton>\r\n        </ToggleButtonGroup>\r\n        {user && <Box sx={{ width: '80vw' }}>\r\n          <Typography variant='caption'>Выполни задания и каждый день количество бесплатных энергетиков увеличится до 10 </Typography>\r\n          <Stack sx={{ marginTop: \"15px\"}} direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Typography variant='caption'>Подписаться на сообщество</Typography>\r\n            {checkGroup?<Checkbox disabled checked />:<Button onClick={()=>joinGroup()}>Подписаться</Button>}\r\n          </Stack>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Typography variant='caption'>Подпишись на лс от сообщества</Typography>\r\n            {checkMessages?<Checkbox disabled checked />:<Button onClick={()=>messagesFromGroup()}>Подписаться</Button>}\r\n          </Stack>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Typography variant='caption'>Подпишись на уведомления</Typography>\r\n            {checkNotifications?<Checkbox disabled checked />:<Button onClick={()=>notifications()}>Подписаться</Button>}\r\n          </Stack>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Typography variant='caption'>Добавь в избранное</Typography>\r\n            {checkPost?<Checkbox disabled checked />:<Button onClick={()=>recommend()}>Добавить</Button>}\r\n          </Stack>\r\n          <Stack sx={{ marginTop: \"15px\"}} direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Button onClick={()=>router.popPage()}>Назад</Button>\r\n          </Stack>\r\n        </Box>}\r\n      </Stack>\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default Settings","import { Button, Paper, CssBaseline, Stack, Toolbar, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useRouter } from '@happysanta/router'\r\nimport axios from '../axios.js'\r\nimport { setUser } from '../redux/slices/userSlice.js'\r\nimport PauseIcon from '@mui/icons-material/Pause'\r\nimport { PAGE_MAIN } from '../routers.js'\r\nimport bridge from \"@vkontakte/vk-bridge\"\r\nimport { Panel } from '@vkontakte/vkui'\r\n\r\nfunction Pause() {\r\n    const [disabled, setDisabled] = React.useState(true)\r\n    const [pauseTime, setPauseTime] = React.useState('')\r\n    const dispatch = useDispatch()\r\n    const router = useRouter()\r\n    const user = useSelector((state) => state.user.user)\r\n\r\n    const checkAd = () => {\r\n\t\tbridge.send('VKWebAppCheckNativeAds', { ad_format: 'reward' })\r\n  \t\t\t.then((data) => {\r\n        \t\tif (data.result) {\r\n\t\t\t\t\tsetDisabled(false)\r\n        \t\t} else {\r\n            \t\tconsole.log('Рекламные материалы не найдены.');\r\n        \t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => { console.log(error); /* Ошибка */  });\r\n\t}\r\n\r\n    checkAd()\r\n\r\n    const showAd = () => {\r\n        bridge.send('VKWebAppShowNativeAds', { ad_format: 'reward' })\r\n            .then((data) => {\r\n                if (data.result) // Успех\r\n                {\r\n                    play()\r\n                }\r\n                else // Ошибка \r\n                    console.log('Ошибка при показе');\r\n            })\r\n            .catch((error) => { console.log(error); })\r\n\t}\r\n\r\n    const play = () => {\r\n        const fields = {\r\n            ...user,\r\n            onGame: true,\r\n            energy: user.maxEnergy,\r\n        }\r\n        dispatch(setUser(fields))\r\n        save(fields)\r\n        router.pushPage(PAGE_MAIN)\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    function parseMillisecondsIntoReadableTime(milliseconds){\r\n        //Get hours from milliseconds\r\n        var hours = milliseconds / (1000*60*60);\r\n        var absoluteHours = Math.floor(hours);\r\n        var h = absoluteHours > 9 ? absoluteHours : '0' + absoluteHours;\r\n      \r\n        //Get remainder from hours and convert to minutes\r\n        var minutes = (hours - absoluteHours) * 60;\r\n        var absoluteMinutes = Math.floor(minutes);\r\n        var m = absoluteMinutes > 9 ? absoluteMinutes : '0' +  absoluteMinutes;\r\n      \r\n        //Get remainder from minutes and convert to seconds\r\n        var seconds = (minutes - absoluteMinutes) * 60;\r\n        var absoluteSeconds = Math.floor(seconds);\r\n        var s = absoluteSeconds > 9 ? absoluteSeconds : '0' + absoluteSeconds;\r\n      \r\n      \r\n        return h + ':' + m + ':' + s;\r\n      }\r\n\r\n    React.useEffect(()=>{\r\n        const interval = setInterval(()=>{\r\n            const t = +new Date();\r\n            setPauseTime(user.datePoint - t)\r\n            if(user.datePoint < t){\r\n\t\t\t\tplay()\r\n            }\r\n        }, 1000)\r\n\t\treturn () => {\r\n            clearInterval(interval)\r\n\t\t\t}\r\n    },[setPauseTime, user]) \r\n\r\n    return (\r\n        <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius:0 }}>\r\n            <Stack\r\n            sx={{ width: '100vw', height: '100vh' }}\r\n            direction=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            >\r\n                <PauseIcon color=\"disabled\"  sx={{ fontSize: 40}} />\r\n                <Typography variant='h6'>ПАУЗА</Typography>\r\n                <Typography variant='caption'>Необходима для восстановления энергии</Typography>\r\n                <Typography variant='caption'>Можно продолжить через:</Typography>\r\n                <Typography variant='h6'>{parseMillisecondsIntoReadableTime(pauseTime)}</Typography>\r\n                <Typography variant='caption'>Можно пропустить посмотрев рекламный ролик</Typography>\r\n                <Button disabled={disabled} onClick={()=>showAd()}>Смотреть рекламу</Button>\r\n            </Stack>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default Pause","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Toolbar, Typography } from '@mui/material';\r\nimport HouseLot from '../../components/HouseLot';\r\nimport CarLot from '../../components/CarLot';\r\n\r\nfunction Home() {\r\n    const user = useSelector((state) => state.user.user)\r\n    const cars = useSelector((state) => state.cars.cars)\r\n    const houses = useSelector((state) => state.houses.houses)\r\n    const myHouses = houses.filter(({_id}) => user.house.includes(_id))\r\n    const myRents = houses.filter(({_id}) => user.rent.includes(_id))\r\n    const myCars = cars.filter(({_id}) => user.car.includes(_id))\r\n    return (\r\n        <>\r\n        <Typography variant=\"overline\">\r\n            Недвижимость\r\n        </Typography>\r\n        <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"column\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        sx={{marginBottom:'10px'}}\r\n        >\r\n            {myHouses.map((house, index) => (<HouseLot\r\n            key={index}\r\n            house={house}\r\n            isMy={house._id}/>\r\n            ))}\r\n        </Grid>\r\n        {myRents.length > 0 && <Typography variant=\"overline\">\r\n            Недвижимость в аренде\r\n        </Typography>}\r\n        <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"column\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        sx={{marginBottom:'10px'}}\r\n        > \r\n            {myRents.map((house, index) => (<HouseLot\r\n            key={house._id}\r\n            house={house}\r\n            isMy={house._id}\r\n            isRent={true}/>\r\n            ))}\r\n        </Grid>\r\n        {myCars.length > 0 && <Typography variant=\"overline\">\r\n            Транспорт\r\n        </Typography>}\r\n        <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"column\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        sx={{marginBottom:'10px'}}\r\n        > \r\n            {myCars.map((car, index) => (\r\n            <CarLot key={car._id} car={car} isMy={car._id}/>\r\n            ))}\r\n        </Grid>\r\n        <Toolbar/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setUser } from '../redux/slices/userSlice';\r\nimport axios from '../axios.js'\r\n\r\nimport { Avatar, Badge, Typography, ListItem, ListItemAvatar, ListItemText, Divider, IconButton, Stack, Collapse, List } from '@mui/material'\r\n\r\nimport PanToolIcon from '@mui/icons-material/PanTool';\r\n\r\nfunction Friend({friend, invisible, disabled }) {\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const sendHi = (_id, userId) => {\r\n        if(invisible == false){     //ответ\r\n            const fields = {\r\n                ...user,\r\n                greetingIn: user.greetingIn.filter((id) => id !== userId),\r\n                disabled: [...user.disabled, userId],\r\n                energizer: user.energizer + 1,\r\n            }\r\n            dispatch(setUser(fields))\r\n            const friendFields = {\r\n                ...friend,\r\n                greetingOut: friend.greetingOut.filter((id) => id !== user.userId),\r\n                disabled: [...friend.disabled, user.userId],\r\n                energizer: friend.energizer + 1,\r\n            }\r\n            saveForFriend(_id,friendFields)\r\n        } else {            //инициация\r\n            const fields = {\r\n                ...user,\r\n                greetingOut: [...user.greetingOut, userId],\r\n            }\r\n            dispatch(setUser(fields))\r\n            const friendFields = {\r\n                ...friend,\r\n                greetingIn: [...friend.greetingIn, user.userId],\r\n            }\r\n            saveForFriend(_id,friendFields)\r\n        }\r\n    }\r\n\r\n    const save = async (data) => {\r\n\t\tawait axios.patch(`/auth/${user._id}`, data)\r\n    }\r\n\r\n    const saveForFriend = async ( _id, data ) => {\r\n\t\tawait axios.patch(`/auth/${_id}`, data)\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <ListItem \r\n        disablePadding\r\n        secondaryAction={\r\n            <IconButton \r\n                onClick={()=>sendHi(friend._id,friend.userId)} \r\n                color=\"primary\" \r\n                variant=\"contained\" \r\n                size=\"small\"\r\n                disabled={disabled}\r\n            ><Badge color=\"secondary\" variant=\"dot\" invisible={invisible}>\r\n                <PanToolIcon/></Badge>\r\n            </IconButton>}>\r\n            <ListItemAvatar onClick={()=>setOpen(!open)}>\r\n                <Avatar src={friend.photo100}/>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={<Typography variant=\"subtitle1\">{friend.firstName}</Typography>}\r\n                secondary={\r\n                        <Typography variant='caption'>Рекорд: {friend.lifesCount} K/год</Typography>\r\n                    }\r\n            />\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n            <List component=\"div\">\r\n            <ListItem>\r\n                <Stack direction={'column'} sx={{ width:'100%'}}>\r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Деятельность:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.prof}</b></Typography>\r\n                    </Stack> \r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Пассивный доход:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.cashflow} К</b></Typography>\r\n                    </Stack>\r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Количество предприятий:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.bizCount}</b></Typography>\r\n                    </Stack>\r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Сумма вложений:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.deposit} К</b></Typography>\r\n                    </Stack>\r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Недвижимость в аренде:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.rentCount}</b></Typography>\r\n                    </Stack>\r\n                    <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n                        <Typography variant='caption'>Стоимость собственности:</Typography>\r\n                        <Typography variant='caption'><b> {friend.record.houseSumm} К</b></Typography>\r\n                    </Stack>\r\n                </Stack>\r\n            </ListItem>\r\n            </List>\r\n        </Collapse>\r\n        \r\n        <Divider variant=\"inset\" component=\"li\" /><br/></>\r\n    )\r\n    }\r\n\r\nexport default Friend","import { Toolbar, Typography, Button, Stack, Container, List, CircularProgress } from '@mui/material'\r\nimport React from 'react'\r\nimport PeopleIcon from '@mui/icons-material/People';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setFriends } from '../../redux/slices/userSlice';\r\nimport Friend from '../../components/Friend';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\nfunction Friends() {\r\n    const dispatch = useDispatch()\r\n    const user = useSelector((state) => state.user.user)\r\n    const friends = useSelector((state) => state.user.friends)\r\n    const users = useSelector((state) => state.user.users)\r\n    const usersIds = friends.map(u => u.id)\r\n    const ids = usersIds.map(string => String(string))\r\n    const myFriends = users.filter(({ userId }) => ids.includes(userId))\r\n\r\n    const hiInFriends = myFriends.filter(({ userId }) => user.greetingIn.includes(userId))\r\n    const hiOutFriends = myFriends.filter(({ userId }) => user.greetingOut.includes(userId))\r\n    const disableds = myFriends.filter(({ userId }) => user.disabled.includes(userId))\r\n    const noHiFriends1 = myFriends.filter(({ userId }) => !user.greetingIn.includes(userId))\r\n    const noHiFriends2 = noHiFriends1.filter(({ userId }) => !user.greetingOut.includes(userId))\r\n    const noHiFriends = noHiFriends2.filter(({ userId }) => !user.disabled.includes(userId))\r\n\r\n    async function fetchFriends() {\r\n        const response = await bridge.send('VKWebAppGetAuthToken', {\r\n            app_id: 51483243,\r\n            scope: 'friends'\r\n        })\r\n\r\n        const data = await bridge.send('VKWebAppCallAPIMethod', {\r\n            method: 'friends.get',\r\n            params: {\r\n                order: \"hints\",\r\n                fields: 'photo_100',\r\n                v: '5.131',\r\n                access_token: response.access_token\r\n            }\r\n        })\r\n\r\n        dispatch(setFriends(data.response.items))\r\n    }\r\n\r\n    return (\r\n        <Container disableGutters>\r\n            \r\n                    {friends.length == 0 ?\r\n                        <Stack direction=\"column\"\r\n                            sx={{ width: '100%', height: '60vh' }}\r\n                            alignItems=\"center\"\r\n                            justifyContent=\"center\"\r\n                            spacing={1}>\r\n                            <PeopleIcon color=\"disabled\" sx={{ fontSize: 40 }} />\r\n                            <Typography variant=\"subtitle1\">Разрешите доступ к списку друзей</Typography>\r\n                            <Typography sx={{ padding: '20px' }} variant=\"caption\">На этой вкладке будет список Ваших друзей, которые играют в эту игру.\r\n                                Вы их можете поприветствовать, за каждого кто ответит, получите 5 энергетиков дополнительно.</Typography>\r\n                            <Button onClick={() => fetchFriends()}>Разрешить</Button>\r\n                        </Stack> : <>\r\n                            {myFriends.length == 0 ?\r\n                                <Stack\r\n                                    sx={{ width: '100%', height: '60vh' }}\r\n                                    direction=\"column\"\r\n                                    alignItems=\"center\"\r\n                                    justifyContent=\"center\"\r\n                                    spacing={1}>\r\n                                    <PeopleIcon color=\"disabled\" sx={{ fontSize: 40 }} />\r\n                                    <Typography variant=\"subtitle1\">У Вас ещё нет друзей в игре</Typography>\r\n                                    <Typography sx={{ padding: '20px' }} variant=\"caption\">На этой вкладке будет список Ваших друзей, которые играют в эту игру.\r\n                                        Вы их можете поприветствовать, за каждого кто ответит, получите 5 энергетиков дополнительно.</Typography>\r\n                                </Stack> :\r\n                                <List dense>\r\n                                    {hiInFriends.map((friend) => (<Friend\r\n                                        key={friend.userId}\r\n                                        friend={friend}\r\n                                        invisible={false}\r\n                                        disabled={false} />\r\n                                    ))}\r\n                                    {noHiFriends.map((friend) => (<Friend\r\n                                        key={friend.userId}\r\n                                        friend={friend}\r\n                                        invisible={true}\r\n                                        disabled={false} />\r\n                                    ))}\r\n                                    {hiOutFriends.map((friend) => (<Friend\r\n                                        key={friend.userId}\r\n                                        friend={friend}\r\n                                        invisible={true}\r\n                                        disabled={true} />\r\n                                    ))}\r\n                                    {disableds.map((friend) => (<Friend\r\n                                        key={friend.userId}\r\n                                        friend={friend}\r\n                                        invisible={true}\r\n                                        disabled={true} />\r\n                                    ))}\r\n                                </List>\r\n                            }\r\n                        </>\r\n                    }\r\n            <Toolbar />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Friends","import { Toolbar, Box, Typography, Stack } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nfunction Record() {\r\n  const user = useSelector((state) => state.user.user)\r\n\r\n  return (\r\n    <Box sx={{ width: '100%' }} >\r\n      <Stack direction={'column'} sx={{ width: '100%' }}>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='body2'>Рекордная прибыль:</Typography>\r\n          <Typography variant='body2'><b> {user.lifesCount} К/год</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Деятельность:</Typography>\r\n          <Typography variant='caption'><b> {user.record.prof}</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Пассивный доход:</Typography>\r\n          <Typography variant='caption'><b> {user.record.cashflow} К</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Количество предприятий:</Typography>\r\n          <Typography variant='caption'><b> {user.record.bizCount}</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Сумма вложений:</Typography>\r\n          <Typography variant='caption'><b> {user.record.deposit} К</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Недвижимость в аренде:</Typography>\r\n          <Typography variant='caption'><b> {user.record.rentCount}</b></Typography>\r\n        </Stack>\r\n        <Stack justifyContent=\"space-between\" alignItems=\"flex-start\" direction={'row'}>\r\n          <Typography variant='caption'>Стоимость собственности:</Typography>\r\n          <Typography variant='caption'><b> {user.record.houseSumm} К</b></Typography>\r\n        </Stack>\r\n      </Stack>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Record","import { Toolbar, Container, List, ListItem, Typography, ListItemAvatar, ListItemText, Avatar, Button } from '@mui/material'\r\nimport React from 'react'\r\n\r\nimport { useSelector } from 'react-redux'\r\n\r\nfunction Global() {\r\n    const users = useSelector((state) => state.user.users)\r\n    const rateUsers = [...users]\r\n\r\n    function byField(field) {\r\n        return (a, b) => a[field] > b[field] ? 1 : -1;\r\n    }\r\n    const sorted = rateUsers.sort(byField('lifesCount')).reverse()\r\n\r\n    return (\r\n        <Container disableGutters>\r\n            <List dense>\r\n                {sorted.map((user) => (<ListItem\r\n                    key={user.userId}\r\n                    disablePadding\r\n                    secondaryAction={\r\n                        <Typography variant='subtitle1'>{user.lifesCount} K/год</Typography>}>\r\n                    <ListItemAvatar>\r\n                        <Avatar src={user.photo100} />\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                        primary={<Typography variant=\"subtitle1\">{user.firstName}</Typography>}\r\n                        secondary={\r\n                            <Typography variant='caption'>Рекорд:</Typography>\r\n                        }\r\n                    />\r\n                </ListItem>\r\n                ))}\r\n            </List>\r\n            <Toolbar />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Global","import { Toolbar, Paper, Tab, Tabs, Container, Badge, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Home from './profile/Home'\r\nimport Friends from './profile/Friends'\r\nimport Record from './profile/Raiting';\r\nimport Global from './profile/Global';\r\nimport Head from '../components/Head';\r\nimport { Header } from '../components/Header'\r\nimport BottomNav from '../components/BottomNav'\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { PAGE_PROFILE } from '../routers'\r\nimport { setFriends } from '../redux/slices/userSlice';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\n\r\nfunction Profile({ fetchedUser }) {\r\n  const [value, setValue] = React.useState(\"one\")\r\n  const greetings = useSelector((state) => state.user.greetings)\r\n  const dispatch = useDispatch()\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  }\r\n\r\n  async function fetchFriends() {\r\n    const response = await bridge.send('VKWebAppGetAuthToken', {\r\n      app_id: 51483243,\r\n      scope: 'friends'\r\n    })\r\n\r\n    const data = await bridge.send('VKWebAppCallAPIMethod', {\r\n      method: 'friends.get',\r\n      params: {\r\n        order: \"hints\",\r\n        fields: 'photo_100',\r\n        v: '5.131',\r\n        access_token: response.access_token\r\n      }\r\n    })\r\n\r\n    dispatch(setFriends(data.response.items))\r\n  }\r\n\r\n  const Info = (\r\n    <>\r\n    <AccountCircleIcon/>\r\n    <Typography>На вкладке <b>ПРОФИЛЬ</b> можно<br/>\r\n      -посмотреть собственность<br/>\r\n      -продать ее<br/>\r\n      -сдать недвижимость в аренду<br/>\r\n      -поприветствовать друзей<br/>\r\n      -посмотреть их рекорды<br/><br/>\r\n      При взаимном <b>приветствии</b> каждому игроку добавляется по энергетику<br/><br/>\r\n      <b>Рекорд сохраняется</b> только если нет кредитов\r\n    </Typography>\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <Paper sx={{ width: '100vw', height: '100%', minHeight: '100vh', borderRadius: 0 }}>\r\n      <Head name={'Профиль'}/>\r\n      <Container>\r\n        <Header fetchedUser={fetchedUser} info={Info} />\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          textColor=\"secondary\"\r\n          indicatorColor=\"secondary\"\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"auto\"\r\n        >\r\n          <Tab value=\"one\" label={<Typography variant=\"body2\">Собственность</Typography>} />\r\n          <Tab onClick={() => fetchFriends()} value=\"two\" label={<Badge color=\"secondary\" variant=\"dot\" invisible={!greetings}><Typography variant=\"body2\">Друзья</Typography></Badge>} />\r\n          <Tab value=\"three\" label={<Typography variant=\"body2\">Мой рекорд</Typography>} />\r\n          <Tab value=\"four\" label={<Typography variant=\"body2\">Рейтинг</Typography>} />\r\n        </Tabs>\r\n\r\n        {value === 'one' && <Home />}\r\n        {value === 'two' && <Friends/>}\r\n        {value === 'three' && <Record />}\r\n        {value === 'four' && <Global />}\r\n        <Toolbar />\r\n        <BottomNav value={PAGE_PROFILE} />\r\n      </Container>\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default Profile","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../axios.js\";\r\n\r\nconst initialState = {\r\n    houses: [],\r\n}\r\n\r\nexport const getHouses = createAsyncThunk('houses/getHouses', async ( _, { rejectWithValue, dispatch }) => {\r\n    const res = await axios.get('/houses')\r\n    dispatch(setHouses((res).data))\r\n})\r\n\r\nexport const houseSlice = createSlice({\r\n    name: 'houses',\r\n    initialState,\r\n    reducers: {\r\n        setHouses: ( state, action ) => {\r\n            state.houses = action.payload\r\n        },\r\n    },\r\n})\r\n\r\nexport const { setHouses } = houseSlice.actions\r\n\r\nexport default houseSlice.reducer","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../axios.js\";\r\n\r\nconst initialState = {\r\n    cars: [],\r\n}\r\n\r\nexport const getCars = createAsyncThunk('cars/getCars', async ( _, { rejectWithValue, dispatch }) => {\r\n    const res = await axios.get('/cars')\r\n    dispatch(setCars((res).data))\r\n})\r\n\r\nexport const carSlice = createSlice({\r\n    name: 'cars',\r\n    initialState,\r\n    reducers: {\r\n        setCars: ( state, action ) => {\r\n            state.cars = action.payload\r\n        },\r\n    },\r\n})\r\n\r\nexport const { setCars } = carSlice.actions\r\n\r\nexport default carSlice.reducer","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport axios from '../../axios.js'\r\n\r\nconst initialState = {\r\n    bizs: [],\r\n}\r\n\r\nexport const getBizs = createAsyncThunk('bizs/getBizs', async ( _, { rejectWithValue, dispatch }) => {\r\n    const res = await axios.get('/bizs')\r\n    dispatch(setBizs((res).data))\r\n})\r\n\r\nexport const bizSlice = createSlice({\r\n    name: 'bizs',\r\n    initialState,\r\n    reducers: {\r\n        setBizs: ( state, action ) => {\r\n            state.bizs = action.payload\r\n        },\r\n    },\r\n})\r\n\r\nexport const { setBizs } = bizSlice.actions\r\n\r\nexport default bizSlice.reducer","import React, { useState, useEffect } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation, withRouter } from '@happysanta/router';\r\n\r\nimport { VIEW_MAIN, PANEL_INTRO, PANEL_REGISTER, PANEL_TRAINING, PANEL_SETTINGS, PANEL_PAUSE, PANEL_MAIN, PANEL_PROPERTY, PANEL_BANK, PANEL_PROFILE } from './routers';\r\n\r\nimport Main from './panels/Main';\r\nimport Property from './panels/Property';\r\nimport Bank from './panels/Bank';\r\nimport Intro from './panels/Intro';\r\nimport Register from './panels/Register';\r\nimport Training from './panels/Training';\r\nimport Settings from './panels/Settings';\r\nimport Pause from './panels/Pause';\r\nimport Profile from './panels/Profile';\r\n\r\nimport { getHouses } from './redux/slices/housesSlice';\r\nimport { getCars } from './redux/slices/carsSlice';\r\nimport { getBizs } from './redux/slices/bizsSlice';\r\nimport { getUsers, getProfs, setDebts, setGreetings } from './redux/slices/userSlice.js';\r\nimport { AppRoot, View } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { ThemeProvider, createTheme } from '@mui/material';\r\n\r\nconst App = () => {\r\n\tconst [scheme, setScheme] = useState('bright_light') //space_gray  bright_light\r\n\tconst [fetchedUser, setUser] = useState(null)\r\n\tconst user = useSelector((state) => state.user.user)\r\n\tconst theme = useSelector((state) => state.user.theme)\r\n\r\n\tconst dispatch = useDispatch()\r\n\tconst location = useLocation()\r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\t\tif (user?.debts > 0) { dispatch(setDebts(true)) } else { dispatch(setDebts(false)) }\r\n\t\t\tif (user?.greetingIn?.length > 0) { dispatch(setGreetings(true)) } else { dispatch(setGreetings(false)) }\r\n\t\t\r\n\t}, [user])\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getHouses())\r\n\t\tdispatch(getCars())\r\n\t\tdispatch(getBizs())\r\n\t\tdispatch(getUsers())\r\n\t\tdispatch(getProfs())\r\n\r\n\t\tbridge.subscribe(({ detail: { type, data } }) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tsetScheme(data.scheme)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tasync function fetchData() {\r\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\r\n\t\t\tsetUser(user);\r\n\t\t}\r\n\t\tfetchData();\r\n\r\n\r\n\t}, []);\r\n\r\n\tconst themeSettings = () => {\r\n\t\tif(theme == 'dark'){\r\n\t\t\treturn {\r\n\t\t\t\tpalette: {\r\n\t\t\t\t\tmode: \"dark\"\r\n\t\t\t\t},\r\n\t\t\t\ttypography: {\r\n\t\t\t\t\tfontFamily: [\r\n\t\t\t\t\t\t'Jura',\r\n\t\t\t\t\t\t'sans-serif'\r\n\t\t\t\t\t].join(','),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif(theme == 'light'){\r\n\t\t\treturn{\r\n\t\t\t\tpalette: {\r\n\t\t\t\t\tmode: \"light\",\r\n\t\t\t\t\tbackground: {\r\n\t\t\t\t\t\tdefault: '#FFFFFF',\r\n\t\t\t\t\t\tpaper: '#F2F2F2'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttypography: {\r\n\t\t\t\t\tfontFamily: [\r\n\t\t\t\t\t\t'Jura',\r\n\t\t\t\t\t\t'sans-serif'\r\n\t\t\t\t\t].join(','),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t} else\r\n\t\tif(theme == 'auto'){\r\n\t\t\tif(scheme == 'bright_light'){\r\n\t\t\t\treturn{\r\n\t\t\t\t\tpalette: {\r\n\t\t\t\t\t\tmode: \"light\",\r\n\t\t\t\t\t\tbackground: {\r\n\t\t\t\t\t\t\tdefault: '#FFFFFF',\r\n\t\t\t\t\t\t\tpaper: '#F2F2F2'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttypography: {\r\n\t\t\t\t\t\tfontFamily: [\r\n\t\t\t\t\t\t\t'Jura',\r\n\t\t\t\t\t\t\t'sans-serif'\r\n\t\t\t\t\t\t].join(','),\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpalette: {\r\n\t\t\t\t\t\tmode: \"dark\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttypography: {\r\n\t\t\t\t\t\tfontFamily: [\r\n\t\t\t\t\t\t\t'Jura',\r\n\t\t\t\t\t\t\t'sans-serif'\r\n\t\t\t\t\t\t].join(','),\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst themeMode = createTheme(themeSettings())\r\n\treturn (\r\n\t\t<AppRoot>\r\n\t\t\t<ThemeProvider theme={themeMode}>\r\n\t\t\t\t<View\r\n\t\t\t\t\tid={VIEW_MAIN}\r\n\t\t\t\t\thistory={location.hasOverlay() ? [] : location.getViewHistory(VIEW_MAIN)}\r\n\t\t\t\t\tactivePanel={location.getViewActivePanel(VIEW_MAIN)}>\r\n\t\t\t\t\t<Intro id={PANEL_INTRO} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Register id={PANEL_REGISTER} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Training id={PANEL_TRAINING} />\r\n\t\t\t\t\t<Settings id={PANEL_SETTINGS} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Pause id={PANEL_PAUSE} />\r\n\t\t\t\t\t<Main id={PANEL_MAIN} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Property id={PANEL_PROPERTY} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Bank id={PANEL_BANK} fetchedUser={fetchedUser} />\r\n\t\t\t\t\t<Profile id={PANEL_PROFILE} fetchedUser={fetchedUser} />\r\n\t\t\t\t</View>\r\n\t\t\t</ThemeProvider>\r\n\t\t</AppRoot>\r\n\t);\r\n}\r\n\r\nexport default withRouter(App);\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport userSlice from \"./slices/userSlice\";\r\nimport houseSlice from \"./slices/housesSlice\";\r\nimport carsSlice from \"./slices/carsSlice\";\r\nimport bizsSlice from \"./slices/bizsSlice\";\r\n\r\nexport const store = configureStore({\r\n    reducer:{\r\n        user: userSlice,\r\n        houses: houseSlice,\r\n        cars: carsSlice,\r\n        bizs: bizsSlice,\r\n    }\r\n}) ","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './redux/store.js'\r\nimport { router } from \"./routers\";\r\nimport { RouterContext } from \"@happysanta/router\";\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(\r\n  <RouterContext.Provider value={router}>\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>  \r\n    </RouterContext.Provider>\r\n, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}